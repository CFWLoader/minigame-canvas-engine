!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){t.exports=function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),i=/MSIE \d/.test(t),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),s=i||r||o,a=s&&(i?document.documentMode||6:+(o||r)[1]),l=!o&&/WebKit\//.test(t),u=l&&/Qt\/\d+\.\d+/.test(t),c=!o&&/Chrome\//.test(t),h=/Opera\//.test(t),p=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),d=/PhantomJS/.test(t),_=!o&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),g=/Android/.test(t),m=_||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),v=_||/Mac/.test(e),y=/\bCrOS\b/.test(t),b=/win/i.test(e),w=h&&t.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(h=!1,l=!0);var x=v&&(u||h&&(null==w||w<12.11)),k=n||s&&a>=9;function C(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var T,S=function(t,e){var n=t.className,i=C(e).exec(n);if(i){var r=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function O(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function E(t,e){return O(t).appendChild(e)}function L(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function M(t,e,n,i){var r=L(t,e,n,i);return r.setAttribute("role","presentation"),r}function A(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function N(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function R(t,e){var n=t.className;C(e).test(n)||(t.className+=(n?" ":"")+e)}function P(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!C(n[i]).test(e)&&(e+=" "+n[i]);return e}T=document.createRange?function(t,e,n,i){var r=document.createRange();return r.setEnd(i||t,n),r.setStart(t,e),r}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var D=function(t){t.select()};function I(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function W(t,e,n){for(var i in e||(e={}),t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function B(t,e,n,i,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=i||0,s=r||0;;){var a=t.indexOf("\t",o);if(a<0||a>=e)return s+(e-o);s+=a-o,s+=n-s%n,o=a+1}}_?D=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:s&&(D=function(t){try{t.select()}catch(t){}});var j=function(){this.id=null,this.f=null,this.time=0,this.handler=I(this.onTimeout,this)};function H(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}j.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},j.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var z=30,F={toString:function(){return"CodeMirror.Pass"}},U={scroll:!1},K={origin:"*mouse"},V={origin:"+move"};function X(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var s=o-i;if(o==t.length||r+s>=e)return i+Math.min(s,e-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=e)return i}}var G=[""];function Y(t){for(;G.length<=t;)G.push($(G)+" ");return G[t]}function $(t){return t[t.length-1]}function q(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function Q(){}function Z(t,e){var n;return Object.create?n=Object.create(t):(Q.prototype=t,n=new Q),e&&W(e,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||J.test(t))}function et(t,e){return e?!!(e.source.indexOf("\\w")>-1&&tt(t))||e.test(t):tt(t)}function nt(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var it=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rt(t){return t.charCodeAt(0)>=768&&it.test(t)}function ot(t,e,n){for(;(n<0?e>0:e<t.length)&&rt(t.charAt(e));)e+=n;return e}function st(t,e,n){for(var i=e>n?-1:1;;){if(e==n)return e;var r=(e+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+i}}var at=null;function lt(t,e,n){var i;at=null;for(var r=0;r<t.length;++r){var o=t[r];if(o.from<e&&o.to>e)return r;o.to==e&&(o.from!=o.to&&"before"==n?i=r:at=r),o.from==e&&(o.from!=o.to&&"before"!=n?i=r:at=r)}return null!=i?i:at}var ut=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",e="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,r=/[LRr]/,o=/[Lb1n]/,s=/[1n]/;function a(t,e,n){this.level=t,this.from=e,this.to=n}return function(l,u){var c="ltr"==u?"L":"R";if(0==l.length||"ltr"==u&&!n.test(l))return!1;for(var h,p=l.length,f=[],d=0;d<p;++d)f.push((h=l.charCodeAt(d))<=247?t.charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1785?e.charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":8204==h?"b":"L");for(var _=0,g=c;_<p;++_){var m=f[_];"m"==m?f[_]=g:g=m}for(var v=0,y=c;v<p;++v){var b=f[v];"1"==b&&"r"==y?f[v]="n":r.test(b)&&(y=b,"r"==b&&(f[v]="R"))}for(var w=1,x=f[0];w<p-1;++w){var k=f[w];"+"==k&&"1"==x&&"1"==f[w+1]?f[w]="1":","!=k||x!=f[w+1]||"1"!=x&&"n"!=x||(f[w]=x),x=k}for(var C=0;C<p;++C){var T=f[C];if(","==T)f[C]="N";else if("%"==T){var S=void 0;for(S=C+1;S<p&&"%"==f[S];++S);for(var O=C&&"!"==f[C-1]||S<p&&"1"==f[S]?"1":"N",E=C;E<S;++E)f[E]=O;C=S-1}}for(var L=0,M=c;L<p;++L){var A=f[L];"L"==M&&"1"==A?f[L]="L":r.test(A)&&(M=A)}for(var N=0;N<p;++N)if(i.test(f[N])){var R=void 0;for(R=N+1;R<p&&i.test(f[R]);++R);for(var P="L"==(N?f[N-1]:c),D=P==("L"==(R<p?f[R]:c))?P?"L":"R":c,I=N;I<R;++I)f[I]=D;N=R-1}for(var W,B=[],j=0;j<p;)if(o.test(f[j])){var H=j;for(++j;j<p&&o.test(f[j]);++j);B.push(new a(0,H,j))}else{var z=j,F=B.length;for(++j;j<p&&"L"!=f[j];++j);for(var U=z;U<j;)if(s.test(f[U])){z<U&&B.splice(F,0,new a(1,z,U));var K=U;for(++U;U<j&&s.test(f[U]);++U);B.splice(F,0,new a(2,K,U)),z=U}else++U;z<j&&B.splice(F,0,new a(1,z,j))}return"ltr"==u&&(1==B[0].level&&(W=l.match(/^\s+/))&&(B[0].from=W[0].length,B.unshift(new a(0,0,W[0].length))),1==$(B).level&&(W=l.match(/\s+$/))&&($(B).to-=W[0].length,B.push(new a(0,p-W[0].length,p)))),"rtl"==u?B.reverse():B}}();function ct(t,e){var n=t.order;return null==n&&(n=t.order=ut(t.text,e)),n}var ht=[],pt=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||ht).concat(n)}};function ft(t,e){return t._handlers&&t._handlers[e]||ht}function dt(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,r=i&&i[e];if(r){var o=H(r,n);o>-1&&(i[e]=r.slice(0,o).concat(r.slice(o+1)))}}}function _t(t,e){var n=ft(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function gt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),_t(t,n||e.type,t,e),xt(e)||e.codemirrorIgnore}function mt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==H(n,e[i])&&n.push(e[i])}function vt(t,e){return ft(t,e).length>0}function yt(t){t.prototype.on=function(t,e){pt(this,t,e)},t.prototype.off=function(t,e){dt(this,t,e)}}function bt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function wt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function xt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function kt(t){bt(t),wt(t)}function Ct(t){return t.target||t.srcElement}function Tt(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),v&&t.ctrlKey&&1==e&&(e=3),e}var St,Ot,Et=function(){if(s&&a<9)return!1;var t=L("div");return"draggable"in t||"dragDrop"in t}();function Lt(t){if(null==St){var e=L("span","​");E(t,L("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(St=e.offsetWidth<=1&&e.offsetHeight>2&&!(s&&a<8))}var n=St?L("span","​"):L("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Mt(t){if(null!=Ot)return Ot;var e=E(t,document.createTextNode("AخA")),n=T(e,0,1).getBoundingClientRect(),i=T(e,1,2).getBoundingClientRect();return O(t),!(!n||n.left==n.right)&&(Ot=i.right-n.right<3)}var At,Nt=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Rt=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Pt="oncopy"in(At=L("div"))||(At.setAttribute("oncopy","return;"),"function"==typeof At.oncopy),Dt=null,It={},Wt={};function Bt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),It[t]=e}function jt(t){if("string"==typeof t&&Wt.hasOwnProperty(t))t=Wt[t];else if(t&&"string"==typeof t.name&&Wt.hasOwnProperty(t.name)){var e=Wt[t.name];"string"==typeof e&&(e={name:e}),(t=Z(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return jt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return jt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Ht(t,e){e=jt(e);var n=It[e.name];if(!n)return Ht(t,"text/plain");var i=n(t,e);if(zt.hasOwnProperty(e.name)){var r=zt[e.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)i[s]=e.modeProps[s];return i}var zt={};function Ft(t,e){W(e,zt.hasOwnProperty(t)?zt[t]:zt[t]={})}function Ut(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Kt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Vt(t,e,n){return!t.startState||t.startState(e,n)}var Xt=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Gt(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(e<o){n=r;break}e-=o}return n.lines[e]}function Yt(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,(function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r})),i}function $t(t,e,n){var i=[];return t.iter(e,n,(function(t){i.push(t.text)})),i}function qt(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function Qt(t){if(null==t.parent)return null;for(var e=t.parent,n=H(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function Zt(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(e<o){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(var s=0;s<t.lines.length;++s){var a=t.lines[s].height;if(e<a)break;e-=a}return n+s}function Jt(t,e){return e>=t.first&&e<t.first+t.size}function te(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function ee(t,e,n){if(void 0===n&&(n=null),!(this instanceof ee))return new ee(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ne(t,e){return t.line-e.line||t.ch-e.ch}function ie(t,e){return t.sticky==e.sticky&&0==ne(t,e)}function re(t){return ee(t.line,t.ch)}function oe(t,e){return ne(t,e)<0?e:t}function se(t,e){return ne(t,e)<0?t:e}function ae(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function le(t,e){if(e.line<t.first)return ee(t.first,0);var n=t.first+t.size-1;return e.line>n?ee(n,Gt(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?ee(t.line,e):n<0?ee(t.line,0):t}(e,Gt(t,e.line).text.length)}function ue(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=le(t,e[i]);return n}Xt.prototype.eol=function(){return this.pos>=this.string.length},Xt.prototype.sol=function(){return this.pos==this.lineStart},Xt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xt.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Xt.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Xt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Xt.prototype.skipToEnd=function(){this.pos=this.string.length},Xt.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Xt.prototype.backUp=function(t){this.pos-=t},Xt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=B(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Xt.prototype.indentation=function(){return B(this.string,null,this.tabSize)-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Xt.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t};if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},Xt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xt.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Xt.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Xt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ce=function(t,e){this.state=t,this.lookAhead=e},he=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function pe(t,e,n,i){var r=[t.state.modeGen],o={};we(t,e.text,t.doc.mode,n,(function(t,e){return r.push(t,e)}),o,i);for(var s=n.state,a=function(i){n.baseTokens=r;var a=t.state.overlays[i],l=1,u=0;n.state=!0,we(t,e.text,a.mode,n,(function(t,e){for(var n=l;u<t;){var i=r[l];i>t&&r.splice(l,1,t,r[l+1],i),l+=2,u=Math.min(t,i)}if(e)if(a.opaque)r.splice(n,l-n,t,"overlay "+e),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+e}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},l=0;l<t.state.overlays.length;++l)a(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function fe(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=de(t,Qt(e)),r=e.text.length>t.options.maxHighlightLength&&Ut(t.doc.mode,i.state),o=pe(t,e,i);r&&(i.state=r),e.stateAfter=i.save(!r),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function de(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return new he(i,!0,e);var o=function(t,e,n){for(var i,r,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=o.first)return o.first;var l=Gt(o,a-1),u=l.stateAfter;if(u&&(!n||a+(u instanceof ce?u.lookAhead:0)<=o.modeFrontier))return a;var c=B(l.text,null,t.options.tabSize);(null==r||i>c)&&(r=a-1,i=c)}return r}(t,e,n),s=o>i.first&&Gt(i,o-1).stateAfter,a=s?he.fromSaved(i,s,o):new he(i,Vt(i.mode),o);return i.iter(o,e,(function(n){_e(t,n.text,a);var i=a.line;n.stateAfter=i==e-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?a.save():null,a.nextLine()})),n&&(i.modeFrontier=a.line),a}function _e(t,e,n,i){var r=t.doc.mode,o=new Xt(e,t.options.tabSize,n);for(o.start=o.pos=i||0,""==e&&ge(r,n.state);!o.eol();)me(r,o,n.state),o.start=o.pos}function ge(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Kt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function me(t,e,n,i){for(var r=0;r<10;r++){i&&(i[0]=Kt(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}he.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},he.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},he.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},he.fromSaved=function(t,e,n){return e instanceof ce?new he(t,Ut(t.mode,e.state),n,e.lookAhead):new he(t,Ut(t.mode,e),n)},he.prototype.save=function(t){var e=!1!==t?Ut(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ce(e,this.maxLookAhead):e};var ve=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function ye(t,e,n,i){var r,o,s=t.doc,a=s.mode,l=Gt(s,(e=le(s,e)).line),u=de(t,e.line,n),c=new Xt(l.text,t.options.tabSize,u);for(i&&(o=[]);(i||c.pos<e.ch)&&!c.eol();)c.start=c.pos,r=me(a,c,u.state),i&&o.push(new ve(c,r,Ut(s.mode,u.state)));return i?o:new ve(c,r,u.state)}function be(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function we(t,e,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var l,u=0,c=null,h=new Xt(e,t.options.tabSize,i),p=t.options.addModeClass&&[null];for(""==e&&be(ge(n,i.state),o);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,s&&_e(t,e,i,h.pos),h.pos=e.length,l=null):l=be(me(n,h,i.state,p),o),p){var f=p[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||c!=l){for(;u<h.start;)r(u=Math.min(h.start,u+5e3),c);c=l}h.start=h.pos}for(;u<h.pos;){var d=Math.min(h.pos,u+5e3);r(d,c),u=d}}var xe=!1,ke=!1;function Ce(t,e,n){this.marker=t,this.from=e,this.to=n}function Te(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Se(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Oe(t,e){if(e.full)return null;var n=Jt(t,e.from.line)&&Gt(t,e.from.line).markedSpans,i=Jt(t,e.to.line)&&Gt(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,s=0==ne(e.from,e.to),a=function(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push(new Ce(s,o.from,a?null:o.to))}}return i}(n,r,s),l=function(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push(new Ce(s,a?null:o.from-e,null==o.to?null:o.to-e))}}return i}(i,o,s),u=1==e.text.length,c=$(e.text).length+(u?r:0);if(a)for(var h=0;h<a.length;++h){var p=a[h];if(null==p.to){var f=Te(l,p.marker);f?u&&(p.to=null==f.to?null:f.to+c):p.to=r}}if(l)for(var d=0;d<l.length;++d){var _=l[d];null!=_.to&&(_.to+=c),null==_.from?Te(a,_.marker)||(_.from=c,u&&(a||(a=[])).push(_)):(_.from+=c,u&&(a||(a=[])).push(_))}a&&(a=Ee(a)),l&&l!=a&&(l=Ee(l));var g=[a];if(!u){var m,v=e.text.length-2;if(v>0&&a)for(var y=0;y<a.length;++y)null==a[y].to&&(m||(m=[])).push(new Ce(a[y].marker,null,null));for(var b=0;b<v;++b)g.push(m);g.push(l)}return g}function Ee(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Le(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Me(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Ae(t){return t.inclusiveLeft?-1:0}function Ne(t){return t.inclusiveRight?1:0}function Re(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),r=e.find(),o=ne(i.from,r.from)||Ae(t)-Ae(e);if(o)return-o;var s=ne(i.to,r.to)||Ne(t)-Ne(e);return s||e.id-t.id}function Pe(t,e){var n,i=ke&&t.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(e?r.from:r.to)&&(!n||Re(n,r.marker)<0)&&(n=r.marker);return n}function De(t){return Pe(t,!0)}function Ie(t){return Pe(t,!1)}function We(t,e){var n,i=ke&&t.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||Re(n,o.marker)<0)&&(n=o.marker)}return n}function Be(t,e,n,i,r){var o=Gt(t,e),s=ke&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var u=l.marker.find(0),c=ne(u.from,n)||Ae(l.marker)-Ae(r),h=ne(u.to,i)||Ne(l.marker)-Ne(r);if(!(c>=0&&h<=0||c<=0&&h>=0)&&(c<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ne(u.to,n)>=0:ne(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ne(u.from,i)<=0:ne(u.from,i)<0)))return!0}}}function je(t){for(var e;e=De(t);)t=e.find(-1,!0).line;return t}function He(t,e){var n=Gt(t,e),i=je(n);return n==i?e:Qt(i)}function ze(t,e){if(e>t.lastLine())return e;var n,i=Gt(t,e);if(!Fe(t,i))return e;for(;n=Ie(i);)i=n.find(1,!0).line;return Qt(i)+1}function Fe(t,e){var n=ke&&e.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Ue(t,e,i))return!0}}function Ue(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return Ue(t,i.line,Te(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r=void 0,o=0;o<e.markedSpans.length;++o)if((r=e.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ue(t,e,r))return!0}function Ke(t){for(var e=0,n=(t=je(t)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;e+=a.height}return e}function Ve(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=De(i);){var r=e.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=t;e=Ie(i);){var o=e.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function Xe(t){var e=t.display,n=t.doc;e.maxLine=Gt(n,n.first),e.maxLineLength=Ve(e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var n=Ve(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}var Ge=function(t,e,n){this.text=t,Me(this,e),this.height=n?n(this):1};function Ye(t){t.parent=null,Le(t)}Ge.prototype.lineNo=function(){return Qt(this)},yt(Ge);var $e={},qe={};function Qe(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?qe:$e;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Ze(t,e){var n=M("span",null,null,l?"padding-right: .1px":null),i={pre:M("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var o=r?e.rest[r-1]:e.line,s=void 0;i.pos=0,i.addToken=tn,Mt(t.display.measure)&&(s=ct(o,t.doc.direction))&&(i.addToken=en(i.addToken,s)),i.map=[],rn(o,i,fe(t,o,e!=t.display.externalMeasured&&Qt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=P(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=P(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Lt(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(l){var a=i.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return _t(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=P(i.pre.className,i.textClass||"")),i}function Je(t){var e=L("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function tn(t,e,n,i,r,o,l){if(e){var u,c=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,i="",r=0;r<t.length;r++){var o=t.charAt(r);" "!=o||!n||r!=t.length-1&&32!=t.charCodeAt(r+1)||(o=" "),i+=o,n=" "==o}return i}(e,t.trailingSpace):e,h=t.cm.state.specialChars,p=!1;if(h.test(e)){u=document.createDocumentFragment();for(var f=0;;){h.lastIndex=f;var d=h.exec(e),_=d?d.index-f:e.length-f;if(_){var g=document.createTextNode(c.slice(f,f+_));s&&a<9?u.appendChild(L("span",[g])):u.appendChild(g),t.map.push(t.pos,t.pos+_,g),t.col+=_,t.pos+=_}if(!d)break;f+=_+1;var m=void 0;if("\t"==d[0]){var v=t.cm.options.tabSize,y=v-t.col%v;(m=u.appendChild(L("span",Y(y),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=y}else"\r"==d[0]||"\n"==d[0]?((m=u.appendChild(L("span","\r"==d[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",d[0]),t.col+=1):((m=t.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),s&&a<9?u.appendChild(L("span",[m])):u.appendChild(m),t.col+=1);t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,u=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,u),s&&a<9&&(p=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||i||r||p||o){var b=n||"";i&&(b+=i),r&&(b+=r);var w=L("span",[u],b,o);if(l)for(var x in l)l.hasOwnProperty(x)&&"style"!=x&&"class"!=x&&w.setAttribute(x,l[x]);return t.content.appendChild(w)}t.content.appendChild(u)}}function en(t,e){return function(n,i,r,o,s,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+i.length;;){for(var h=void 0,p=0;p<e.length&&!((h=e[p]).to>u&&h.from<=u);p++);if(h.to>=c)return t(n,i,r,o,s,a,l);t(n,i.slice(0,h.to-u),r,o,null,a,l),o=null,i=i.slice(h.to-u),u=h.to}}}function nn(t,e,n,i){var r=!i&&n.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r||(r=t.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function rn(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var s,a,l,u,c,h,p,f=r.length,d=0,_=1,g="",m=0;;){if(m==d){l=u=c=a="",p=null,h=null,m=1/0;for(var v=[],y=void 0,b=0;b<i.length;++b){var w=i[b],x=w.marker;if("bookmark"==x.type&&w.from==d&&x.widgetNode)v.push(x);else if(w.from<=d&&(null==w.to||w.to>d||x.collapsed&&w.to==d&&w.from==d)){if(null!=w.to&&w.to!=d&&m>w.to&&(m=w.to,u=""),x.className&&(l+=" "+x.className),x.css&&(a=(a?a+";":"")+x.css),x.startStyle&&w.from==d&&(c+=" "+x.startStyle),x.endStyle&&w.to==m&&(y||(y=[])).push(x.endStyle,w.to),x.title&&((p||(p={})).title=x.title),x.attributes)for(var k in x.attributes)(p||(p={}))[k]=x.attributes[k];x.collapsed&&(!h||Re(h.marker,x)<0)&&(h=w)}else w.from>d&&m>w.from&&(m=w.from)}if(y)for(var C=0;C<y.length;C+=2)y[C+1]==m&&(u+=" "+y[C]);if(!h||h.from==d)for(var T=0;T<v.length;++T)nn(e,0,v[T]);if(h&&(h.from||0)==d){if(nn(e,(null==h.to?f+1:h.to)-d,h.marker,null==h.from),null==h.to)return;h.to==d&&(h=!1)}}if(d>=f)break;for(var S=Math.min(f,m);;){if(g){var O=d+g.length;if(!h){var E=O>S?g.slice(0,S-d):g;e.addToken(e,E,s?s+l:l,c,d+E.length==m?u:"",a,p)}if(O>=S){g=g.slice(S-d),d=S;break}d=O,c=""}g=r.slice(o,o=n[_++]),s=Qe(n[_++],e.cm.options)}}else for(var L=1;L<n.length;L+=2)e.addToken(e,r.slice(o,o=n[L]),Qe(n[L+1],e.cm.options))}function on(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Ie(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?Qt($(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Fe(t,e)}function sn(t,e,n){for(var i,r=[],o=e;o<n;o=i){var s=new on(t.doc,Gt(t.doc,o),o);i=o+s.size,r.push(s)}return r}var an=null,ln=null;function un(t,e){var n=ft(t,e);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);an?i=an.delayedCallbacks:ln?i=ln:(i=ln=[],setTimeout(cn,0));for(var o=function(t){i.push((function(){return n[t].apply(null,r)}))},s=0;s<n.length;++s)o(s)}}function cn(){var t=ln;ln=null;for(var e=0;e<t.length;++e)t[e]()}function hn(t,e,n,i){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?dn(t,e):"gutter"==o?gn(t,e,n,i):"class"==o?_n(t,e):"widget"==o&&mn(t,e,i)}e.changes=null}function pn(t){return t.node==t.text&&(t.node=L("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),s&&a<8&&(t.node.style.zIndex=2)),t.node}function fn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Ze(t,e)}function dn(t,e){var n=e.text.className,i=fn(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,_n(t,e)):n&&(e.text.className=n)}function _n(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var i=pn(e);e.background=i.insertBefore(L("div",null,n),i.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?pn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function gn(t,e,n,i){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var r=pn(e);e.gutterBackground=L("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),r.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var s=pn(e),a=e.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(t.display.input.setUneditable(a),s.insertBefore(a,e.text),e.line.gutterClass&&(a.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=a.appendChild(L("div",te(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<t.display.gutterSpecs.length;++l){var u=t.display.gutterSpecs[l].className,c=o.hasOwnProperty(u)&&o[u];c&&a.appendChild(L("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function mn(t,e,n){e.alignable&&(e.alignable=null);for(var i=e.node.firstChild,r=void 0;i;i=r)r=i.nextSibling,"CodeMirror-linewidget"==i.className&&e.node.removeChild(i);yn(t,e,n)}function vn(t,e,n,i){var r=fn(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),_n(t,e),gn(t,e,n,i),yn(t,e,i),e.node}function yn(t,e,n){if(bn(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)bn(t,e.rest[i],e,n,!1)}function bn(t,e,n,i,r){if(e.widgets)for(var o=pn(n),s=0,a=e.widgets;s<a.length;++s){var l=a[s],u=L("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),wn(l,u,n,i),t.display.input.setUneditable(u),r&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),un(l,"redraw")}}function wn(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function xn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!A(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),E(e.display.measure,L("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function kn(t,e){for(var n=Ct(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function Cn(t){return t.lineSpace.offsetTop}function Tn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Sn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=E(t.measure,L("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(t.cachedPaddingH=i),i}function On(t){return z-t.display.nativeBarWidth}function En(t){return t.display.scroller.clientWidth-On(t)-t.display.barWidth}function Ln(t){return t.display.scroller.clientHeight-On(t)-t.display.barHeight}function Mn(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var r=0;r<t.rest.length;r++)if(Qt(t.rest[r])>n)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}function An(t,e,n,i){return Pn(t,Rn(t,e),n,i)}function Nn(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[hi(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Rn(t,e){var n=Qt(e),i=Nn(t,n);i&&!i.text?i=null:i&&i.changes&&(hn(t,i,n,si(t)),t.curOp.forceUpdate=!0),i||(i=function(t,e){var n=Qt(e=je(e)),i=t.display.externalMeasured=new on(t.doc,e,n);i.lineN=n;var r=i.built=Ze(t,i);return i.text=r.pre,E(t.display.lineMeasure,r.pre),i}(t,e));var r=Mn(i,e,n);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Pn(t,e,n,i,r){e.before&&(n=-1);var o,l=n+(i||"");return e.cache.hasOwnProperty(l)?o=e.cache[l]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var i=t.options.lineWrapping,r=i&&En(t);if(!e.measure.heights||i&&e.measure.width!=r){var o=e.measure.heights=[];if(i){e.measure.width=r;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],u=s[a+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,n,i){var r,o=Wn(e.map,n,i),l=o.node,u=o.start,c=o.end,h=o.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;u&&rt(e.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&rt(e.line.text.charAt(o.coverStart+c));)++c;if((r=s&&a<9&&0==u&&c==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Bn(T(l,u,c).getClientRects(),i)).left||r.right||0==u)break;c=u,u-=1,h="right"}s&&a<11&&(r=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Dt)return Dt;var e=E(t,L("span","x")),n=e.getBoundingClientRect(),i=T(e,0,1).getBoundingClientRect();return Dt=Math.abs(n.left-i.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}(t.display.measure,r))}else{var f;u>0&&(h=i="right"),r=t.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==i?f.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!u&&(!r||!r.left&&!r.right)){var d=l.parentNode.getClientRects()[0];r=d?{left:d.left,right:d.left+oi(t.display),top:d.top,bottom:d.bottom}:In}for(var _=r.top-e.rect.top,g=r.bottom-e.rect.top,m=(_+g)/2,v=e.view.measure.heights,y=0;y<v.length-1&&!(m<v[y]);y++);var b=y?v[y-1]:0,w=v[y],x={left:("right"==h?r.right:r.left)-e.rect.left,right:("left"==h?r.left:r.right)-e.rect.left,top:b,bottom:w};return r.left||r.right||(x.bogus=!0),t.options.singleCursorHeightPerLine||(x.rtop=_,x.rbottom=g),x}(t,e,n,i)).bogus||(e.cache[l]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var Dn,In={left:0,right:0,top:0,bottom:0};function Wn(t,e,n){for(var i,r,o,s,a,l,u=0;u<t.length;u+=3)if(a=t[u],l=t[u+1],e<a?(r=0,o=1,s="left"):e<l?o=1+(r=e-a):(u==t.length-3||e==l&&t[u+3]>e)&&(r=(o=l-a)-1,e>=l&&(s="right")),null!=r){if(i=t[u+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)i=t[2+(u-=3)],s="left";if("right"==n&&r==l-a)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)i=t[(u+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:a,coverEnd:l}}function Bn(t,e){var n=In;if("left"==e)for(var i=0;i<t.length&&(n=t[i]).left==n.right;i++);else for(var r=t.length-1;r>=0&&(n=t[r]).left==n.right;r--);return n}function jn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Hn(t){t.display.externalMeasure=null,O(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)jn(t.display.view[e])}function zn(t){Hn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Fn(){return c&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Un(){return c&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Kn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=xn(t.widgets[n]));return e}function Vn(t,e,n,i,r){if(!r){var o=Kn(e);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=Ke(e);if("local"==i?s+=Cn(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:Un());var l=a.left+("window"==i?0:Fn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function Xn(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=Fn(),r-=Un();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function Gn(t,e,n,i,r){return i||(i=Gt(t.doc,e.line)),Vn(t,i,An(t,i,e.ch,r),n)}function Yn(t,e,n,i,r,o){function s(e,s){var a=Pn(t,r,e,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Vn(t,i,a,n)}i=i||Gt(t.doc,e.line),r||(r=Rn(t,i));var a=ct(i,t.doc.direction),l=e.ch,u=e.sticky;if(l>=i.text.length?(l=i.text.length,u="before"):l<=0&&(l=0,u="after"),!a)return s("before"==u?l-1:l,"before"==u);function c(t,e,n){return s(n?t-1:t,1==a[e].level!=n)}var h=lt(a,l,u),p=at,f=c(l,h,"before"==u);return null!=p&&(f.other=c(l,p,"before"!=u)),f}function $n(t,e){var n=0;e=le(t.doc,e),t.options.lineWrapping||(n=oi(t.display)*e.ch);var i=Gt(t.doc,e.line),r=Ke(i)+Cn(t.display);return{left:n,right:n,top:r,bottom:r+i.height}}function qn(t,e,n,i,r){var o=ee(t,e,n);return o.xRel=r,i&&(o.outside=i),o}function Qn(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return qn(i.first,0,null,-1,-1);var r=Zt(i,n),o=i.first+i.size-1;if(r>o)return qn(i.first+i.size-1,Gt(i,o).text.length,null,1,1);e<0&&(e=0);for(var s=Gt(i,r);;){var a=ei(t,s,r,e,n),l=We(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var u=l.find(1);if(u.line==r)return u;s=Gt(i,r=u.line)}}function Zn(t,e,n,i){i-=Kn(e);var r=e.text.length,o=st((function(e){return Pn(t,n,e-1).bottom<=i}),r,0);return{begin:o,end:r=st((function(e){return Pn(t,n,e).top>i}),o,r)}}function Jn(t,e,n,i){return n||(n=Rn(t,e)),Zn(t,e,n,Vn(t,e,Pn(t,n,i),"line").top)}function ti(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function ei(t,e,n,i,r){r-=Ke(e);var o=Rn(t,e),s=Kn(e),a=0,l=e.text.length,u=!0,c=ct(e,t.doc.direction);if(c){var h=(t.options.lineWrapping?ii:ni)(t,e,n,o,c,i,r);a=(u=1!=h.level)?h.from:h.to-1,l=u?h.to:h.from-1}var p,f,d=null,_=null,g=st((function(e){var n=Pn(t,o,e);return n.top+=s,n.bottom+=s,!!ti(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(d=e,_=n),!0)}),a,l),m=!1;if(_){var v=i-_.left<_.right-i,y=v==u;g=d+(y?0:1),f=y?"after":"before",p=v?_.left:_.right}else{u||g!=l&&g!=a||g++,f=0==g?"after":g==e.text.length?"before":Pn(t,o,g-(u?1:0)).bottom+s<=r==u?"after":"before";var b=Yn(t,ee(n,g,f),"line",e,o);p=b.left,m=r<b.top?-1:r>=b.bottom?1:0}return qn(n,g=ot(e.text,g,1),f,m,i-p)}function ni(t,e,n,i,r,o,s){var a=st((function(a){var l=r[a],u=1!=l.level;return ti(Yn(t,ee(n,u?l.to:l.from,u?"before":"after"),"line",e,i),o,s,!0)}),0,r.length-1),l=r[a];if(a>0){var u=1!=l.level,c=Yn(t,ee(n,u?l.from:l.to,u?"after":"before"),"line",e,i);ti(c,o,s,!0)&&c.top>s&&(l=r[a-1])}return l}function ii(t,e,n,i,r,o,s){var a=Zn(t,e,i,s),l=a.begin,u=a.end;/\s/.test(e.text.charAt(u-1))&&u--;for(var c=null,h=null,p=0;p<r.length;p++){var f=r[p];if(!(f.from>=u||f.to<=l)){var d=Pn(t,i,1!=f.level?Math.min(u,f.to)-1:Math.max(l,f.from)).right,_=d<o?o-d+1e9:d-o;(!c||h>_)&&(c=f,h=_)}}return c||(c=r[r.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function ri(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Dn){Dn=L("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)Dn.appendChild(document.createTextNode("x")),Dn.appendChild(L("br"));Dn.appendChild(document.createTextNode("x"))}E(t.measure,Dn);var n=Dn.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),O(t.measure),n||1}function oi(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=L("span","xxxxxxxxxx"),n=L("pre",[e],"CodeMirror-line-like");E(t.measure,n);var i=e.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function si(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=t.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+r,i[a]=o.clientWidth}return{fixedPos:ai(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function ai(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function li(t){var e=ri(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/oi(t.display)-3);return function(r){if(Fe(t.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*e:o+e}}function ui(t){var e=t.doc,n=li(t);e.iter((function(t){var e=n(t);e!=t.height&&qt(t,e)}))}function ci(t,e,n,i){var r=t.display;if(!n&&"true"==Ct(e).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=e.clientX-a.left,s=e.clientY-a.top}catch(e){return null}var l,u=Qn(t,o,s);if(i&&1==u.xRel&&(l=Gt(t.doc,u.line).text).length==u.ch){var c=B(l,l.length,t.options.tabSize)-l.length;u=ee(u.line,Math.max(0,Math.round((o-Sn(t.display).left)/oi(t.display))-c))}return u}function hi(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function pi(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)ke&&He(t.doc,e)<r.viewTo&&di(t);else if(n<=r.viewFrom)ke&&ze(t.doc,n+i)>r.viewFrom?di(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)di(t);else if(e<=r.viewFrom){var o=_i(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):di(t)}else if(n>=r.viewTo){var s=_i(t,e,e,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):di(t)}else{var a=_i(t,e,e,-1),l=_i(t,n,n+i,1);a&&l?(r.view=r.view.slice(0,a.index).concat(sn(t,a.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):di(t)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:e<u.lineN+u.size&&(r.externalMeasured=null))}function fi(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[hi(t,e)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==H(s,n)&&s.push(n)}}}function di(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function _i(t,e,n,i){var r,o=hi(t,e),s=t.display.view;if(!ke||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var a=t.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=e){if(i>0){if(o==s.length-1)return null;r=a+s[o].size-e,o++}else r=a-e;e+=r,n+=r}for(;He(t.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function gi(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++n}return n}function mi(t){t.display.input.showSelection(t.display.input.prepareSelection())}function vi(t,e){void 0===e&&(e=!0);for(var n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(e||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var l=a.empty();(l||t.options.showCursorWhenSelecting)&&yi(t,a.head,r),l||wi(t,a,o)}}return i}function yi(t,e,n){var i=Yn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(L("div"," ","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",i.other){var o=n.appendChild(L("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function bi(t,e){return t.top-e.top||t.left-e.left}function wi(t,e,n){var i=t.display,r=t.doc,o=document.createDocumentFragment(),s=Sn(t.display),a=s.left,l=Math.max(i.sizerWidth,En(t)-i.sizer.offsetLeft)-s.right,u="ltr"==r.direction;function c(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),o.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?l-t:n)+"px;\n                             height: "+(i-e)+"px"))}function h(e,n,i){var o,s,h=Gt(r,e),p=h.text.length;function f(n,i){return Gn(t,ee(e,n),"div",h,i)}function d(e,n,i){var r=Jn(t,h,null,e),o="ltr"==n==("after"==i)?"left":"right";return f("after"==i?r.begin:r.end-(/\s/.test(h.text.charAt(r.end-1))?2:1),o)[o]}var _=ct(h,r.direction);return function(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var r=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(e,n,"ltr")}(_,n||0,null==i?p:i,(function(t,e,r,h){var g="ltr"==r,m=f(t,g?"left":"right"),v=f(e-1,g?"right":"left"),y=null==n&&0==t,b=null==i&&e==p,w=0==h,x=!_||h==_.length-1;if(v.top-m.top<=3){var k=(u?b:y)&&x,C=(u?y:b)&&w?a:(g?m:v).left,T=k?l:(g?v:m).right;c(C,m.top,T-C,m.bottom)}else{var S,O,E,L;g?(S=u&&y&&w?a:m.left,O=u?l:d(t,r,"before"),E=u?a:d(e,r,"after"),L=u&&b&&x?l:v.right):(S=u?d(t,r,"before"):a,O=!u&&y&&w?l:m.right,E=!u&&b&&x?a:v.left,L=u?d(e,r,"after"):l),c(S,m.top,O-S,m.bottom),m.bottom<v.top&&c(a,m.bottom,null,v.top),c(E,v.top,L-E,v.bottom)}(!o||bi(m,o)<0)&&(o=m),bi(v,o)<0&&(o=v),(!s||bi(m,s)<0)&&(s=m),bi(v,s)<0&&(s=v)})),{start:o,end:s}}var p=e.from(),f=e.to();if(p.line==f.line)h(p.line,p.ch,f.ch);else{var d=Gt(r,p.line),_=Gt(r,f.line),g=je(d)==je(_),m=h(p.line,p.ch,g?d.text.length+1:null).end,v=h(f.line,g?0:null,f.ch).start;g&&(m.top<v.top-2?(c(m.right,m.top,null,m.bottom),c(a,v.top,v.left,v.bottom)):c(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&c(a,m.bottom,null,v.top)}n.appendChild(o)}function xi(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function ki(t){t.state.focused||(t.display.input.focus(),Ti(t))}function Ci(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,Si(t))}),100)}function Ti(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(_t(t,"focus",t,e),t.state.focused=!0,R(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),l&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),xi(t))}function Si(t,e){t.state.delayingBlurEvent||(t.state.focused&&(_t(t,"blur",t,e),t.state.focused=!1,S(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function Oi(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var r=e.view[i],o=t.options.lineWrapping,l=void 0,u=0;if(!r.hidden){if(s&&a<8){var c=r.node.offsetTop+r.node.offsetHeight;l=c-n,n=c}else{var h=r.node.getBoundingClientRect();l=h.bottom-h.top,!o&&r.text.firstChild&&(u=r.text.firstChild.getBoundingClientRect().right-h.left-1)}var p=r.line.height-l;if((p>.005||p<-.005)&&(qt(r.line,l),Ei(r.line),r.rest))for(var f=0;f<r.rest.length;f++)Ei(r.rest[f]);if(u>t.display.sizerWidth){var d=Math.ceil(u/oi(t.display));d>t.display.maxLineLength&&(t.display.maxLineLength=d,t.display.maxLine=r.line,t.display.maxLineChanged=!0)}}}}function Ei(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Li(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-Cn(t));var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=Zt(e,i),s=Zt(e,r);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=Zt(e,Ke(Gt(e,a))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=s&&(o=Zt(e,Ke(Gt(e,l))-t.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function Mi(t,e){var n=t.display,i=ri(t.display);e.top<0&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=Ln(t),s={};e.bottom-e.top>o&&(e.bottom=e.top+o);var a=t.doc.height+Tn(n),l=e.top<i,u=e.bottom>a-i;if(e.top<r)s.scrollTop=l?0:e.top;else if(e.bottom>r+o){var c=Math.min(e.top,(u?a:e.bottom)-o);c!=r&&(s.scrollTop=c)}var h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,p=En(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),f=e.right-e.left>p;return f&&(e.right=e.left+p),e.left<10?s.scrollLeft=0:e.left<h?s.scrollLeft=Math.max(0,e.left-(f?0:10)):e.right>p+h-3&&(s.scrollLeft=e.right+(f?0:10)-p),s}function Ai(t,e){null!=e&&(Pi(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Ni(t){Pi(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Ri(t,e,n){null==e&&null==n||Pi(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Pi(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Di(t,$n(t,e.from),$n(t,e.to),e.margin))}function Di(t,e,n,i){var r=Mi(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i});Ri(t,r.scrollLeft,r.scrollTop)}function Ii(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||ur(t,{top:e}),Wi(t,e,!0),n&&ur(t),rr(t,100))}function Wi(t,e,n){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Bi(t,e,n,i){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,pr(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function ji(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+Tn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+On(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Hi=function(t,e,n){this.cm=n;var i=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,t(i),t(r),pt(i,"scroll",(function(){i.clientHeight&&e(i.scrollTop,"vertical")})),pt(r,"scroll",(function(){r.clientWidth&&e(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Hi.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var r=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},Hi.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Hi.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Hi.prototype.zeroWidthHack=function(){var t=v&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new j,this.disableVert=new j},Hi.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,(function i(){var r=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,i)}))},Hi.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var zi=function(){};function Fi(t,e){e||(e=ji(t));var n=t.display.barWidth,i=t.display.barHeight;Ui(t,e);for(var r=0;r<4&&n!=t.display.barWidth||i!=t.display.barHeight;r++)n!=t.display.barWidth&&t.options.lineWrapping&&Oi(t),Ui(t,ji(t)),n=t.display.barWidth,i=t.display.barHeight}function Ui(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}zi.prototype.update=function(){return{bottom:0,right:0}},zi.prototype.setScrollLeft=function(){},zi.prototype.setScrollTop=function(){},zi.prototype.clear=function(){};var Ki={native:Hi,null:zi};function Vi(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&S(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Ki[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),pt(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?Bi(t,e):Ii(t,e)}),t),t.display.scrollbars.addClass&&R(t.display.wrapper,t.display.scrollbars.addClass)}var Xi=0;function Gi(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Xi},e=t.curOp,an?an.ops.push(e):e.ownsGroup=an={ops:[e],delayedCallbacks:[]}}function Yi(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<e.length)}(n)}finally{an=null,e(n)}}(e,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)$i(e[n]);for(var i=0;i<e.length;i++)qi(e[i]);for(var r=0;r<e.length;r++)Qi(e[r]);for(var o=0;o<e.length;o++)Zi(e[o]);for(var s=0;s<e.length;s++)Ji(e[s])}(t)}))}function $i(t){var e=t.cm,n=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=On(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=On(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&Xe(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new sr(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function qi(t){t.updatedDisplay=t.mustUpdate&&ar(t.cm,t.update)}function Qi(t){var e=t.cm,n=e.display;t.updatedDisplay&&Oi(e),t.barMeasure=ji(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=An(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+On(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-En(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Zi(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Bi(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==N();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Fi(e,t.barMeasure),t.updatedDisplay&&hr(e,t.barMeasure),t.selectionChanged&&xi(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&ki(t.cm)}function Ji(t){var e=t.cm,n=e.display,i=e.doc;t.updatedDisplay&&lr(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Wi(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Bi(e,t.scrollLeft,!0,!0),t.scrollToPos&&function(t,e){if(!gt(t,"scrollCursorIntoView")){var n=t.display,i=n.sizer.getBoundingClientRect(),r=null;if(e.top+i.top<0?r=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!d){var o=L("div","​",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-Cn(t.display))+"px;\n                         height: "+(e.bottom-e.top+On(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(r),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,n,i){var r;null==i&&(i=0),t.options.lineWrapping||e!=n||(n="before"==(e=e.ch?ee(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?ee(e.line,e.ch+1,"before"):e);for(var o=0;o<5;o++){var s=!1,a=Yn(t,e),l=n&&n!=e?Yn(t,n):a,u=Mi(t,r={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i}),c=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=u.scrollTop&&(Ii(t,u.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(s=!0)),null!=u.scrollLeft&&(Bi(t,u.scrollLeft),Math.abs(t.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return r}(e,le(i,t.scrollToPos.from),le(i,t.scrollToPos.to),t.scrollToPos.margin));var r=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(r)for(var s=0;s<r.length;++s)r[s].lines.length||_t(r[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&_t(o[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&_t(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function tr(t,e){if(t.curOp)return e();Gi(t);try{return e()}finally{Yi(t)}}function er(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Gi(t);try{return e.apply(t,arguments)}finally{Yi(t)}}}function nr(t){return function(){if(this.curOp)return t.apply(this,arguments);Gi(this);try{return t.apply(this,arguments)}finally{Yi(this)}}}function ir(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Gi(e);try{return t.apply(this,arguments)}finally{Yi(e)}}}function rr(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,I(or,t))}function or(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=de(t,e.highlightFrontier),r=[];e.iter(i.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(o){if(i.line>=t.display.viewFrom){var s=o.styles,a=o.text.length>t.options.maxHighlightLength?Ut(e.mode,i.state):null,l=pe(t,o,i,!0);a&&(i.state=a),o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var h=!s||s.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),p=0;!h&&p<s.length;++p)h=s[p]!=o.styles[p];h&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=t.options.maxHighlightLength&&_e(t,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return rr(t,t.options.workDelay),!0})),e.highlightFrontier=i.line,e.modeFrontier=Math.max(e.modeFrontier,i.line),r.length&&tr(t,(function(){for(var e=0;e<r.length;e++)fi(t,r[e],"text")}))}}var sr=function(t,e,n){var i=t.display;this.viewport=e,this.visible=Li(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=En(t),this.force=n,this.dims=si(t),this.events=[]};function ar(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return di(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gi(t))return!1;fr(t)&&(di(t),e.dims=si(t));var r=i.first+i.size,o=Math.max(e.visible.from-t.options.viewportMargin,i.first),s=Math.min(r,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),ke&&(o=He(t.doc,o),s=ze(t.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;!function(t,e,n){var i=t.display;0==i.view.length||e>=i.viewTo||n<=i.viewFrom?(i.view=sn(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=sn(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(hi(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(sn(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,hi(t,n)))),i.viewTo=n}(t,o,s),n.viewOffset=Ke(Gt(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var u=gi(t);if(!a&&0==u&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(t){if(t.hasFocus())return null;var e=N();if(!e||!A(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&A(t.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(t);return u>4&&(n.lineDiv.style.display="none"),function(t,e,n){var i=t.display,r=t.options.lineNumbers,o=i.lineDiv,s=o.firstChild;function a(e){var n=e.nextSibling;return l&&v&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var u=i.view,c=i.viewFrom,h=0;h<u.length;h++){var p=u[h];if(p.hidden);else if(p.node&&p.node.parentNode==o){for(;s!=p.node;)s=a(s);var f=r&&null!=e&&e<=c&&p.lineNumber;p.changes&&(H(p.changes,"gutter")>-1&&(f=!1),hn(t,p,c,n)),f&&(O(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(te(t.options,c)))),s=p.node.nextSibling}else{var d=vn(t,p,c,n);o.insertBefore(d,s)}c+=p.size}for(;s;)s=a(s)}(t,n.updateLineNumbers,e.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=N()&&(t.activeElt.focus(),t.anchorNode&&A(document.body,t.anchorNode)&&A(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(c),O(n.cursorDiv),O(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,rr(t,400)),n.updateLineNumbers=null,!0}function lr(t,e){for(var n=e.viewport,i=!0;(i&&t.options.lineWrapping&&e.oldDisplayWidth!=En(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Tn(t.display)-Ln(t),n.top)}),e.visible=Li(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&ar(t,e);i=!1){Oi(t);var r=ji(t);mi(t),Fi(t,r),hr(t,r),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ur(t,e){var n=new sr(t,e);if(ar(t,n)){Oi(t),lr(t,n);var i=ji(t);mi(t),Fi(t,i),hr(t,i),n.finish()}}function cr(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px"}function hr(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+On(t)+"px"}function pr(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=ai(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function fr(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=te(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(L("div",[L("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",cr(t.display),!0}return!1}function dr(t,e){for(var n=[],i=!1,r=0;r<t.length;r++){var o=t[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;i=!0}n.push({className:o,style:s})}return e&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function _r(t){var e=t.gutters,n=t.gutterSpecs;O(e),t.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,s=r.style,a=e.appendChild(L("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(t.lineGutter=a,a.style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",cr(t)}function gr(t){_r(t.display),pi(t),pr(t)}function mr(t,e,i,r){var o=this;this.input=i,o.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=M("div",null,"CodeMirror-code"),o.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=L("div",null,"CodeMirror-cursors"),o.measure=L("div",null,"CodeMirror-measure"),o.lineMeasure=L("div",null,"CodeMirror-measure"),o.lineSpace=M("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=M("div",[o.lineSpace],"CodeMirror-lines");o.mover=L("div",[u],null,"position: relative"),o.sizer=L("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=L("div",null,null,"position: absolute; height: "+z+"px; width: 1px;"),o.gutters=L("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=L("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=L("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&m||(o.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(o.wrapper):t(o.wrapper)),o.viewFrom=o.viewTo=e.first,o.reportedViewFrom=o.reportedViewTo=e.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=dr(r.gutters,r.lineNumbers),_r(o),i.init(o)}sr.prototype.signal=function(t,e){vt(t,e)&&this.events.push(arguments)},sr.prototype.finish=function(){for(var t=0;t<this.events.length;t++)_t.apply(null,this.events[t])};var vr=0,yr=null;function br(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function wr(t){var e=br(t);return e.x*=yr,e.y*=yr,e}function xr(t,e){var i=br(e),r=i.x,o=i.y,s=t.display,a=s.scroller,u=a.scrollWidth>a.clientWidth,c=a.scrollHeight>a.clientHeight;if(r&&u||o&&c){if(o&&v&&l)t:for(var p=e.target,f=s.view;p!=a;p=p.parentNode)for(var d=0;d<f.length;d++)if(f[d].node==p){t.display.currentWheelTarget=p;break t}if(r&&!n&&!h&&null!=yr)return o&&c&&Ii(t,Math.max(0,a.scrollTop+o*yr)),Bi(t,Math.max(0,a.scrollLeft+r*yr)),(!o||o&&c)&&bt(e),void(s.wheelStartX=null);if(o&&null!=yr){var _=o*yr,g=t.doc.scrollTop,m=g+s.wrapper.clientHeight;_<0?g=Math.max(0,g+_-50):m=Math.min(t.doc.height,m+_+50),ur(t,{top:g,bottom:m})}vr<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=r,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var t=a.scrollLeft-s.wheelStartX,e=a.scrollTop-s.wheelStartY,n=e&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(yr=(yr*vr+n)/(vr+1),++vr)}}),200)):(s.wheelDX+=r,s.wheelDY+=o))}}s?yr=-.53:n?yr=15:c?yr=-.7:p&&(yr=-1/3);var kr=function(t,e){this.ranges=t,this.primIndex=e};kr.prototype.primary=function(){return this.ranges[this.primIndex]},kr.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(!ie(n.anchor,i.anchor)||!ie(n.head,i.head))return!1}return!0},kr.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new Cr(re(this.ranges[e].anchor),re(this.ranges[e].head));return new kr(t,this.primIndex)},kr.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},kr.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(ne(e,i.from())>=0&&ne(t,i.to())<=0)return n}return-1};var Cr=function(t,e){this.anchor=t,this.head=e};function Tr(t,e,n){var i=t&&t.options.selectionsMayTouch,r=e[n];e.sort((function(t,e){return ne(t.from(),e.from())})),n=H(e,r);for(var o=1;o<e.length;o++){var s=e[o],a=e[o-1],l=ne(a.to(),s.from());if(i&&!s.empty()?l>0:l>=0){var u=se(a.from(),s.from()),c=oe(a.to(),s.to()),h=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,e.splice(--o,2,new Cr(h?c:u,h?u:c))}}return new kr(e,n)}function Sr(t,e){return new kr([new Cr(t,e||t)],0)}function Or(t){return t.text?ee(t.from.line+t.text.length-1,$(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Er(t,e){if(ne(t,e.from)<0)return t;if(ne(t,e.to)<=0)return Or(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=Or(e).ch-e.to.ch),ee(n,i)}function Lr(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new Cr(Er(r.anchor,e),Er(r.head,e)))}return Tr(t.cm,n,t.sel.primIndex)}function Mr(t,e,n){return t.line==e.line?ee(n.line,t.ch-e.ch+n.ch):ee(n.line+(t.line-e.line),t.ch)}function Ar(t){t.doc.mode=Ht(t.options,t.doc.modeOption),Nr(t)}function Nr(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,rr(t,100),t.state.modeGen++,t.curOp&&pi(t)}function Rr(t,e){return 0==e.from.ch&&0==e.to.ch&&""==$(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Pr(t,e,n,i){function r(t){return n?n[t]:null}function o(t,n,r){!function(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Le(t),Me(t,n);var r=i?i(t):1;r!=t.height&&qt(t,r)}(t,n,r,i),un(t,"change",t,e)}function s(t,e){for(var n=[],o=t;o<e;++o)n.push(new Ge(u[o],r(o),i));return n}var a=e.from,l=e.to,u=e.text,c=Gt(t,a.line),h=Gt(t,l.line),p=$(u),f=r(u.length-1),d=l.line-a.line;if(e.full)t.insert(0,s(0,u.length)),t.remove(u.length,t.size-u.length);else if(Rr(t,e)){var _=s(0,u.length-1);o(h,h.text,f),d&&t.remove(a.line,d),_.length&&t.insert(a.line,_)}else if(c==h)if(1==u.length)o(c,c.text.slice(0,a.ch)+p+c.text.slice(l.ch),f);else{var g=s(1,u.length-1);g.push(new Ge(p+c.text.slice(l.ch),f,i)),o(c,c.text.slice(0,a.ch)+u[0],r(0)),t.insert(a.line+1,g)}else if(1==u.length)o(c,c.text.slice(0,a.ch)+u[0]+h.text.slice(l.ch),r(0)),t.remove(a.line+1,d);else{o(c,c.text.slice(0,a.ch)+u[0],r(0)),o(h,p+h.text.slice(l.ch),f);var m=s(1,u.length-1);d>1&&t.remove(a.line+1,d-1),t.insert(a.line+1,m)}un(t,"change",t,e)}function Dr(t,e,n){!function t(i,r,o){if(i.linked)for(var s=0;s<i.linked.length;++s){var a=i.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;n&&!l||(e(a.doc,l),t(a.doc,i,l))}}}(t,null,!0)}function Ir(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,ui(t),Ar(t),Wr(t),t.options.lineWrapping||Xe(t),t.options.mode=e.modeOption,pi(t)}function Wr(t){("rtl"==t.doc.direction?R:S)(t.display.lineDiv,"CodeMirror-rtl")}function Br(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function jr(t,e){var n={from:re(e.from),to:Or(e),text:Yt(t,e.from,e.to)};return Kr(t,n,e.from.line,e.to.line+1),Dr(t,(function(t){return Kr(t,n,e.from.line,e.to.line+1)}),!0),n}function Hr(t){for(;t.length&&$(t).ranges;)t.pop()}function zr(t,e,n,i){var r=t.history;r.undone.length=0;var o,s,a=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>a-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(Hr(t.done),$(t.done)):t.done.length&&!$(t.done).ranges?$(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),$(t.done)):void 0}(r,r.lastOp==i)))s=$(o.changes),0==ne(e.from,e.to)&&0==ne(e.from,s.to)?s.to=Or(e):o.changes.push(jr(t,e));else{var l=$(r.done);for(l&&l.ranges||Ur(t.sel,r.done),o={changes:[jr(t,e)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,s||_t(t,"historyAdded")}function Fr(t,e,n,i){var r=t.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(t,e,n,i){var r=e.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,$(r.done),e))?r.done[r.done.length-1]=e:Ur(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Hr(r.undone)}function Ur(t,e){var n=$(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Kr(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),(function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o}))}function Vr(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Xr(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],r=0;r<e.text.length;++r)i.push(Vr(n[r]));return i}(t,e),i=Oe(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue t;o.push(l)}else s&&(n[r]=s)}return n}function Gr(t,e,n){for(var i=[],r=0;r<t.length;++r){var o=t[r];if(o.ranges)i.push(n?kr.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var u=s[l],c=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),e)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&H(e,Number(c[1]))>-1&&($(a)[h]=u[h],delete u[h])}}}return i}function Yr(t,e,n,i){if(i){var r=t.anchor;if(n){var o=ne(e,r)<0;o!=ne(n,r)<0?(r=e,e=n):o!=ne(e,n)<0&&(e=n)}return new Cr(r,e)}return new Cr(n||e,e)}function $r(t,e,n,i,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),to(t,new kr([Yr(t.sel.primary(),e,n,r)],0),i)}function qr(t,e,n){for(var i=[],r=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)i[o]=Yr(t.sel.ranges[o],e[o],null,r);to(t,Tr(t.cm,i,t.sel.primIndex),n)}function Qr(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,to(t,Tr(t.cm,r,t.sel.primIndex),i)}function Zr(t,e,n,i){to(t,Sr(e,n),i)}function Jr(t,e,n){var i=t.history.done,r=$(i);r&&r.ranges?(i[i.length-1]=e,eo(t,e,n)):to(t,e,n)}function to(t,e,n){eo(t,e,n),Fr(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function eo(t,e,n){(vt(t,"beforeSelectionChange")||t.cm&&vt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var i={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new Cr(le(t,e[n].anchor),le(t,e[n].head))},origin:n&&n.origin};return _t(t,"beforeSelectionChange",t,i),t.cm&&_t(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?Tr(t.cm,i.ranges,i.ranges.length-1):e}(t,e,n));var i=n&&n.bias||(ne(e.primary().head,t.sel.primary().head)<0?-1:1);no(t,ro(t,e,i,!0)),n&&!1===n.scroll||!t.cm||Ni(t.cm)}function no(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,mt(t.cm)),un(t,"cursorActivity",t))}function io(t){no(t,ro(t,t.sel,null,!1))}function ro(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var s=e.ranges[o],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],l=so(t,s.anchor,a&&a.anchor,n,i),u=so(t,s.head,a&&a.head,n,i);(r||l!=s.anchor||u!=s.head)&&(r||(r=e.ranges.slice(0,o)),r[o]=new Cr(l,u))}return r?Tr(t.cm,r,e.primIndex):e}function oo(t,e,n,i,r){var o=Gt(t,e.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,c="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(u?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(c?a.to>=e.ch:a.to>e.ch))){if(r&&(_t(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var h=l.find(i<0?1:-1),p=void 0;if((i<0?c:u)&&(h=ao(t,h,-i,h&&h.line==e.line?o:null)),h&&h.line==e.line&&(p=ne(h,n))&&(i<0?p<0:p>0))return oo(t,h,e,i,r)}var f=l.find(i<0?-1:1);return(i<0?u:c)&&(f=ao(t,f,i,f.line==e.line?o:null)),f?oo(t,f,e,i,r):null}}return e}function so(t,e,n,i,r){var o=i||1,s=oo(t,e,n,o,r)||!r&&oo(t,e,n,o,!0)||oo(t,e,n,-o,r)||!r&&oo(t,e,n,-o,!0);return s||(t.cantEdit=!0,ee(t.first,0))}function ao(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?le(t,ee(e.line-1)):null:n>0&&e.ch==(i||Gt(t,e.line)).text.length?e.line<t.first+t.size-1?ee(e.line+1,0):null:new ee(e.line,e.ch+n)}function lo(t){t.setSelection(ee(t.firstLine(),0),ee(t.lastLine()),U)}function uo(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(e,n,r,o){e&&(i.from=le(t,e)),n&&(i.to=le(t,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),_t(t,"beforeChange",t,i),t.cm&&_t(t.cm,"beforeChange",t.cm,i),i.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function co(t,e,n){if(t.cm){if(!t.cm.curOp)return er(t.cm,co)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(vt(t,"beforeChange")||t.cm&&vt(t.cm,"beforeChange"))||(e=uo(t,e,!0))){var i=xe&&!n&&function(t,e,n){var i=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=H(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),l=0;l<r.length;++l){var u=r[l];if(!(ne(u.to,a.from)<0||ne(u.from,a.to)>0)){var c=[l,1],h=ne(u.from,a.from),p=ne(u.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&c.push({from:u.from,to:a.from}),(p>0||!s.inclusiveRight&&!p)&&c.push({from:a.to,to:u.to}),r.splice.apply(r,c),l+=c.length-3}}return r}(t,e.from,e.to);if(i)for(var r=i.length-1;r>=0;--r)ho(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text,origin:e.origin});else ho(t,e)}}function ho(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ne(e.from,e.to)){var n=Lr(t,e);zr(t,e,n,t.cm?t.cm.curOp.id:NaN),_o(t,e,n,Oe(t,e));var i=[];Dr(t,(function(t,n){n||-1!=H(i,t.history)||(yo(t.history,e),i.push(t.history)),_o(t,e,null,Oe(t,e))}))}}function po(t,e,n){var i=t.cm&&t.cm.state.suppressEdits;if(!i||n){for(var r,o=t.history,s=t.sel,a="undo"==e?o.done:o.undone,l="undo"==e?o.undone:o.done,u=0;u<a.length&&(r=a[u],n?!r.ranges||r.equals(t.sel):r.ranges);u++);if(u!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=a.pop()).ranges){if(i)return void a.push(r);break}if(Ur(r,l),n&&!r.equals(t.sel))return void to(t,r,{clearRedo:!1});s=r}var c=[];Ur(s,l),l.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var h=vt(t,"beforeChange")||t.cm&&vt(t.cm,"beforeChange"),p=function(n){var i=r.changes[n];if(i.origin=e,h&&!uo(t,i,!1))return a.length=0,{};c.push(jr(t,i));var o=n?Lr(t,i):$(a);_o(t,i,o,Xr(t,i)),!n&&t.cm&&t.cm.scrollIntoView({from:i.from,to:Or(i)});var s=[];Dr(t,(function(t,e){e||-1!=H(s,t.history)||(yo(t.history,i),s.push(t.history)),_o(t,i,null,Xr(t,i))}))},f=r.changes.length-1;f>=0;--f){var d=p(f);if(d)return d.v}}}}function fo(t,e){if(0!=e&&(t.first+=e,t.sel=new kr(q(t.sel.ranges,(function(t){return new Cr(ee(t.anchor.line+e,t.anchor.ch),ee(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){pi(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)fi(t.cm,i,"gutter")}}function _o(t,e,n,i){if(t.cm&&!t.cm.curOp)return er(t.cm,_o)(t,e,n,i);if(e.to.line<t.first)fo(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);fo(t,r),e={from:ee(t.first,0),to:ee(e.to.line+r,e.to.ch),text:[$(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:ee(o,Gt(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Yt(t,e.from,e.to),n||(n=Lr(t,e)),t.cm?function(t,e,n){var i=t.doc,r=t.display,o=e.from,s=e.to,a=!1,l=o.line;t.options.lineWrapping||(l=Qt(je(Gt(i,o.line))),i.iter(l,s.line+1,(function(t){if(t==r.maxLine)return a=!0,!0}))),i.sel.contains(e.from,e.to)>-1&&mt(t),Pr(i,e,n,li(t)),t.options.lineWrapping||(i.iter(l,o.line+e.text.length,(function(t){var e=Ve(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,a=!1)})),a&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;i>n;i--){var r=Gt(t,i).stateAfter;if(r&&(!(r instanceof ce)||i+r.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}(i,o.line),rr(t,400);var u=e.text.length-(s.line-o.line)-1;e.full?pi(t):o.line!=s.line||1!=e.text.length||Rr(t.doc,e)?pi(t,o.line,s.line+1,u):fi(t,o.line,"text");var c=vt(t,"changes"),h=vt(t,"change");if(h||c){var p={from:o,to:s,text:e.text,removed:e.removed,origin:e.origin};h&&un(t,"change",t,p),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(p)}t.display.selForContextMenu=null}(t.cm,e,i):Pr(t,e,i),eo(t,n,U),t.cantEdit&&so(t,ee(t.firstLine(),0))&&(t.cantEdit=!1)}}function go(t,e,n,i,r){var o;i||(i=n),ne(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof e&&(e=t.splitLines(e)),co(t,{from:n,to:i,text:e,origin:r})}function mo(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function vo(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],s=!0;if(o.ranges){o.copied||((o=t[r]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)mo(o.ranges[a].anchor,e,n,i),mo(o.ranges[a].head,e,n,i)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=ee(u.from.line+i,u.from.ch),u.to=ee(u.to.line+i,u.to.ch);else if(e<=u.to.line){s=!1;break}}s||(t.splice(0,r+1),r=0)}}}function yo(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;vo(t.done,n,i,r),vo(t.undone,n,i,r)}function bo(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=Gt(t,ae(t,e)):r=Qt(e),null==r?null:(i(o,r)&&t.cm&&fi(t.cm,r,n),o)}function wo(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function xo(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}Cr.prototype.from=function(){return se(this.anchor,this.head)},Cr.prototype.to=function(){return oe(this.anchor,this.head)},Cr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},wo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var r=this.lines[n];this.height-=r.height,Ye(r),un(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},xo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(t<r){var o=Math.min(e,r-t),s=i.height;if(i.removeInner(t,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof wo))){var a=[];this.collapse(a),this.children=[new wo(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<=o){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,a=s;a<r.lines.length;){var l=new wo(r.lines.slice(a,a+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new xo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=H(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var i=new xo(t.children);i.parent=t,t.children=[i,e],t=i}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<o){var s=Math.min(e,o-t);if(r.iterN(t,s,n))return!0;if(0==(e-=s))break;t=0}else t-=o}}};var ko=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=t,this.node=e};function Co(t,e,n){Ke(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Ai(t,n)}ko.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,i=Qt(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=xn(this);qt(n,Math.max(0,n.height-o)),t&&(tr(t,(function(){Co(t,n,-o),fi(t,i,"widget")})),un(t,"lineWidgetCleared",t,this,i))}},ko.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=xn(this)-e;r&&(Fe(this.doc,i)||qt(i,i.height+r),n&&tr(n,(function(){n.curOp.forceUpdate=!0,Co(n,i,r),un(n,"lineWidgetChanged",n,t,Qt(i))})))},yt(ko);var To=0,So=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++To};function Oo(t,e,n,i,r){if(i&&i.shared)return function(t,e,n,i,r){(i=W(i)).shared=!1;var o=[Oo(t,e,n,i,r)],s=o[0],a=i.widgetNode;return Dr(t,(function(t){a&&(i.widgetNode=a.cloneNode(!0)),o.push(Oo(t,le(t,e),le(t,n),i,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=$(o)})),new Eo(o,s)}(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return er(t.cm,Oo)(t,e,n,i,r);var o=new So(t,r),s=ne(e,n);if(i&&W(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=M("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Be(t,e.line,e,n,o)||e.line!=n.line&&Be(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");ke=!0}o.addToHistory&&zr(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var a,l=e.line,u=t.cm;if(t.iter(l,n.line+1,(function(t){u&&o.collapsed&&!u.options.lineWrapping&&je(t)==u.display.maxLine&&(a=!0),o.collapsed&&l!=e.line&&qt(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new Ce(o,l==e.line?e.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&t.iter(e.line,n.line+1,(function(e){Fe(t,e)&&qt(e,0)})),o.clearOnEnter&&pt(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(xe=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++To,o.atomic=!0),u){if(a&&(u.curOp.updateMaxLine=!0),o.collapsed)pi(u,e.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=e.line;c<=n.line;c++)fi(u,c,"text");o.atomic&&io(u.doc),un(u,"markerAdded",u,o)}return o}So.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Gi(t),vt(this,"clear")){var n=this.find();n&&un(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Te(s.markedSpans,this);t&&!this.collapsed?fi(t,Qt(s),"text"):t&&(null!=a.to&&(r=Qt(s)),null!=a.from&&(i=Qt(s))),s.markedSpans=Se(s.markedSpans,a),null==a.from&&this.collapsed&&!Fe(this.doc,s)&&t&&qt(s,ri(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=je(this.lines[l]),c=Ve(u);c>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&pi(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&io(t.doc)),t&&un(t,"markerCleared",t,this,i,r),e&&Yi(t),this.parent&&this.parent.clear()}},So.prototype.find=function(t,e){var n,i;null==t&&"bookmark"==this.type&&(t=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],s=Te(o.markedSpans,this);if(null!=s.from&&(n=ee(e?o:Qt(o),s.from),-1==t))return n;if(null!=s.to&&(i=ee(e?o:Qt(o),s.to),1==t))return i}return n&&{from:n,to:i}},So.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,i=this.doc.cm;e&&i&&tr(i,(function(){var r=e.line,o=Qt(e.line),s=Nn(i,o);if(s&&(jn(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Fe(n.doc,r)&&null!=n.height){var a=n.height;n.height=null;var l=xn(n)-a;l&&qt(r,r.height+l)}un(i,"markerChanged",i,t)}))},So.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=H(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},So.prototype.detachLine=function(t){if(this.lines.splice(H(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},yt(So);var Eo=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function Lo(t){return t.findMarks(ee(t.first,0),t.clipPos(ee(t.lastLine())),(function(t){return t.parent}))}function Mo(t){for(var e=function(e){var n=t[e],i=[n.primary.doc];Dr(n.primary.doc,(function(t){return i.push(t)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==H(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<t.length;n++)e(n)}Eo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();un(this,"clear")}},Eo.prototype.find=function(t,e){return this.primary.find(t,e)},yt(Eo);var Ao=0,No=function(t,e,n,i,r){if(!(this instanceof No))return new No(t,e,n,i,r);null==n&&(n=0),xo.call(this,[new wo([new Ge("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ee(n,0);this.sel=Sr(o),this.history=new Br(null),this.id=++Ao,this.modeOption=e,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Pr(this,{from:o,to:o,text:t}),to(this,Sr(o),U)};No.prototype=Z(xo.prototype,{constructor:No,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=$t(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:ir((function(t){var e=ee(this.first,0),n=this.first+this.size-1;co(this,{from:e,to:ee(n,Gt(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Ri(this.cm,0,0),to(this,Sr(e),U)})),replaceRange:function(t,e,n,i){go(this,t,e=le(this,e),n=n?le(this,n):e,i)},getRange:function(t,e,n){var i=Yt(this,le(this,t),le(this,e));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Jt(this,t))return Gt(this,t)},getLineNumber:function(t){return Qt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Gt(this,t)),je(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return le(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ir((function(t,e,n){Zr(this,le(this,"number"==typeof t?ee(t,e||0):t),null,n)})),setSelection:ir((function(t,e,n){Zr(this,le(this,t),le(this,e||t),n)})),extendSelection:ir((function(t,e,n){$r(this,le(this,t),e&&le(this,e),n)})),extendSelections:ir((function(t,e){qr(this,ue(this,t),e)})),extendSelectionsBy:ir((function(t,e){qr(this,ue(this,q(this.sel.ranges,t)),e)})),setSelections:ir((function(t,e,n){if(t.length){for(var i=[],r=0;r<t.length;r++)i[r]=new Cr(le(this,t[r].anchor),le(this,t[r].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),to(this,Tr(this.cm,i,e),n)}})),addSelection:ir((function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new Cr(le(this,t),le(this,e||t))),to(this,Tr(this.cm,i,i.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var r=Yt(this,n[i].from(),n[i].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Yt(this,n[i].from(),n[i].to());!1!==t&&(r=r.join(t||this.lineSeparator())),e[i]=r}return e},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:ir((function(t,e,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(t[o]),origin:n}}for(var a=e&&"end"!=e&&function(t,e,n){for(var i=[],r=ee(t.first,0),o=r,s=0;s<e.length;s++){var a=e[s],l=Mr(a.from,r,o),u=Mr(Or(a),r,o);if(r=a.to,o=u,"around"==n){var c=t.sel.ranges[s],h=ne(c.head,c.anchor)<0;i[s]=new Cr(h?u:l,h?l:u)}else i[s]=new Cr(l,l)}return new kr(i,t.sel.primIndex)}(this,i,e),l=i.length-1;l>=0;l--)co(this,i[l]);a?Jr(this,a):this.cm&&Ni(this.cm)})),undo:ir((function(){po(this,"undo")})),redo:ir((function(){po(this,"redo")})),undoSelection:ir((function(){po(this,"undo",!0)})),redoSelection:ir((function(){po(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Br(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Gr(this.history.done),undone:Gr(this.history.undone)}},setHistory:function(t){var e=this.history=new Br(this.history.maxGeneration);e.done=Gr(t.done.slice(0),null,!0),e.undone=Gr(t.undone.slice(0),null,!0)},setGutterMarker:ir((function(t,e,n){return bo(this,t,"gutter",(function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&nt(i)&&(t.gutterMarkers=null),!0}))})),clearGutter:ir((function(t){var e=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&bo(e,n,"gutter",(function(){return n.gutterMarkers[t]=null,nt(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(t){var e;if("number"==typeof t){if(!Jt(this,t))return null;if(e=t,!(t=Gt(this,t)))return null}else if(null==(e=Qt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:ir((function(t,e,n){return bo(this,t,"gutter"==e?"gutter":"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[i]){if(C(n).test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0}))})),removeLineClass:ir((function(t,e,n){return bo(this,t,"gutter"==e?"gutter":"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.match(C(n));if(!o)return!1;var s=o.index+o[0].length;t[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0}))})),addLineWidget:ir((function(t,e,n){return function(t,e,n,i){var r=new ko(t,n,i),o=t.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),bo(t,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,o&&!Fe(t,e)){var i=Ke(e)<t.scrollTop;qt(e,e.height+xn(r)),i&&Ai(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&un(o,"lineWidgetAdded",o,r,"number"==typeof e?e:Qt(e)),r}(this,t,e,n)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Oo(this,le(this,t),le(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return Oo(this,t=le(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=Gt(this,(t=le(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,n){t=le(this,t),e=le(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&r==t.line&&t.ch>=l.to||null==l.from&&r!=t.line||null!=l.from&&r==e.line&&l.from>=e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)})),t},posFromIndex:function(t){var e,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>t)return e=t,!0;t-=o,++n})),le(this,ee(n,e))},indexFromPos:function(t){var e=(t=le(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+n})),e},copy:function(t){var e=new No($t(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new No($t(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from),s=t.clipPos(r.to);if(ne(o,s)){var a=Oo(t,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}(i,Lo(this)),i},unlinkDoc:function(t){if(t instanceof Es&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Mo(Lo(this));break}if(t.history==this.history){var n=[t.id];Dr(t,(function(t){return n.push(t.id)}),!0),t.history=new Br(null),t.history.done=Gr(this.history.done,n),t.history.undone=Gr(this.history.undone,n)}},iterLinkedDocs:function(t){Dr(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Nt(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ir((function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&tr(e=this.cm,(function(){Wr(e),pi(e)})))}))}),No.prototype.eachLine=No.prototype.iter;var Ro=0;function Po(t){var e=this;if(Do(e),!gt(e,t)&&!kn(e.display,t)){bt(t),s&&(Ro=+new Date);var n=ci(e,t,!0),i=t.dataTransfer.files;if(n&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,l=function(t,i){if(!e.options.allowDropFileTypes||-1!=H(e.options.allowDropFileTypes,t.type)){var s=new FileReader;s.onload=er(e,(function(){var t=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),o[i]=t,++a==r){var l={from:n=le(e.doc,n),to:n,text:e.doc.splitLines(o.join(e.doc.lineSeparator())),origin:"paste"};co(e.doc,l),Jr(e.doc,Sr(n,Or(l)))}})),s.readAsText(t)}},u=0;u<r;++u)l(i[u],u);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout((function(){return e.display.input.focus()}),20);try{var c=t.dataTransfer.getData("Text");if(c){var h;if(e.state.draggingText&&!e.state.draggingText.copy&&(h=e.listSelections()),eo(e.doc,Sr(n,n)),h)for(var p=0;p<h.length;++p)go(e.doc,"",h[p].anchor,h[p].head,"drag");e.replaceSelection(c,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Do(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Io(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<e.length;i++){var r=e[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var e=0;e<n.length;e++)t(n[e])}))}}var Wo=!1;function Bo(){var t;Wo||(pt(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,Io(jo)}),100))})),pt(window,"blur",(function(){return Io(Si)})),Wo=!0)}function jo(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Ho={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},zo=0;zo<10;zo++)Ho[zo+48]=Ho[zo+96]=String(zo);for(var Fo=65;Fo<=90;Fo++)Ho[Fo]=String.fromCharCode(Fo);for(var Uo=1;Uo<=12;Uo++)Ho[Uo+111]=Ho[Uo+63235]="F"+Uo;var Ko={};function Vo(t){var e,n,i,r,o=t.split(/-(?!$)/);t=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Xo(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var r=q(n.split(" "),Vo),o=0;o<r.length;o++){var s=void 0,a=void 0;o==r.length-1?(a=r.join(" "),s=i):(a=r.slice(0,o+1).join(" "),s="...");var l=e[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else e[a]=s}delete t[n]}for(var u in e)t[u]=e[u];return t}function Go(t,e,n,i){var r=(e=Qo(e)).call?e.call(t,i):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Go(t,e.fallthrough,n,i);for(var o=0;o<e.fallthrough.length;o++){var s=Go(t,e.fallthrough[o],n,i);if(s)return s}}}function Yo(t){var e="string"==typeof t?t:Ho[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function $o(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(x?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(x?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function qo(t,e){if(h&&34==t.keyCode&&t.char)return!1;var n=Ho[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),$o(n,t,e))}function Qo(t){return"string"==typeof t?Ko[t]:t}function Zo(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=e(n[r]);i.length&&ne(o.from,$(i).to)<=0;){var s=i.pop();if(ne(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}tr(t,(function(){for(var e=i.length-1;e>=0;e--)go(t.doc,"",i[e].from,i[e].to,"+delete");Ni(t)}))}function Jo(t,e,n){var i=ot(t.text,e+n,n);return i<0||i>t.text.length?null:i}function ts(t,e,n){var i=Jo(t,e.ch,n);return null==i?null:new ee(e.line,i,n<0?"after":"before")}function es(t,e,n,i,r){if(t){var o=ct(n,e.doc.direction);if(o){var s,a=r<0?$(o):o[0],l=r<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==e.doc.direction){var u=Rn(e,n);s=r<0?n.text.length-1:0;var c=Pn(e,u,s).top;s=st((function(t){return Pn(e,u,t).top==c}),r<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Jo(n,s,1))}else s=r<0?a.to:a.from;return new ee(i,s,l)}}return new ee(i,r<0?n.text.length:0,r<0?"before":"after")}Ko.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ko.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ko.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ko.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ko.default=v?Ko.macDefault:Ko.pcDefault;var ns={selectAll:lo,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),U)},killLine:function(t){return Zo(t,(function(e){if(e.empty()){var n=Gt(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:ee(e.head.line+1,0)}:{from:e.head,to:ee(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return Zo(t,(function(e){return{from:ee(e.from().line,0),to:le(t.doc,ee(e.to().line+1,0))}}))},delLineLeft:function(t){return Zo(t,(function(t){return{from:ee(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return Zo(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}}))},delWrappedLineRight:function(t){return Zo(t,(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(ee(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(ee(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return is(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return rs(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(t,e){var n=Gt(t.doc,e),i=function(t){for(var e;e=Ie(t);)t=e.find(1,!0).line;return t}(n);return i!=n&&(e=Qt(i)),es(!0,t,n,e,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")}),V)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")}),V)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?rs(t,e.head):i}),V)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=B(t.getLine(o.line),o.ch,i);e.push(Y(i-s%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return tr(t,(function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++)if(e[i].empty()){var r=e[i].head,o=Gt(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new ee(r.line,r.ch-1)),r.ch>0)r=new ee(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),ee(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var s=Gt(t.doc,r.line-1).text;s&&(r=new ee(r.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),ee(r.line-1,s.length-1),r,"+transpose"))}n.push(new Cr(r,r))}t.setSelections(n)}))},newlineAndIndent:function(t){return tr(t,(function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var i=0;i<e.length;i++)t.indentLine(e[i].from().line,null,!0);Ni(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function is(t,e){var n=Gt(t.doc,e),i=je(n);return i!=n&&(e=Qt(i)),es(!0,t,i,e,1)}function rs(t,e){var n=is(t,e.line),i=Gt(t.doc,n.line),r=ct(i,t.doc.direction);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=o&&e.ch;return ee(n.line,s?0:o,n.sticky)}return n}function os(t,e,n){if("string"==typeof e&&!(e=ns[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=F}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}var ss=new j;function as(t,e,n,i){var r=t.state.keySeq;if(r){if(Yo(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:ss.set(50,(function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())})),ls(t,r+" "+e,n,i))return!0}return ls(t,e,n,i)}function ls(t,e,n,i){var r=function(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var r=Go(e,t.state.keyMaps[i],n,t);if(r)return r}return t.options.extraKeys&&Go(e,t.options.extraKeys,n,t)||Go(e,t.options.keyMap,n,t)}(t,e,i);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&un(t,"keyHandled",t,e,n),"handled"!=r&&"multi"!=r||(bt(n),xi(t)),!!r}function us(t,e){var n=qo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?as(t,"Shift-"+n,e,(function(e){return os(t,e,!0)}))||as(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return os(t,e)})):as(t,n,e,(function(e){return os(t,e)})))}var cs=null;function hs(t){var e=this;if(e.curOp.focus=N(),!gt(e,t)){s&&a<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var i=us(e,t);h&&(cs=i?n:null,!i&&88==n&&!Pt&&(v?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(S(e,"CodeMirror-crosshair"),dt(document,"keyup",n),dt(document,"mouseover",n))}R(e,"CodeMirror-crosshair"),pt(document,"keyup",n),pt(document,"mouseover",n)}(e)}}function ps(t){16==t.keyCode&&(this.doc.sel.shift=!1),gt(this,t)}function fs(t){var e=this;if(!(kn(e.display,t)||gt(e,t)||t.ctrlKey&&!t.altKey||v&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(h&&n==cs)return cs=null,void bt(t);if(!h||t.which&&!(t.which<10)||!us(e,t)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(t,e,n){return as(t,"'"+n+"'",e,(function(e){return os(t,e,!0)}))}(e,t,r)||e.display.input.onKeyPress(t))}}}var ds,_s,gs=function(t,e,n){this.time=t,this.pos=e,this.button=n};function ms(t){var e=this,n=e.display;if(!(gt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,kn(n,t))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!bs(e,t)){var i=ci(e,t),r=Tt(t),o=i?function(t,e){var n=+new Date;return _s&&_s.compare(n,t,e)?(ds=_s=null,"triple"):ds&&ds.compare(n,t,e)?(_s=new gs(n,t,e),ds=null,"double"):(ds=new gs(n,t,e),_s=null,"single")}(i,r):"single";window.focus(),1==r&&e.state.selectingText&&e.state.selectingText(t),i&&function(t,e,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),as(t,$o(o=(1==e?"Left":2==e?"Middle":"Right")+o,r),r,(function(e){if("string"==typeof e&&(e=ns[e]),!e)return!1;var i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i=e(t,n)!=F}finally{t.state.suppressEdits=!1}return i}))}(e,r,i,o,t)||(1==r?i?function(t,e,n,i){s?setTimeout(I(ki,t),0):t.curOp.focus=N();var r,o=function(t,e,n){var i=t.getOption("configureMouse"),r=i?i(t,e,n):{};if(null==r.unit){var o=y?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==r.extend||t.doc.extend)&&(r.extend=t.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=v?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(v?n.altKey:n.ctrlKey)),r}(t,n,i),u=t.doc.sel;t.options.dragDrop&&Et&&!t.isReadOnly()&&"single"==n&&(r=u.contains(e))>-1&&(ne((r=u.ranges[r]).from(),e)<0||e.xRel>0)&&(ne(r.to(),e)>0||e.xRel<0)?function(t,e,n,i){var r=t.display,o=!1,u=er(t,(function(e){l&&(r.scroller.draggable=!1),t.state.draggingText=!1,dt(r.wrapper.ownerDocument,"mouseup",u),dt(r.wrapper.ownerDocument,"mousemove",c),dt(r.scroller,"dragstart",h),dt(r.scroller,"drop",u),o||(bt(e),i.addNew||$r(t.doc,n,null,null,i.extend),l||s&&9==a?setTimeout((function(){r.wrapper.ownerDocument.body.focus(),r.input.focus()}),20):r.input.focus())})),c=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},h=function(){return o=!0};l&&(r.scroller.draggable=!0),t.state.draggingText=u,u.copy=!i.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop(),pt(r.wrapper.ownerDocument,"mouseup",u),pt(r.wrapper.ownerDocument,"mousemove",c),pt(r.scroller,"dragstart",h),pt(r.scroller,"drop",u),Ci(t),setTimeout((function(){return r.input.focus()}),20)}(t,i,e,o):function(t,e,n,i){var r=t.display,o=t.doc;bt(e);var s,a,l=o.sel,u=l.ranges;if(i.addNew&&!i.extend?(a=o.sel.contains(n),s=a>-1?u[a]:new Cr(n,n)):(s=o.sel.primary(),a=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new Cr(n,n)),n=ci(t,e,!0,!0),a=-1;else{var c=vs(t,n,i.unit);s=i.extend?Yr(s,c.anchor,c.head,i.extend):c}i.addNew?-1==a?(a=u.length,to(o,Tr(t,u.concat([s]),a),{scroll:!1,origin:"*mouse"})):u.length>1&&u[a].empty()&&"char"==i.unit&&!i.extend?(to(o,Tr(t,u.slice(0,a).concat(u.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Qr(o,a,s,K):(a=0,to(o,new kr([s],0),K),l=o.sel);var h=n;function p(e){if(0!=ne(h,e))if(h=e,"rectangle"==i.unit){for(var r=[],u=t.options.tabSize,c=B(Gt(o,n.line).text,n.ch,u),p=B(Gt(o,e.line).text,e.ch,u),f=Math.min(c,p),d=Math.max(c,p),_=Math.min(n.line,e.line),g=Math.min(t.lastLine(),Math.max(n.line,e.line));_<=g;_++){var m=Gt(o,_).text,v=X(m,f,u);f==d?r.push(new Cr(ee(_,v),ee(_,v))):m.length>v&&r.push(new Cr(ee(_,v),ee(_,X(m,d,u))))}r.length||r.push(new Cr(n,n)),to(o,Tr(t,l.ranges.slice(0,a).concat(r),a),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var y,b=s,w=vs(t,e,i.unit),x=b.anchor;ne(w.anchor,x)>0?(y=w.head,x=se(b.from(),w.anchor)):(y=w.anchor,x=oe(b.to(),w.head));var k=l.ranges.slice(0);k[a]=function(t,e){var n=e.anchor,i=e.head,r=Gt(t.doc,n.line);if(0==ne(n,i)&&n.sticky==i.sticky)return e;var o=ct(r);if(!o)return e;var s=lt(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return e;var l,u=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==u||u==o.length)return e;if(i.line!=n.line)l=(i.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=lt(o,i.ch,i.sticky),h=c-s||(i.ch-n.ch)*(1==a.level?-1:1);l=c==u-1||c==u?h<0:h>0}var p=o[u+(l?-1:0)],f=l==(1==p.level),d=f?p.from:p.to,_=f?"after":"before";return n.ch==d&&n.sticky==_?e:new Cr(new ee(n.line,d,_),i)}(t,new Cr(le(o,x),y)),to(o,Tr(t,k,a),K)}}var f=r.wrapper.getBoundingClientRect(),d=0;function _(e){t.state.selectingText=!1,d=1/0,e&&(bt(e),r.input.focus()),dt(r.wrapper.ownerDocument,"mousemove",g),dt(r.wrapper.ownerDocument,"mouseup",m),o.history.lastSelOrigin=null}var g=er(t,(function(e){0!==e.buttons&&Tt(e)?function e(n){var s=++d,a=ci(t,n,!0,"rectangle"==i.unit);if(a)if(0!=ne(a,h)){t.curOp.focus=N(),p(a);var l=Li(r,o);(a.line>=l.to||a.line<l.from)&&setTimeout(er(t,(function(){d==s&&e(n)})),150)}else{var u=n.clientY<f.top?-20:n.clientY>f.bottom?20:0;u&&setTimeout(er(t,(function(){d==s&&(r.scroller.scrollTop+=u,e(n))})),50)}}(e):_(e)})),m=er(t,_);t.state.selectingText=m,pt(r.wrapper.ownerDocument,"mousemove",g),pt(r.wrapper.ownerDocument,"mouseup",m)}(t,i,e,o)}(e,i,o,t):Ct(t)==n.scroller&&bt(t):2==r?(i&&$r(e.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(k?e.display.input.onContextMenu(t):Ci(e)))}}function vs(t,e,n){if("char"==n)return new Cr(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new Cr(ee(e.line,0),le(t.doc,ee(e.line+1,0)));var i=n(t,e);return new Cr(i.from,i.to)}function ys(t,e,n,i){var r,o;if(e.touches)r=e.touches[0].clientX,o=e.touches[0].clientY;else try{r=e.clientX,o=e.clientY}catch(e){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&bt(e);var s=t.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!vt(t,n))return xt(e);o-=a.top-s.viewOffset;for(var l=0;l<t.display.gutterSpecs.length;++l){var u=s.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=r)return _t(t,n,t,Zt(t.doc,o),t.display.gutterSpecs[l].className,e),xt(e)}}function bs(t,e){return ys(t,e,"gutterClick",!0)}function ws(t,e){kn(t.display,e)||function(t,e){return!!vt(t,"gutterContextMenu")&&ys(t,e,"gutterContextMenu",!1)}(t,e)||gt(t,e,"contextmenu")||k||t.display.input.onContextMenu(e)}function xs(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zn(t)}gs.prototype.compare=function(t,e,n){return this.time+400>t&&0==ne(e,this.pos)&&n==this.button};var ks={toString:function(){return"CodeMirror.Init"}},Cs={},Ts={};function Ss(t,e,n){if(!e!=!(n&&n!=ks)){var i=t.display.dragFunctions,r=e?pt:dt;r(t.display.scroller,"dragstart",i.start),r(t.display.scroller,"dragenter",i.enter),r(t.display.scroller,"dragover",i.over),r(t.display.scroller,"dragleave",i.leave),r(t.display.scroller,"drop",i.drop)}}function Os(t){t.options.lineWrapping?(R(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(S(t.display.wrapper,"CodeMirror-wrap"),Xe(t)),ui(t),pi(t),zn(t),setTimeout((function(){return Fi(t)}),100)}function Es(t,e){var n=this;if(!(this instanceof Es))return new Es(t,e);this.options=e=e?W(e):{},W(Cs,e,!1);var i=e.value;"string"==typeof i?i=new No(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var r=new Es.inputStyles[e.inputStyle](this),o=this.display=new mr(t,i,r,e);for(var u in o.wrapper.CodeMirror=this,xs(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new j,keySeq:null,specialChars:null},e.autofocus&&!m&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(t){var e=t.display;pt(e.scroller,"mousedown",er(t,ms)),pt(e.scroller,"dblclick",s&&a<11?er(t,(function(e){if(!gt(t,e)){var n=ci(t,e);if(n&&!bs(t,e)&&!kn(t.display,e)){bt(e);var i=t.findWordAt(n);$r(t.doc,i.anchor,i.head)}}})):function(e){return gt(t,e)||bt(e)}),pt(e.scroller,"contextmenu",(function(e){return ws(t,e)}));var n,i={end:0};function r(){e.activeTouch&&(n=setTimeout((function(){return e.activeTouch=null}),1e3),(i=e.activeTouch).end=+new Date)}function o(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return n*n+i*i>400}pt(e.scroller,"touchstart",(function(r){if(!gt(t,r)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(r)&&!bs(t,r)){e.input.ensurePolled(),clearTimeout(n);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-i.end<=300?i:null},1==r.touches.length&&(e.activeTouch.left=r.touches[0].pageX,e.activeTouch.top=r.touches[0].pageY)}})),pt(e.scroller,"touchmove",(function(){e.activeTouch&&(e.activeTouch.moved=!0)})),pt(e.scroller,"touchend",(function(n){var i=e.activeTouch;if(i&&!kn(e,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var s,a=t.coordsChar(e.activeTouch,"page");s=!i.prev||o(i,i.prev)?new Cr(a,a):!i.prev.prev||o(i,i.prev.prev)?t.findWordAt(a):new Cr(ee(a.line,0),le(t.doc,ee(a.line+1,0))),t.setSelection(s.anchor,s.head),t.focus(),bt(n)}r()})),pt(e.scroller,"touchcancel",r),pt(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(Ii(t,e.scroller.scrollTop),Bi(t,e.scroller.scrollLeft,!0),_t(t,"scroll",t))})),pt(e.scroller,"mousewheel",(function(e){return xr(t,e)})),pt(e.scroller,"DOMMouseScroll",(function(e){return xr(t,e)})),pt(e.wrapper,"scroll",(function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),e.dragFunctions={enter:function(e){gt(t,e)||kt(e)},over:function(e){gt(t,e)||(function(t,e){var n=ci(t,e);if(n){var i=document.createDocumentFragment();yi(t,n,i),t.display.dragCursor||(t.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),E(t.display.dragCursor,i)}}(t,e),kt(e))},start:function(e){return function(t,e){if(s&&(!t.state.draggingText||+new Date-Ro<100))kt(e);else if(!gt(t,e)&&!kn(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!p)){var n=L("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(t,e)},drop:er(t,Po),leave:function(e){gt(t,e)||Do(t)}};var l=e.input.getField();pt(l,"keyup",(function(e){return ps.call(t,e)})),pt(l,"keydown",er(t,hs)),pt(l,"keypress",er(t,fs)),pt(l,"focus",(function(e){return Ti(t,e)})),pt(l,"blur",(function(e){return Si(t,e)}))}(this),Bo(),Gi(this),this.curOp.forceUpdate=!0,Ir(this,i),e.autofocus&&!m||this.hasFocus()?setTimeout(I(Ti,this),20):Si(this),Ts)Ts.hasOwnProperty(u)&&Ts[u](n,e[u],ks);fr(this),e.finishInit&&e.finishInit(this);for(var c=0;c<Ls.length;++c)Ls[c](n);Yi(this),l&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Es.defaults=Cs,Es.optionHandlers=Ts;var Ls=[];function Ms(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=de(t,e).state:n="prev");var s=t.options.tabSize,a=Gt(o,e),l=B(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var u,c=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((u=o.mode.indent(r,a.text.slice(c.length),a.text))==F||u>150)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=e>o.first?B(Gt(o,e-1).text,null,s):0:"add"==n?u=l+t.options.indentUnit:"subtract"==n?u=l-t.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var h="",p=0;if(t.options.indentWithTabs)for(var f=Math.floor(u/s);f;--f)p+=s,h+="\t";if(p<u&&(h+=Y(u-p)),h!=c)return go(o,h,ee(e,0),ee(e,c.length),"+input"),a.stateAfter=null,!0;for(var d=0;d<o.sel.ranges.length;d++){var _=o.sel.ranges[d];if(_.head.line==e&&_.head.ch<c.length){var g=ee(e,c.length);Qr(o,d,new Cr(g,g));break}}}Es.defineInitHook=function(t){return Ls.push(t)};var As=null;function Ns(t){As=t}function Rs(t,e,n,i,r){var o=t.doc;t.display.shift=!1,i||(i=o.sel);var s=+new Date-200,a="paste"==r||t.state.pasteIncoming>s,l=Nt(e),u=null;if(a&&i.ranges.length>1)if(As&&As.text.join("\n")==e){if(i.ranges.length%As.text.length==0){u=[];for(var c=0;c<As.text.length;c++)u.push(o.splitLines(As.text[c]))}}else l.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(u=q(l,(function(t){return[t]})));for(var h=t.curOp.updateInput,p=i.ranges.length-1;p>=0;p--){var f=i.ranges[p],d=f.from(),_=f.to();f.empty()&&(n&&n>0?d=ee(d.line,d.ch-n):t.state.overwrite&&!a?_=ee(_.line,Math.min(Gt(o,_.line).text.length,_.ch+$(l).length)):a&&As&&As.lineWise&&As.text.join("\n")==e&&(d=_=ee(d.line,0)));var g={from:d,to:_,text:u?u[p%u.length]:l,origin:r||(a?"paste":t.state.cutIncoming>s?"cut":"+input")};co(t.doc,g),un(t,"inputRead",t,g)}e&&!a&&Ds(t,e),Ni(t),t.curOp.updateInput<2&&(t.curOp.updateInput=h),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Ps(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||tr(e,(function(){return Rs(e,n,0,null,"paste")})),!0}function Ds(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=t.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(e.indexOf(o.electricChars.charAt(a))>-1){s=Ms(t,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Gt(t.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Ms(t,r.head.line,"smart"));s&&un(t,"electricInput",t,r.head.line)}}}function Is(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line,o={anchor:ee(r,0),head:ee(r+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Ws(t,e,n,i){t.setAttribute("autocorrect",n?"":"off"),t.setAttribute("autocapitalize",i?"":"off"),t.setAttribute("spellcheck",!!e)}function Bs(){var t=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=L("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?t.style.width="1000px":t.setAttribute("wrap","off"),_&&(t.style.border="1px solid black"),Ws(t),e}function js(t,e,n,i,r){var o=e,s=n,a=Gt(t,e.line);function l(i){var o,s;if(null==(o=r?function(t,e,n,i){var r=ct(e,t.doc.direction);if(!r)return ts(e,n,i);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=lt(r,n.ch,n.sticky),s=r[o];if("ltr"==t.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return ts(e,n,i);var a,l=function(t,n){return Jo(e,t instanceof ee?t.ch:t,n)},u=function(n){return t.options.lineWrapping?(a=a||Rn(t,e),Jn(t,e,a,n)):{begin:0,end:e.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==t.doc.direction||1==s.level){var h=1==s.level==i<0,p=l(n,h?1:-1);if(null!=p&&(h?p<=s.to&&p<=c.end:p>=s.from&&p>=c.begin)){var f=h?"before":"after";return new ee(n.line,p,f)}}var d=function(t,e,i){for(var o=function(t,e){return e?new ee(n.line,l(t,1),"before"):new ee(n.line,t,"after")};t>=0&&t<r.length;t+=e){var s=r[t],a=e>0==(1!=s.level),u=a?i.begin:l(i.end,-1);if(s.from<=u&&u<s.to)return o(u,a);if(u=a?s.from:l(s.to,-1),i.begin<=u&&u<i.end)return o(u,a)}},_=d(o+i,i,c);if(_)return _;var g=i>0?c.end:l(c.begin,-1);return null==g||i>0&&g==e.text.length||!(_=d(i>0?0:r.length-1,i,u(g)))?null:_}(t.cm,a,e,n):ts(a,e,n))){if(i||(s=e.line+n)<t.first||s>=t.first+t.size||(e=new ee(s,e.ch,e.sticky),!(a=Gt(t,s))))return!1;e=es(r,t.cm,a,e.line,n)}else e=o;return!0}if("char"==i)l();else if("column"==i)l(!0);else if("word"==i||"group"==i)for(var u=null,c="group"==i,h=t.cm&&t.cm.getHelper(e,"wordChars"),p=!0;!(n<0)||l(!p);p=!1){var f=a.text.charAt(e.ch)||"\n",d=et(f,h)?"w":c&&"\n"==f?"n":!c||/\s/.test(f)?null:"p";if(!c||p||d||(d="s"),u&&u!=d){n<0&&(n=1,l(),e.sticky="after");break}if(d&&(u=d),n>0&&!l(!p))break}var _=so(t,e,o,s,!0);return ie(o,_)&&(_.hitSide=!0),_}function Hs(t,e,n,i){var r,o,s=t.doc,a=e.left;if("page"==i){var l=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*ri(t.display),3);r=(n>0?e.bottom:e.top)+n*u}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(;(o=Qn(t,a,r)).outside;){if(n<0?r<=0:r>=s.height){o.hitSide=!0;break}r+=5*n}return o}var zs=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new j,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Fs(t,e){var n=Nn(t,e.line);if(!n||n.hidden)return null;var i=Gt(t.doc,e.line),r=Mn(n,i,e.line),o=ct(i,t.doc.direction),s="left";o&&(s=lt(o,e.ch)%2?"right":"left");var a=Wn(r.map,e.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Us(t,e){return e&&(t.bad=!0),t}function Ks(t,e,n){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[n]))return Us(t.clipPos(ee(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var o=t.display.view[r];if(o.node==i)return Vs(o,e,n)}}function Vs(t,e,n){var i=t.text.firstChild,r=!1;if(!e||!A(i,e))return Us(ee(Qt(t.line),0),!0);if(e==i&&(r=!0,e=i.childNodes[n],n=0,!e)){var o=t.rest?$(t.rest):t.line;return Us(ee(Qt(o),o.text.length),r)}var s=3==e.nodeType?e:null,a=e;for(s||1!=e.childNodes.length||3!=e.firstChild.nodeType||(s=e.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=i;)a=a.parentNode;var l=t.measure,u=l.maps;function c(e,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=r<0?l.map:u[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==e||a==n){var c=Qt(r<0?t.line:t.rest[r]),h=o[s]+i;return(i<0||a!=e)&&(h=o[s+(i?1:0)]),ee(c,h)}}}var h=c(s,a,n);if(h)return Us(h,r);for(var p=a.nextSibling,f=s?s.nodeValue.length-n:0;p;p=p.nextSibling){if(h=c(p,p.firstChild,0))return Us(ee(h.line,h.ch-f),r);f+=p.textContent.length}for(var d=a.previousSibling,_=n;d;d=d.previousSibling){if(h=c(d,d.firstChild,-1))return Us(ee(h.line,h.ch+_),r);_+=d.textContent.length}}zs.prototype.init=function(t){var e=this,n=this,i=n.cm,r=n.div=t.lineDiv;function o(t){if(!gt(i,t)){if(i.somethingSelected())Ns({lineWise:!1,text:i.getSelections()}),"cut"==t.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var e=Is(i);Ns({lineWise:!0,text:e.text}),"cut"==t.type&&i.operation((function(){i.setSelections(e.ranges,0,U),i.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var o=As.text.join("\n");if(t.clipboardData.setData("Text",o),t.clipboardData.getData("Text")==o)return void t.preventDefault()}var s=Bs(),a=s.firstChild;i.display.lineSpace.insertBefore(s,i.display.lineSpace.firstChild),a.value=As.text.join("\n");var l=document.activeElement;D(a),setTimeout((function(){i.display.lineSpace.removeChild(s),l.focus(),l==r&&n.showPrimarySelection()}),50)}}Ws(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),pt(r,"paste",(function(t){gt(i,t)||Ps(t,i)||a<=11&&setTimeout(er(i,(function(){return e.updateFromDOM()})),20)})),pt(r,"compositionstart",(function(t){e.composing={data:t.data,done:!1}})),pt(r,"compositionupdate",(function(t){e.composing||(e.composing={data:t.data,done:!1})})),pt(r,"compositionend",(function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)})),pt(r,"touchstart",(function(){return n.forceCompositionEnd()})),pt(r,"input",(function(){e.composing||e.readFromDOMSoon()})),pt(r,"copy",o),pt(r,"cut",o)},zs.prototype.prepareSelection=function(){var t=vi(this.cm,!1);return t.focus=this.cm.state.focused,t},zs.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},zs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},zs.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,i=e.doc.sel.primary(),r=i.from(),o=i.to();if(e.display.viewTo==e.display.viewFrom||r.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var s=Ks(e,t.anchorNode,t.anchorOffset),a=Ks(e,t.focusNode,t.focusOffset);if(!s||s.bad||!a||a.bad||0!=ne(se(s,a),r)||0!=ne(oe(s,a),o)){var l=e.display.view,u=r.line>=e.display.viewFrom&&Fs(e,r)||{node:l[0].measure.map[2],offset:0},c=o.line<e.display.viewTo&&Fs(e,o);if(!c){var h=l[l.length-1].measure,p=h.maps?h.maps[h.maps.length-1]:h.map;c={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(u&&c){var f,d=t.rangeCount&&t.getRangeAt(0);try{f=T(u.node,u.offset,c.offset,c.node)}catch(t){}f&&(!n&&e.state.focused?(t.collapse(u.node,u.offset),f.collapsed||(t.removeAllRanges(),t.addRange(f))):(t.removeAllRanges(),t.addRange(f)),d&&null==t.anchorNode?t.addRange(d):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},zs.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},zs.prototype.showMultipleSelections=function(t){E(this.cm.display.cursorDiv,t.cursors),E(this.cm.display.selectionDiv,t.selection)},zs.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},zs.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return A(this.div,e)},zs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},zs.prototype.blur=function(){this.div.blur()},zs.prototype.getField=function(){return this.div},zs.prototype.supportsTouch=function(){return!0},zs.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():tr(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},zs.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},zs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(g&&c&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Ks(e,t.anchorNode,t.anchorOffset),i=Ks(e,t.focusNode,t.focusOffset);n&&i&&tr(e,(function(){to(e.doc,Sr(n,i),U),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)}))}}},zs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>i.firstLine()&&(s=ee(s.line-1,Gt(i.doc,s.line-1).length)),a.ch==Gt(i.doc,a.line).text.length&&a.line<i.lastLine()&&(a=ee(a.line+1,0)),s.line<r.viewFrom||a.line>r.viewTo-1)return!1;s.line==r.viewFrom||0==(t=hi(i,s.line))?(e=Qt(r.view[0].line),n=r.view[0].node):(e=Qt(r.view[t].line),n=r.view[t-1].node.nextSibling);var l,u,c=hi(i,a.line);if(c==r.view.length-1?(l=r.viewTo-1,u=r.lineDiv.lastChild):(l=Qt(r.view[c+1].line)-1,u=r.view[c+1].node.previousSibling),!n)return!1;for(var h=i.doc.splitLines(function(t,e,n,i,r){var o="",s=!1,a=t.doc.lineSeparator(),l=!1;function u(){s&&(o+=a,l&&(o+=a),s=l=!1)}function c(t){t&&(u(),o+=t)}function h(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void c(n);var o,p=e.getAttribute("cm-marker");if(p){var f=t.findMarks(ee(i,0),ee(r+1,0),(g=+p,function(t){return t.id==g}));return void(f.length&&(o=f[0].find(0))&&c(Yt(t.doc,o.from,o.to).join(a)))}if("false"==e.getAttribute("contenteditable"))return;var d=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;d&&u();for(var _=0;_<e.childNodes.length;_++)h(e.childNodes[_]);/^(pre|p)$/i.test(e.nodeName)&&(l=!0),d&&(s=!0)}else 3==e.nodeType&&c(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;h(e),e!=n;)e=e.nextSibling,l=!1;return o}(i,n,u,e,l)),p=Yt(i.doc,ee(e,0),ee(l,Gt(i.doc,l).text.length));h.length>1&&p.length>1;)if($(h)==$(p))h.pop(),p.pop(),l--;else{if(h[0]!=p[0])break;h.shift(),p.shift(),e++}for(var f=0,d=0,_=h[0],g=p[0],m=Math.min(_.length,g.length);f<m&&_.charCodeAt(f)==g.charCodeAt(f);)++f;for(var v=$(h),y=$(p),b=Math.min(v.length-(1==h.length?f:0),y.length-(1==p.length?f:0));d<b&&v.charCodeAt(v.length-d-1)==y.charCodeAt(y.length-d-1);)++d;if(1==h.length&&1==p.length&&e==s.line)for(;f&&f>s.ch&&v.charCodeAt(v.length-d-1)==y.charCodeAt(y.length-d-1);)f--,d++;h[h.length-1]=v.slice(0,v.length-d).replace(/^\u200b+/,""),h[0]=h[0].slice(f).replace(/\u200b+$/,"");var w=ee(e,f),x=ee(l,p.length?$(p).length-d:0);return h.length>1||h[0]||ne(w,x)?(go(i.doc,h,w,x,"+input"),!0):void 0},zs.prototype.ensurePolled=function(){this.forceCompositionEnd()},zs.prototype.reset=function(){this.forceCompositionEnd()},zs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},zs.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},zs.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||tr(this.cm,(function(){return pi(t.cm)}))},zs.prototype.setUneditable=function(t){t.contentEditable="false"},zs.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||er(this.cm,Rs)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},zs.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},zs.prototype.onContextMenu=function(){},zs.prototype.resetPosition=function(){},zs.prototype.needsContentAttribute=!0;var Xs=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new j,this.hasSelection=!1,this.composing=null};Xs.prototype.init=function(t){var e=this,n=this,i=this.cm;this.createField(t);var r=this.textarea;function o(t){if(!gt(i,t)){if(i.somethingSelected())Ns({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var e=Is(i);Ns({lineWise:!0,text:e.text}),"cut"==t.type?i.setSelections(e.ranges,null,U):(n.prevInput="",r.value=e.text.join("\n"),D(r))}"cut"==t.type&&(i.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),_&&(r.style.width="0px"),pt(r,"input",(function(){s&&a>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()})),pt(r,"paste",(function(t){gt(i,t)||Ps(t,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),pt(r,"cut",o),pt(r,"copy",o),pt(t.scroller,"paste",(function(e){if(!kn(t,e)&&!gt(i,e)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=e.clipboardData,r.dispatchEvent(o)}})),pt(t.lineSpace,"selectstart",(function(e){kn(t,e)||bt(e)})),pt(r,"compositionstart",(function(){var t=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:i.markText(t,i.getCursor("to"),{className:"CodeMirror-composing"})}})),pt(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Xs.prototype.createField=function(t){this.wrapper=Bs(),this.textarea=this.wrapper.firstChild},Xs.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=vi(t);if(t.options.moveInputWithCursor){var r=Yn(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},Xs.prototype.showSelection=function(t){var e=this.cm.display;E(e.cursorDiv,t.cursors),E(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Xs.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&D(this.textarea),s&&a>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Xs.prototype.getField=function(){return this.textarea},Xs.prototype.supportsTouch=function(){return!1},Xs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||N()!=this.textarea))try{this.textarea.focus()}catch(t){}},Xs.prototype.blur=function(){this.textarea.blur()},Xs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Xs.prototype.receivedFocus=function(){this.slowPoll()},Xs.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},Xs.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,(function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))}))},Xs.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||Rt(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=n.value;if(r==i&&!e.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===r||v&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,u=Math.min(i.length,r.length);l<u&&i.charCodeAt(l)==r.charCodeAt(l);)++l;return tr(e,(function(){Rs(e,r.slice(l),i.length-l,null,t.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Xs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Xs.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Xs.prototype.onContextMenu=function(t){var e=this,n=e.cm,i=n.display,r=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=ci(n,t),u=i.scroller.scrollTop;if(o&&!h){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&er(n,to)(n.doc,Sr(o),U);var c,p=r.style.cssText,f=e.wrapper.style.cssText,d=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-d.top-5)+"px; left: "+(t.clientX-d.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(c=window.scrollY),i.input.focus(),l&&window.scrollTo(null,c),i.input.reset(),n.somethingSelected()||(r.value=e.prevInput=" "),e.contextMenuPending=m,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),s&&a>=9&&g(),k){kt(t);var _=function(){dt(window,"mouseup",_),setTimeout(m,20)};pt(window,"mouseup",_)}else setTimeout(m,50)}function g(){if(null!=r.selectionStart){var t=n.somethingSelected(),o="​"+(t?r.value:"");r.value="⇚",r.value=o,e.prevInput=t?"":"​",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function m(){if(e.contextMenuPending==m&&(e.contextMenuPending=!1,e.wrapper.style.cssText=f,r.style.cssText=p,s&&a<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=u),null!=r.selectionStart)){(!s||s&&a<9)&&g();var t=0,o=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"​"==e.prevInput?er(n,lo)(n):t++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},Xs.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},Xs.prototype.setUneditable=function(){},Xs.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,i,r,o){t.defaults[n]=i,r&&(e[n]=o?function(t,e,n){n!=ks&&r(t,e,n)}:r)}t.defineOption=n,t.Init=ks,n("value","",(function(t,e){return t.setValue(e)}),!0),n("mode",null,(function(t,e){t.doc.modeOption=e,Ar(t)}),!0),n("indentUnit",2,Ar,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(t){Nr(t),zn(t),pi(t)}),!0),n("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var n=[],i=t.doc.first;t.doc.iter((function(t){for(var r=0;;){var o=t.text.indexOf(e,r);if(-1==o)break;r=o+e.length,n.push(ee(i,o))}i++}));for(var r=n.length-1;r>=0;r--)go(t.doc,e,n[r],ee(n[r].line,n[r].ch+e.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=ks&&t.refresh()})),n("specialCharPlaceholder",Je,(function(t){return t.refresh()}),!0),n("electricChars",!0),n("inputStyle",m?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),n("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),n("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),n("rtlMoveVisually",!b),n("wholeLineUpdateBefore",!0),n("theme","default",(function(t){xs(t),gr(t)}),!0),n("keyMap","default",(function(t,e,n){var i=Qo(e),r=n!=ks&&Qo(n);r&&r.detach&&r.detach(t,i),i.attach&&i.attach(t,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Os,!0),n("gutters",[],(function(t,e){t.display.gutterSpecs=dr(e,t.options.lineNumbers),gr(t)}),!0),n("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?ai(t.display)+"px":"0",t.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(t){return Fi(t)}),!0),n("scrollbarStyle","native",(function(t){Vi(t),Fi(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=dr(t.options.gutters,e),gr(t)}),!0),n("firstLineNumber",1,gr,!0),n("lineNumberFormatter",(function(t){return t}),gr,!0),n("showCursorWhenSelecting",!1,mi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(t,e){"nocursor"==e&&(Si(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),n("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),n("dragDrop",!0,Ss),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,mi,!0),n("singleCursorHeightPerLine",!0,mi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Nr,!0),n("addModeClass",!1,Nr,!0),n("pollInterval",100),n("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),n("historyEventDelay",1250),n("viewportMargin",10,(function(t){return t.refresh()}),!0),n("maxHighlightLength",1e4,Nr,!0),n("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),n("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),n("autofocus",null),n("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),n("phrases",null)}(Es),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,r=i[t];i[t]==n&&"mode"!=t||(i[t]=n,e.hasOwnProperty(t)&&er(this,e[t])(this,n,r),_t(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Qo(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:nr((function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var i=0,r=n(e);i<t.length&&n(t[i])<=r;)i++;t.splice(i,0,e)}(this.state.overlays,{mode:i,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(t){return t.priority})),this.state.modeGen++,pi(this)})),removeOverlay:nr((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void pi(this)}})),indentLine:nr((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Jt(this.doc,t)&&Ms(this,t,e,n)})),indentSelection:nr((function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>n&&(Ms(this,r.head.line,t,!0),n=r.head.line,i==this.doc.sel.primIndex&&Ni(this));else{var o=r.from(),s=r.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)Ms(this,l,t);var u=this.doc.sel.ranges;0==o.ch&&e.length==u.length&&u[i].from().ch>0&&Qr(this.doc,i,new Cr(o,u[i].to()),U)}}})),getTokenAt:function(t,e){return ye(this,t,e)},getLineTokens:function(t,e){return ye(this,ee(t),e,!0)},getTokenTypeAt:function(t){t=le(this.doc,t);var e,n=fe(this,Gt(this.doc,t.line)),i=0,r=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){e=n[2*s+2];break}i=s+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!n.hasOwnProperty(e))return i;var r=n[e],o=this.getModeAt(t);if("string"==typeof o[e])r[o[e]]&&i.push(r[o[e]]);else if(o[e])for(var s=0;s<o[e].length;s++){var a=r[o[e][s]];a&&i.push(a)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var l=0;l<r._global.length;l++){var u=r._global[l];u.pred(o,this)&&-1==H(i,u.val)&&i.push(u.val)}return i},getStateAfter:function(t,e){var n=this.doc;return de(this,(t=ae(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return Yn(this,null==t?n.head:"object"==typeof t?le(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Gn(this,le(this.doc,t),e||"page")},coordsChar:function(t,e){return Qn(this,(t=Xn(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Xn(this,{top:t,left:0},e||"page").top,Zt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,r=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,r=!0),i=Gt(this.doc,t)}else i=t;return Vn(this,i,{top:0,left:0},e||"page",n||r).top+(r?this.doc.height-Ke(i):0)},defaultTextHeight:function(){return ri(this.display)},defaultCharWidth:function(){return oi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o,s,a,l=this.display,u=(t=Yn(this,le(this.doc,t))).bottom,c=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),l.sizer.appendChild(e),"over"==i)u=t.top;else if("above"==i||"near"==i){var h=Math.max(l.wrapper.clientHeight,this.doc.height),p=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>h)&&t.top>e.offsetHeight?u=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=h&&(u=t.bottom),c+e.offsetWidth>p&&(c=p-e.offsetWidth)}e.style.top=u+"px",e.style.left=e.style.right="","right"==r?(c=l.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?c=0:"middle"==r&&(c=(l.sizer.clientWidth-e.offsetWidth)/2),e.style.left=c+"px"),n&&(o=this,s={left:c,top:u,right:c+e.offsetWidth,bottom:u+e.offsetHeight},null!=(a=Mi(o,s)).scrollTop&&Ii(o,a.scrollTop),null!=a.scrollLeft&&Bi(o,a.scrollLeft))},triggerOnKeyDown:nr(hs),triggerOnKeyPress:nr(fs),triggerOnKeyUp:ps,triggerOnMouseDown:nr(ms),execCommand:function(t){if(ns.hasOwnProperty(t))return ns[t].call(null,this)},triggerElectric:nr((function(t){Ds(this,t)})),findPosH:function(t,e,n,i){var r=1;e<0&&(r=-1,e=-e);for(var o=le(this.doc,t),s=0;s<e&&!(o=js(this.doc,o,r,n,i)).hitSide;++s);return o},moveH:nr((function(t,e){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?js(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()}),V)})),deleteH:nr((function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Zo(this,(function(n){var r=js(i,n.head,t,e,!1);return t<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(t,e,n,i){var r=1,o=i;e<0&&(r=-1,e=-e);for(var s=le(this.doc,t),a=0;a<e;++a){var l=Yn(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Hs(this,l,r,n)).hitSide)break}return s},moveV:nr((function(t,e){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return t<0?s.from():s.to();var a=Yn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=Hs(n,a,t,e);return"page"==e&&s==i.sel.primary()&&Ai(n,Gn(n,l,"div").top-a.top),l}),V),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]})),findWordAt:function(t){var e=Gt(this.doc,t.line).text,n=t.ch,i=t.ch;if(e){var r=this.getHelper(t,"wordChars");"before"!=t.sticky&&i!=e.length||!n?++i:--n;for(var o=e.charAt(n),s=et(o,r)?function(t){return et(t,r)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!et(t)};n>0&&s(e.charAt(n-1));)--n;for(;i<e.length&&s(e.charAt(i));)++i}return new Cr(ee(t.line,n),ee(t.line,i))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?R(this.display.cursorDiv,"CodeMirror-overwrite"):S(this.display.cursorDiv,"CodeMirror-overwrite"),_t(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==N()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:nr((function(t,e){Ri(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-On(this)-this.display.barHeight,width:t.scrollWidth-On(this)-this.display.barWidth,clientHeight:Ln(this),clientWidth:En(this)}},scrollIntoView:nr((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:ee(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Pi(t),t.curOp.scrollToPos=e}(this,t):Di(this,t.from,t.to,t.margin)})),setSize:nr((function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&Hn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){fi(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,_t(this,"refresh",this)})),operation:function(t){return tr(this,t)},startOperation:function(){return Gi(this)},endOperation:function(){return Yi(this)},refresh:nr((function(){var t=this.display.cachedTextHeight;pi(this),this.curOp.forceUpdate=!0,zn(this),Ri(this,this.doc.scrollLeft,this.doc.scrollTop),cr(this.display),(null==t||Math.abs(t-ri(this.display))>.5)&&ui(this),_t(this,"refresh",this)})),swapDoc:nr((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Ir(this,t),zn(this),this.display.input.reset(),Ri(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,un(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},yt(t),t.registerHelper=function(e,i,r){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][i]=r},t.registerGlobalHelper=function(e,i,r,o){t.registerHelper(e,i,o),n[e]._global.push({pred:r,val:o})}}(Es);var Gs="iter insert remove copy getEditor constructor".split(" ");for(var Ys in No.prototype)No.prototype.hasOwnProperty(Ys)&&H(Gs,Ys)<0&&(Es.prototype[Ys]=function(t){return function(){return t.apply(this.doc,arguments)}}(No.prototype[Ys]));return yt(No),Es.inputStyles={textarea:Xs,contenteditable:zs},Es.defineMode=function(t){Es.defaults.mode||"null"==t||(Es.defaults.mode=t),Bt.apply(this,arguments)},Es.defineMIME=function(t,e){Wt[t]=e},Es.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),Es.defineMIME("text/plain","null"),Es.defineExtension=function(t,e){Es.prototype[t]=e},Es.defineDocExtension=function(t,e){No.prototype[t]=e},Es.fromTextArea=function(t,e){if((e=e?W(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=N();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function i(){t.value=a.getValue()}var r;if(t.form&&(pt(t.form,"submit",i),!e.leaveSubmitMethodAlone)){var o=t.form;r=o.submit;try{var s=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=s}}catch(t){}}e.finishInit=function(n){n.save=i,n.getTextArea=function(){return t},n.toTextArea=function(){n.toTextArea=isNaN,i(),t.parentNode.removeChild(n.getWrapperElement()),t.style.display="",t.form&&(dt(t.form,"submit",i),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=r))}},t.style.display="none";var a=Es((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return a},function(t){t.off=dt,t.on=pt,t.wheelEventPixels=wr,t.Doc=No,t.splitLines=Nt,t.countColumn=B,t.findColumn=X,t.isWordChar=tt,t.Pass=F,t.signal=_t,t.Line=Ge,t.changeEnd=Or,t.scrollbarModel=Ki,t.Pos=ee,t.cmpPos=ne,t.modes=It,t.mimeModes=Wt,t.resolveMode=jt,t.getMode=Ht,t.modeExtensions=zt,t.extendMode=Ft,t.copyState=Ut,t.startState=Vt,t.innerMode=Kt,t.commands=ns,t.keyMap=Ko,t.keyName=qo,t.isModifierKey=Yo,t.lookupKey=Go,t.normalizeKeyMap=Xo,t.StringStream=Xt,t.SharedTextMarker=Eo,t.TextMarker=So,t.LineWidget=ko,t.e_preventDefault=bt,t.e_stopPropagation=wt,t.e_stop=kt,t.addClass=R,t.contains=A,t.rmClass=S,t.keyNames=Ho}(Es),Es.version="5.49.2",Es}()},function(t,e,n){var i,r;r=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i=n(1).Beautifier,r=n(5).Options;t.exports=function(t,e){return new i(t,e).beautify()},t.exports.defaultOptions=function(){return new r}},function(t,e,n){"use strict";var i=n(2).Output,r=n(3).Token,o=n(4),s=n(5).Options,a=n(7).Tokenizer,l=n(7).line_starters,u=n(7).positionable_operators,c=n(7).TOKEN;function h(t,e){return-1!==e.indexOf(t)}function p(t,e){return t&&t.type===c.RESERVED&&t.text===e}function f(t,e){return t&&t.type===c.RESERVED&&h(t.text,e)}var d=["case","return","do","if","throw","else","await","break","continue","async"],_=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].replace(/-/g,"_")]=t[n];return e}(["before-newline","after-newline","preserve-newline"]),g=[_.before_newline,_.preserve_newline],m={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function v(t,e){e.multiline_frame||e.mode===m.ForInitializer||e.mode===m.Conditional||t.remove_indent(e.start_line_index)}function y(t){return t===m.ArrayLiteral}function b(t){return h(t,[m.Expression,m.ForInitializer,m.Conditional])}function w(t,e){e=e||{},this._source_text=t||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new s(e)}w.prototype.create_flags=function(t,e){var n=0;return t&&(n=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>n&&(n=t.line_indent_level)),{mode:e,parent:t,last_token:t?t.last_token:new r(c.START_BLOCK,""),last_word:t?t.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,alignment:0,line_indent_level:t?t.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},w.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new i(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(m.BlockStatement);var n=new a(t,this._options);return this._tokens=n.tokenize(),t},w.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._reset(this._source_text),e=this._options.eol;"auto"===this._options.eol&&(e="\n",t&&o.lineBreak.test(t||"")&&(e=t.match(o.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(e)},w.prototype.handle_token=function(t,e){t.type===c.START_EXPR?this.handle_start_expr(t):t.type===c.END_EXPR?this.handle_end_expr(t):t.type===c.START_BLOCK?this.handle_start_block(t):t.type===c.END_BLOCK?this.handle_end_block(t):t.type===c.WORD?this.handle_word(t):t.type===c.RESERVED?this.handle_word(t):t.type===c.SEMICOLON?this.handle_semicolon(t):t.type===c.STRING?this.handle_string(t):t.type===c.EQUALS?this.handle_equals(t):t.type===c.OPERATOR?this.handle_operator(t):t.type===c.COMMA?this.handle_comma(t):t.type===c.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===c.COMMENT?this.handle_comment(t,e):t.type===c.DOT?this.handle_dot(t):t.type===c.EOF?this.handle_eof(t):(t.type,c.UNKNOWN,this.handle_unknown(t,e))},w.prototype.handle_whitespace_and_comments=function(t,e){var n=t.newlines,i=this._options.keep_array_indentation&&y(this._flags.mode);if(t.comments_before)for(var r=t.comments_before.next();r;)this.handle_whitespace_and_comments(r,e),this.handle_token(r,e),r=t.comments_before.next();if(i)for(var o=0;o<n;o+=1)this.print_newline(o>0,e);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,e);for(var s=1;s<n;s+=1)this.print_newline(!0,e)}};var x=["async","break","continue","return","throw","yield"];w.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=void 0!==e&&e,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&t.newlines||e;if(h(this._flags.last_token.text,u)||h(t.text,u)){var i=h(this._flags.last_token.text,u)&&h(this._options.operator_position,g)||h(t.text,u);n=n&&i}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(f(this._flags.last_token,x))return;this._output.set_wrap_point()}}},w.prototype.print_newline=function(t,e){if(!e&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==c.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==m.Statement||this._flags.if_block&&p(n,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)},w.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&t.newlines&&("["===t.text||y(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},w.prototype.print_token=function(t){if(this._output.raw)this._output.add_raw_token(t);else{if(this._options.comma_first&&t.previous&&t.previous.type===c.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(t),this._output.non_breaking_space=!0,this._output.add_token(t.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},w.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},w.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},w.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},w.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===m.Statement&&v(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},w.prototype.start_of_object_property=function(){return this._flags.parent.mode===m.ObjectLiteral&&this._flags.mode===m.Statement&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||f(this._flags.last_token,["get","set"]))},w.prototype.start_of_statement=function(t){var e=!1;return!!(e=(e=(e=(e=(e=(e=(e=e||f(this._flags.last_token,["var","let","const"])&&t.type===c.WORD)||p(this._flags.last_token,"do"))||!(this._flags.parent.mode===m.ObjectLiteral&&this._flags.mode===m.Statement)&&f(this._flags.last_token,x)&&!t.newlines)||p(this._flags.last_token,"else")&&!(p(t,"if")&&!t.comments_before))||this._flags.last_token.type===c.END_EXPR&&(this._previous_flags.mode===m.ForInitializer||this._previous_flags.mode===m.Conditional))||this._flags.last_token.type===c.WORD&&this._flags.mode===m.BlockStatement&&!this._flags.in_case&&!("--"===t.text||"++"===t.text)&&"function"!==this._last_last_text&&t.type!==c.WORD&&t.type!==c.RESERVED)||this._flags.mode===m.ObjectLiteral&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||f(this._flags.last_token,["get","set"])))&&(this.set_mode(m.Statement),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,f(t,["do","for","if","while"])),!0)},w.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=m.Expression;if("["===t.text){if(this._flags.last_token.type===c.WORD||")"===this._flags.last_token.text)return f(this._flags.last_token,l)&&(this._output.space_before_token=!0),this.print_token(t),this.set_mode(e),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));e=m.ArrayLiteral,y(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),h(this._flags.last_token.type,[c.START_EXPR,c.END_EXPR,c.WORD,c.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===c.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,e=m.ForInitializer):h(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,e=m.Conditional):h(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===t.whitespace_before?this._output.space_before_token=!1:(h(this._flags.last_token.text,l)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===c.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var i=this._tokens.peek(-4);f(n,["async","function"])||"*"===n.text&&f(i,["async","function"])?this._output.space_before_token=!0:this._flags.mode===m.ObjectLiteral&&("{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==i.text&&","!==i.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===c.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(h(this._last_last_text,["function","yield"])||this._flags.mode===m.ObjectLiteral&&h(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===c.START_BLOCK?this.print_newline():this._flags.last_token.type!==c.END_EXPR&&this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==c.COMMA||this.allow_wrap_or_preserved_newline(t,t.newlines),this.print_token(t),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},w.prototype.handle_end_expr=function(t){for(;this._flags.mode===m.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,"]"===t.text&&y(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==c.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(t),this.restore_mode(),v(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===m.Conditional&&(this._previous_flags.mode=m.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},w.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===c.END_EXPR?(this.set_mode(m.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(m.BlockStatement):n&&(h(n.text,[":",","])&&h(e.type,[c.STRING,c.WORD,c.RESERVED])||h(e.text,["get","set","..."])&&h(n.type,[c.WORD,c.RESERVED]))?h(this._last_last_text,["class","interface"])?this.set_mode(m.BlockStatement):this.set_mode(m.ObjectLiteral):this._flags.last_token.type===c.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(m.BlockStatement):h(this._flags.last_token.type,[c.EQUALS,c.START_EXPR,c.COMMA,c.OPERATOR])||f(this._flags.last_token,["return","throw","import","default"])?this.set_mode(m.ObjectLiteral):this.set_mode(m.BlockStatement);var i=!e.comments_before&&"}"===e.text,r=i&&"function"===this._flags.last_word&&this._flags.last_token.type===c.END_EXPR;if(this._options.brace_preserve_inline){var o=0,s=null;this._flags.inline_frame=!0;do{if(o+=1,(s=this._tokens.peek(o-1)).newlines){this._flags.inline_frame=!1;break}}while(s.type!==c.EOF&&(s.type!==c.END_BLOCK||s.opened!==t))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==c.OPERATOR&&(r||this._flags.last_token.type===c.EQUALS||f(this._flags.last_token,d)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!y(this._previous_flags.mode)||this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.COMMA||((this._flags.last_token.type===c.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==c.OPERATOR&&this._flags.last_token.type!==c.START_EXPR&&(this._flags.last_token.type!==c.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(t),this.indent(),i||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},w.prototype.handle_end_block=function(t){for(this.handle_whitespace_and_comments(t);this._flags.mode===m.Statement;)this.restore_mode();var e=this._flags.last_token.type===c.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:"expand"===this._options.brace_style?e||this.print_newline():e||(y(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)},w.prototype.handle_word=function(t){if(t.type===c.RESERVED&&(h(t.text,["set","get"])&&this._flags.mode!==m.ObjectLiteral?t.type=c.WORD:"import"===t.text&&"("===this._tokens.peek().text?t.type=c.WORD:h(t.text,["as","from"])&&!this._flags.import_block?t.type=c.WORD:this._flags.mode===m.ObjectLiteral&&":"===this._tokens.peek().text&&(t.type=c.WORD)),this.start_of_statement(t)?f(this._flags.last_token,["var","let","const"])&&t.type===c.WORD&&(this._flags.declaration_statement=!0):!t.newlines||b(this._flags.mode)||this._flags.last_token.type===c.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===c.EQUALS||!this._options.preserve_newlines&&f(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(t):(this.handle_whitespace_and_comments(t),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(p(t,"while"))return this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&p(t,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===m.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&f(t,["case","default"]))return this.print_newline(),this._flags.last_token.type!==c.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(t),void(this._flags.in_case=!0);if(this._flags.last_token.type!==c.COMMA&&this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.EQUALS&&this._flags.last_token.type!==c.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t),p(t,"function"))return(h(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!h(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==c.OPERATOR)&&(this._output.just_added_blankline()||t.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD?f(this._flags.last_token,["get","set","new","export"])||f(this._flags.last_token,x)?this._output.space_before_token=!0:p(this._flags.last_token,"default")&&"export"===this._last_last_text?this._output.space_before_token=!0:"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===c.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!b(this._flags.mode)&&!y(this._flags.mode))&&this.print_newline(),this.print_token(t),void(this._flags.last_word=t.text);var e="NONE";this._flags.last_token.type===c.END_BLOCK?this._previous_flags.inline_frame?e="SPACE":f(t,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines?e="NEWLINE":(e="SPACE",this._output.space_before_token=!0):e="NEWLINE":this._flags.last_token.type===c.SEMICOLON&&this._flags.mode===m.BlockStatement?e="NEWLINE":this._flags.last_token.type===c.SEMICOLON&&b(this._flags.mode)?e="SPACE":this._flags.last_token.type===c.STRING?e="NEWLINE":this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD||"*"===this._flags.last_token.text&&(h(this._last_last_text,["function","yield"])||this._flags.mode===m.ObjectLiteral&&h(this._last_last_text,["{",","]))?e="SPACE":this._flags.last_token.type===c.START_BLOCK?e=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===c.END_EXPR&&(this._output.space_before_token=!0,e="NEWLINE"),f(t,l)&&")"!==this._flags.last_token.text&&(e=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),f(t,["else","catch","finally"])?(this._flags.last_token.type!==c.END_BLOCK||this._previous_flags.mode!==m.BlockStatement||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),"}"!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):"NEWLINE"===e?f(this._flags.last_token,d)?this._output.space_before_token=!0:"declare"===this._flags.last_token.text&&f(t,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==c.END_EXPR?this._flags.last_token.type===c.START_EXPR&&f(t,["var","let","const"])||":"===this._flags.last_token.text||(p(t,"if")&&p(t.previous,"else")?this._output.space_before_token=!0:this.print_newline()):f(t,l)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&y(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===e&&(this._output.space_before_token=!0),!t.previous||t.previous.type!==c.WORD&&t.previous.type!==c.RESERVED||(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===c.RESERVED&&("do"===t.text?this._flags.do_block=!0:"if"===t.text?this._flags.if_block=!0:"import"===t.text?this._flags.import_block=!0:this._flags.import_block&&p(t,"from")&&(this._flags.import_block=!1))},w.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);for(var e=this._tokens.peek();!(this._flags.mode!==m.Statement||this._flags.if_block&&p(e,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)},w.prototype.handle_string=function(t){this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR||this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):this.print_newline()),this.print_token(t)},w.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0},w.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?(b(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===m.ObjectLiteral||this._flags.mode===m.Statement&&this._flags.parent.mode===m.ObjectLiteral?(this._flags.mode===m.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)},w.prototype.handle_operator=function(t){var e="*"===t.text&&(f(this._flags.last_token,["function","yield"])||h(this._flags.last_token.type,[c.START_BLOCK,c.COMMA,c.END_BLOCK,c.SEMICOLON])),n=h(t.text,["-","+"])&&(h(this._flags.last_token.type,[c.START_BLOCK,c.START_EXPR,c.EQUALS,c.OPERATOR])||h(this._flags.last_token.text,l)||","===this._flags.last_token.text);if(this.start_of_statement(t));else{var i=!e;this.handle_whitespace_and_comments(t,i)}if(f(this._flags.last_token,d))return this._output.space_before_token=!0,void this.print_token(t);if("*"!==t.text||this._flags.last_token.type!==c.DOT)if("::"!==t.text){if(this._flags.last_token.type===c.OPERATOR&&h(this._options.operator_position,g)&&this.allow_wrap_or_preserved_newline(t),":"===t.text&&this._flags.in_case)return this.print_token(t),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==c.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var r=!0,o=!0,s=!1;if(":"===t.text?0===this._flags.ternary_depth?r=!1:(this._flags.ternary_depth-=1,s=!0):"?"===t.text&&(this._flags.ternary_depth+=1),!n&&!e&&this._options.preserve_newlines&&h(t.text,u)){var a=":"===t.text,p=a&&s,v=a&&!s;switch(this._options.operator_position){case _.before_newline:return this._output.space_before_token=!v,this.print_token(t),a&&!p||this.allow_wrap_or_preserved_newline(t),void(this._output.space_before_token=!0);case _.after_newline:return this._output.space_before_token=!0,!a||p?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),void(this._output.space_before_token=!0);case _.preserve_newline:return v||this.allow_wrap_or_preserved_newline(t),r=!(this._output.just_added_newline()||v),this._output.space_before_token=r,this.print_token(t),void(this._output.space_before_token=!0)}}if(e){this.allow_wrap_or_preserved_newline(t),r=!1;var y=this._tokens.peek();o=y&&h(y.type,[c.WORD,c.RESERVED])}else"..."===t.text?(this.allow_wrap_or_preserved_newline(t),r=this._flags.last_token.type===c.START_BLOCK,o=!1):(h(t.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==c.COMMA&&this._flags.last_token.type!==c.START_EXPR||this.allow_wrap_or_preserved_newline(t),r=!1,o=!1,!t.newlines||"--"!==t.text&&"++"!==t.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&b(this._flags.mode)&&(r=!0),this._flags.last_token.type===c.RESERVED?r=!0:this._flags.last_token.type===c.END_EXPR?r=!("]"===this._flags.last_token.text&&("--"===t.text||"++"===t.text)):this._flags.last_token.type===c.OPERATOR&&(r=h(t.text,["--","-","++","+"])&&h(this._flags.last_token.text,["--","-","++","+"]),h(t.text,["+","-"])&&h(this._flags.last_token.text,["--","++"])&&(o=!0)),(this._flags.mode!==m.BlockStatement||this._flags.inline_frame)&&this._flags.mode!==m.Statement||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||r,this.print_token(t),this._output.space_before_token=o}else this.print_token(t);else this.print_token(t)},w.prototype.handle_block_comment=function(t,e){return this._output.raw?(this._output.add_raw_token(t),void(t.directives&&"end"===t.directives.preserve&&(this._output.raw=this._options.test_output_raw))):t.directives?(this.print_newline(!1,e),this.print_token(t),"start"===t.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):o.newline.test(t.text)||t.newlines?void this.print_block_commment(t,e):(this._output.space_before_token=!0,this.print_token(t),void(this._output.space_before_token=!0))},w.prototype.print_block_commment=function(t,e){var n,i=function(t){for(var e=[],n=(t=t.replace(o.allLineBreaks,"\n")).indexOf("\n");-1!==n;)e.push(t.substring(0,n)),n=(t=t.substring(n+1)).indexOf("\n");return t.length&&e.push(t),e}(t.text),r=!1,s=!1,a=t.whitespace_before,l=a.length;if(this.print_newline(!1,e),this.print_token_line_indentation(t),this._output.add_token(i[0]),this.print_newline(!1,e),i.length>1){for(r=function(t,e){for(var n=0;n<t.length;n++)if(t[n].trim().charAt(0)!==e)return!1;return!0}(i=i.slice(1),"*"),s=function(t,e){for(var n,i=0,r=t.length;i<r;i++)if((n=t[i])&&0!==n.indexOf(e))return!1;return!0}(i,a),r&&(this._flags.alignment=1),n=0;n<i.length;n++)r?(this.print_token_line_indentation(t),this._output.add_token(i[n].replace(/^\s+/g,""))):s&&i[n]?(this.print_token_line_indentation(t),this._output.add_token(i[n].substring(l))):(this._output.current_line.set_indent(-1),this._output.add_token(i[n])),this.print_newline(!1,e);this._flags.alignment=0}},w.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)},w.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),f(this._flags.last_token,d)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)},w.prototype.handle_unknown=function(t,e){this.print_token(t),"\n"===t.text[t.text.length-1]&&this.print_newline(!1,e)},w.prototype.handle_eof=function(t){for(;this._flags.mode===m.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t)},t.exports.Beautifier=w},function(t,e,n){"use strict";function i(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function r(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,e){this.__indent_cache=new r(t,e),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new i(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}i.prototype.clone_empty=function(){var t=new i(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},i.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},i.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},i.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},i.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},i.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},i.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},i.prototype.is_empty=function(){return 0===this.__items.length},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf("\n");-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},i.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},i.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},i.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},i.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t},r.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},r.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=""),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},r.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},r.prototype.__add_column=function(){var t=this.__cache.length,e=0,n="";this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(" ")),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&("\n"===e[e.length-1]&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,e){for(var n=this.__lines.length-2;n>=0;){var r=this.__lines[n];if(r.is_empty())break;if(0!==r.item(0).indexOf(t)&&r.item(-1)!==e){this.__lines.splice(n+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},t.exports.Output=o},function(t,e,n){"use strict";t.exports.Token=function(t,e,n,i){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(t,e,n){"use strict";var i="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",r="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",o="(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+i+"])";e.identifier=new RegExp(o+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),e.identifierStart=new RegExp(o),e.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a"+i+r+"])+"),e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g")},function(t,e,n){"use strict";var i=n(6).Options,r=["before-newline","after-newline","preserve-newline"];function o(t){i.call(this,t,"js");var e=this.raw_options.brace_style||null;"expand-strict"===e?this.raw_options.brace_style="expand":"collapse-preserve-inline"===e?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var o=0;o<n.length;o++)"preserve-inline"===n[o]?this.brace_preserve_inline=!0:this.brace_style=n[o];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",r),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}o.prototype=new i,t.exports.Options=o},function(t,e,n){"use strict";function i(t,e){this.raw_options=r(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function r(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t)n[e.replace(/-/g,"_")]=t[e];return n}i.prototype._get_array=function(t,e){var n=this.raw_options[t],i=e||[];return"object"==typeof n?null!==n&&"function"==typeof n.concat&&(i=n.concat()):"string"==typeof n&&(i=n.split(/[^a-zA-Z0-9_\/\-]+/)),i},i.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},i.prototype._get_characters=function(t,e){var n=this.raw_options[t],i=e||"";return"string"==typeof n&&(i=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),i},i.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var i=parseInt(n,10);return isNaN(i)&&(i=e),i},i.prototype._get_selection=function(t,e,n){var i=this._get_selection_list(t,e,n);if(1!==i.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i[0]},i.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var i=this._get_array(t,n);if(!this._is_valid_selection(i,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i},i.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=i,t.exports.normalizeOpts=o,t.exports.mergeOpts=r},function(t,e,n){"use strict";var i=n(8).InputScanner,r=n(9).Tokenizer,o=n(9).TOKEN,s=n(13).Directives,a=n(4),l=n(12).Pattern,u=n(14).TemplatablePattern;function c(t,e){return-1!==e.indexOf(t)}var h={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:o.START,RAW:o.RAW,EOF:o.EOF},p=new s(/\/\*/,/\*\//),f=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,d=/[0-9]/,_=/[^\d\.]/,g=">>> === !== << && >= ** != == <= >> || < / - + > : & % ? ^ | *".split(" "),m=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ++ %= &= *= |= = ! ? > < : / ^ - + * & % ~ |";m=(m=m.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")).replace(/ /g,"|");var v,y=new RegExp(m),b="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),w=b.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),x=new RegExp("^(?:"+w.join("|")+")$"),k=function(t,e){r.call(this,t,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new l(this._input),i=new u(this._input).read_options(this._options);this.__patterns={template:i,identifier:i.starting_with(a.identifier).matching(a.identifierMatch),number:n.matching(f),punct:n.matching(y),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(a.lineBreak),shebang:n.starting_with(/#!/).until_after(a.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:i.until(/['\\\n\r\u2028\u2029]/),double_quote:i.until(/["\\\n\r\u2028\u2029]/),template_text:i.until(/[`\\$]/),template_expression:i.until(/[`}\\]/)}};(k.prototype=new r)._is_comment=function(t){return t.type===h.COMMENT||t.type===h.BLOCK_COMMENT||t.type===h.UNKNOWN},k.prototype._is_opening=function(t){return t.type===h.START_BLOCK||t.type===h.START_EXPR},k.prototype._is_closing=function(t,e){return(t.type===h.END_BLOCK||t.type===h.END_EXPR)&&e&&("]"===t.text&&"["===e.text||")"===t.text&&"("===e.text||"}"===t.text&&"{"===e.text)},k.prototype._reset=function(){v=!1},k.prototype._get_next_token=function(t,e){var n=null;this._readWhitespace();var i=this._input.peek();return null===i?this._create_token(h.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_string(i))||this._read_word(t))||this._read_singles(i))||this._read_comment(i))||this._read_regexp(i,t))||this._read_xml(i,t))||this._read_non_javascript(i))||this._read_punctuation())||this._create_token(h.UNKNOWN,this._input.next())},k.prototype._read_word=function(t){var e;return""!==(e=this.__patterns.identifier.read())?(e=e.replace(a.allLineBreaks,"\n"),t.type!==h.DOT&&(t.type!==h.RESERVED||"set"!==t.text&&"get"!==t.text)&&x.test(e)?"in"===e||"of"===e?this._create_token(h.OPERATOR,e):this._create_token(h.RESERVED,e):this._create_token(h.WORD,e)):""!==(e=this.__patterns.number.read())?this._create_token(h.WORD,e):void 0},k.prototype._read_singles=function(t){var e=null;return"("===t||"["===t?e=this._create_token(h.START_EXPR,t):")"===t||"]"===t?e=this._create_token(h.END_EXPR,t):"{"===t?e=this._create_token(h.START_BLOCK,t):"}"===t?e=this._create_token(h.END_BLOCK,t):";"===t?e=this._create_token(h.SEMICOLON,t):"."===t&&_.test(this._input.peek(1))?e=this._create_token(h.DOT,t):","===t&&(e=this._create_token(h.COMMA,t)),e&&this._input.next(),e},k.prototype._read_punctuation=function(){var t=this.__patterns.punct.read();if(""!==t)return"="===t?this._create_token(h.EQUALS,t):this._create_token(h.OPERATOR,t)},k.prototype._read_non_javascript=function(t){var e="";if("#"===t){if(this._is_first_token()&&(e=this.__patterns.shebang.read()))return this._create_token(h.UNKNOWN,e.trim()+"\n");if(e=this.__patterns.include.read())return this._create_token(h.UNKNOWN,e.trim()+"\n");t=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(d)){do{n+=t=this._input.next()}while(this._input.hasNext()&&"#"!==t&&"="!==t);return"#"===t||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(h.WORD,n)}this._input.back()}else if("<"===t&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(a.newline);)e+=this._input.next();return v=!0,this._create_token(h.COMMENT,e)}}else if(v&&"-"===t&&(e=this.__patterns.html_comment_end.read()))return v=!1,this._create_token(h.COMMENT,e);return null},k.prototype._read_comment=function(t){var e=null;if("/"===t){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var i=p.get_directives(n);i&&"start"===i.ignore&&(n+=p.readIgnored(this._input)),n=n.replace(a.allLineBreaks,"\n"),(e=this._create_token(h.BLOCK_COMMENT,n)).directives=i}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),e=this._create_token(h.COMMENT,n))}return e},k.prototype._read_string=function(t){if("`"===t||"'"===t||'"'===t){var e=this._input.next();return this.has_char_escapes=!1,e+="`"===t?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=function(t){for(var e="",n=0,r=new i(t),o=null;r.hasNext();)if((o=r.match(/([\s]|[^\\]|\\\\)+/g))&&(e+=o[0]),"\\"===r.peek()){if(r.next(),"x"===r.peek())o=r.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==r.peek()){e+="\\",r.hasNext()&&(e+=r.next());continue}o=r.match(/u([0-9A-Fa-f]{4})/g)}if(!o)return t;if((n=parseInt(o[1],16))>126&&n<=255&&0===o[0].indexOf("x"))return t;if(n>=0&&n<32){e+="\\"+o[0];continue}e+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return e}(e)),this._input.peek()===t&&(e+=this._input.next()),e=e.replace(a.allLineBreaks,"\n"),this._create_token(h.STRING,e)}return null},k.prototype._allow_regexp_or_xml=function(t){return t.type===h.RESERVED&&c(t.text,["return","case","throw","else","do","typeof","yield"])||t.type===h.END_EXPR&&")"===t.text&&t.opened.previous.type===h.RESERVED&&c(t.opened.previous.text,["if","while","for"])||c(t.type,[h.COMMENT,h.START_EXPR,h.START_BLOCK,h.START,h.END_BLOCK,h.OPERATOR,h.EQUALS,h.EOF,h.SEMICOLON,h.COMMA])},k.prototype._read_regexp=function(t,e){if("/"===t&&this._allow_regexp_or_xml(e)){for(var n=this._input.next(),i=!1,r=!1;this._input.hasNext()&&(i||r||this._input.peek()!==t)&&!this._input.testChar(a.newline);)n+=this._input.peek(),i?i=!1:(i="\\"===this._input.peek(),"["===this._input.peek()?r=!0:"]"===this._input.peek()&&(r=!1)),this._input.next();return this._input.peek()===t&&(n+=this._input.next(),n+=this._input.read(a.identifier)),this._create_token(h.STRING,n)}return null},k.prototype._read_xml=function(t,e){if(this._options.e4x&&"<"===t&&this._allow_regexp_or_xml(e)){var n="",i=this.__patterns.xml.read_match();if(i){for(var r=i[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),o=0===r.indexOf("{"),s=0;i;){var l=!!i[1],u=i[2];if(!(i[i.length-1]||"![CDATA["===u.slice(0,8))&&(u===r||o&&u.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(l?--s:++s),n+=i[0],s<=0)break;i=this.__patterns.xml.read_match()}return i||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(a.allLineBreaks,"\n"),this._create_token(h.STRING,n)}}return null},k.prototype._read_string_recursive=function(t,e,n){var i,r;"'"===t?r=this.__patterns.single_quote:'"'===t?r=this.__patterns.double_quote:"`"===t?r=this.__patterns.template_text:"}"===t&&(r=this.__patterns.template_expression);for(var o=r.read(),s="";this._input.hasNext();){if((s=this._input.next())===t||!e&&a.newline.test(s)){this._input.back();break}"\\"===s&&this._input.hasNext()?("x"===(i=this._input.peek())||"u"===i?this.has_char_escapes=!0:"\r"===i&&"\n"===this._input.peek(1)&&this._input.next(),s+=this._input.next()):n&&("${"===n&&"$"===s&&"{"===this._input.peek()&&(s+=this._input.next()),n===s&&(s+="`"===t?this._read_string_recursive("}",e,"`"):this._read_string_recursive("`",e,"${"),this._input.hasNext()&&(s+=this._input.next()))),o+=s+=r.read()}return o},t.exports.Tokenizer=k,t.exports.TOKEN=h,t.exports.positionable_operators=g.slice(),t.exports.line_starters=b.slice()},function(t,e,n){"use strict";var i=RegExp.prototype.hasOwnProperty("sticky");function r(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}r.prototype.restart=function(){this.__position=0},r.prototype.back=function(){this.__position>0&&(this.__position-=1)},r.prototype.hasNext=function(){return this.__position<this.__input_length},r.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},r.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},r.prototype.__match=function(t,e){t.lastIndex=e;var n=t.exec(this.__input);return!n||i&&t.sticky||n.index!==e&&(n=null),n},r.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},r.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},r.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},r.prototype.read=function(t,e,n){var i,r="";return t&&(i=this.match(t))&&(r+=i[0]),!e||!i&&t||(r+=this.readUntil(e,n)),r},r.prototype.readUntil=function(t,e){var n,i=this.__position;t.lastIndex=this.__position;var r=t.exec(this.__input);return r?(i=r.index,e&&(i+=r[0].length)):i=this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n},r.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},r.prototype.get_regexp=function(t,e){var n=null,r="g";return e&&i&&(r="y"),"string"==typeof t&&""!==t?n=new RegExp(t,r):t&&(n=new RegExp(t.source,r)),n},r.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},r.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},r.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=r},function(t,e,n){"use strict";var i=n(8).InputScanner,r=n(3).Token,o=n(10).TokenStream,s=n(11).WhitespacePattern,a={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},l=function(t,e){this._input=new i(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};l.prototype.tokenize=function(){var t;this._input.restart(),this.__tokens=new o,this._reset();for(var e=new r(a.START,""),n=null,i=[],s=new o;e.type!==a.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)s.add(t),t=this._get_next_token(e,n);s.isEmpty()||(t.comments_before=s,s=new o),t.parent=n,this._is_opening(t)?(i.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=i.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(a.RAW,n):this._create_token(a.EOF,"")},l.prototype._is_comment=function(t){return!1},l.prototype._is_opening=function(t){return!1},l.prototype._is_closing=function(t,e){return!1},l.prototype._create_token=function(t,e){return new r(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},t.exports.Tokenizer=l,t.exports.TOKEN=a},function(t,e,n){"use strict";function i(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}i.prototype.restart=function(){this.__position=0},i.prototype.isEmpty=function(){return 0===this.__tokens_length},i.prototype.hasNext=function(){return this.__position<this.__tokens_length},i.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},i.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},i.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=i},function(t,e,n){"use strict";var i=n(12).Pattern;function r(t,e){i.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}r.prototype=new i,r.prototype.__set_whitespace_patterns=function(t,e){t+="\\t ",e+="\\n\\r",this._match_pattern=this._input.get_regexp("["+t+e+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")},r.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t=this._input.read(this._match_pattern);if(" "===t)this.whitespace_before_token=" ";else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t},r.prototype.matching=function(t,e){var n=this._create();return n.__set_whitespace_patterns(t,e),n._update(),n},r.prototype._create=function(){return new r(this._input,this)},r.prototype.__split=function(t,e){t.lastIndex=0;for(var n=0,i=[],r=t.exec(e);r;)i.push(e.substring(n,r.index)),n=r.index+r[0].length,r=t.exec(e);return n<e.length?i.push(e.substring(n,e.length)):i.push(""),i},t.exports.WhitespacePattern=r},function(t,e,n){"use strict";function i(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}i.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},i.prototype.read_match=function(){return this._input.match(this._match_pattern)},i.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},i.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},i.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},i.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){},t.exports.Pattern=i},function(t,e,n){"use strict";function i(t,e){t="string"==typeof t?t:t.source,e="string"==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}i.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},i.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=i},function(t,e,n){"use strict";var i=n(12).Pattern,r={django:!1,erb:!1,handlebars:!1,php:!1};function o(t,e){i.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},r),this._excluded=Object.assign({},r),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var n=new i(t);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/)}}o.prototype=new i,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},o.prototype.read_options=function(t){var e=this._create();for(var n in r)e._disabled[n]=-1===t.templating.indexOf(n);return e._update(),e},o.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},o.prototype.read=function(){var t="";t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},o.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+t.join("|")+")")},o.prototype._read_template=function(){var t="",e=this._input.peek();if("<"===e){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(t=t||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(t=t||this.__patterns.erb.read())}else"{"===e&&(this._disabled.handlebars||this._excluded.handlebars||(t=(t=(t=t||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=(t=t||this.__patterns.django_comment.read())||this.__patterns.django.read())));return t},t.exports.TemplatablePattern=o}]),void 0===(i=function(){return{js_beautify:r}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,r;r=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=15)}([,,function(t,e,n){"use strict";function i(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function r(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,e){this.__indent_cache=new r(t,e),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new i(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}i.prototype.clone_empty=function(){var t=new i(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},i.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},i.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},i.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},i.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},i.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},i.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},i.prototype.is_empty=function(){return 0===this.__items.length},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf("\n");-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},i.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},i.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},i.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},i.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t},r.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},r.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=""),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},r.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},r.prototype.__add_column=function(){var t=this.__cache.length,e=0,n="";this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(" ")),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&("\n"===e[e.length-1]&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,e){for(var n=this.__lines.length-2;n>=0;){var r=this.__lines[n];if(r.is_empty())break;if(0!==r.item(0).indexOf(t)&&r.item(-1)!==e){this.__lines.splice(n+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},t.exports.Output=o},,,,function(t,e,n){"use strict";function i(t,e){this.raw_options=r(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function r(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t)n[e.replace(/-/g,"_")]=t[e];return n}i.prototype._get_array=function(t,e){var n=this.raw_options[t],i=e||[];return"object"==typeof n?null!==n&&"function"==typeof n.concat&&(i=n.concat()):"string"==typeof n&&(i=n.split(/[^a-zA-Z0-9_\/\-]+/)),i},i.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},i.prototype._get_characters=function(t,e){var n=this.raw_options[t],i=e||"";return"string"==typeof n&&(i=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),i},i.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var i=parseInt(n,10);return isNaN(i)&&(i=e),i},i.prototype._get_selection=function(t,e,n){var i=this._get_selection_list(t,e,n);if(1!==i.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i[0]},i.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var i=this._get_array(t,n);if(!this._is_valid_selection(i,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i},i.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=i,t.exports.normalizeOpts=o,t.exports.mergeOpts=r},,function(t,e,n){"use strict";var i=RegExp.prototype.hasOwnProperty("sticky");function r(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}r.prototype.restart=function(){this.__position=0},r.prototype.back=function(){this.__position>0&&(this.__position-=1)},r.prototype.hasNext=function(){return this.__position<this.__input_length},r.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},r.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},r.prototype.__match=function(t,e){t.lastIndex=e;var n=t.exec(this.__input);return!n||i&&t.sticky||n.index!==e&&(n=null),n},r.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},r.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},r.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},r.prototype.read=function(t,e,n){var i,r="";return t&&(i=this.match(t))&&(r+=i[0]),!e||!i&&t||(r+=this.readUntil(e,n)),r},r.prototype.readUntil=function(t,e){var n,i=this.__position;t.lastIndex=this.__position;var r=t.exec(this.__input);return r?(i=r.index,e&&(i+=r[0].length)):i=this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n},r.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},r.prototype.get_regexp=function(t,e){var n=null,r="g";return e&&i&&(r="y"),"string"==typeof t&&""!==t?n=new RegExp(t,r):t&&(n=new RegExp(t.source,r)),n},r.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},r.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},r.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=r},,,,,function(t,e,n){"use strict";function i(t,e){t="string"==typeof t?t:t.source,e="string"==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}i.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},i.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=i},,function(t,e,n){"use strict";var i=n(16).Beautifier,r=n(17).Options;t.exports=function(t,e){return new i(t,e).beautify()},t.exports.defaultOptions=function(){return new r}},function(t,e,n){"use strict";var i=n(17).Options,r=n(2).Output,o=n(8).InputScanner,s=new(0,n(13).Directives)(/\/\*/,/\*\//),a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,u=/\s/,c=/(?:\s|\n)+/g,h=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,p=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function f(t,e){this._source_text=t||"",this._options=new i(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}f.prototype.eatString=function(t){var e="";for(this._ch=this._input.next();this._ch;){if(e+=this._ch,"\\"===this._ch)e+=this._input.next();else if(-1!==t.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return e},f.prototype.eatWhitespace=function(t){for(var e=u.test(this._input.peek()),n=!0;u.test(this._input.peek());)this._ch=this._input.next(),t&&"\n"===this._ch&&(this._options.preserve_newlines||n)&&(n=!1,this._output.add_new_line(!0));return e},f.prototype.foundNestedPseudoClass=function(){for(var t=0,e=1,n=this._input.peek(e);n;){if("{"===n)return!0;if("("===n)t+=1;else if(")"===n){if(0===t)return!1;t-=1}else if(";"===n||"}"===n)return!1;e++,n=this._input.peek(e)}return!1},f.prototype.print_string=function(t){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(t)},f.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)},f.prototype.indent=function(){this._indentLevel++},f.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},f.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;"auto"===e&&(e="\n",t&&a.test(t||"")&&(e=t.match(a)[0]));var n=(t=t.replace(l,"\n")).match(/^[\t ]*/)[0];this._output=new r(this._options,n),this._input=new o(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var i,f,d=0,_=!1,g=!1,m=!1,v=!1,y=!1,b=this._ch;i=""!==this._input.read(c),f=b,this._ch=this._input.next(),"\\"===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),b=this._ch,this._ch;)if("/"===this._ch&&"*"===this._input.peek()){this._output.add_new_line(),this._input.back();var w=this._input.read(h),x=s.get_directives(w);x&&"start"===x.ignore&&(w+=s.readIgnored(this._input)),this.print_string(w),this.eatWhitespace(!0),this._output.add_new_line()}else if("/"===this._ch&&"/"===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(p)),this.eatWhitespace(!0);else if("@"===this._ch)if(this.preserveSingleSpace(i),"{"===this._input.peek())this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var k=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);k.match(/[ :]$/)&&(k=this.eatString(": ").replace(/\s$/,""),this.print_string(k),this._output.space_before_token=!0),"extend"===(k=k.replace(/\s$/,""))?v=!0:"import"===k&&(y=!0),k in this.NESTED_AT_RULE?(this._nestedLevel+=1,k in this.CONDITIONAL_GROUP_RULE&&(m=!0)):_||0!==d||-1===k.indexOf(":")||(g=!0,this.indent())}else"#"===this._ch&&"{"===this._input.peek()?(this.preserveSingleSpace(i),this.print_string(this._ch+this.eatString("}"))):"{"===this._ch?(g&&(g=!1,this.outdent()),this.indent(),this._output.space_before_token=!0,this.print_string(this._ch),m?(m=!1,_=this._indentLevel>this._nestedLevel):_=this._indentLevel>=this._nestedLevel,this._options.newline_between_rules&&_&&this._output.previous_line&&"{"!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above("/",","),this.eatWhitespace(!0),this._output.add_new_line()):"}"===this._ch?(this.outdent(),this._output.add_new_line(),"{"===f&&this._output.trim(!0),y=!1,v=!1,g&&(this.outdent(),g=!1),this.print_string(this._ch),_=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&"}"!==this._input.peek()&&this._output.add_new_line(!0)):":"===this._ch?!_&&!m||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||v||0!==d?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),g||(g=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):'"'===this._ch||"'"===this._ch?(this.preserveSingleSpace(i),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):";"===this._ch?0===d?(g&&(this.outdent(),g=!1),v=!1,y=!1,this.print_string(this._ch),this.eatWhitespace(!0),"/"!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):"("===this._ch?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),d++,this.indent(),this._ch=this._input.next(),")"===this._ch||'"'===this._ch||"'"===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),d&&(d--,this.outdent()))):(this.preserveSingleSpace(i),this.print_string(this._ch),this.eatWhitespace(),d++,this.indent()):")"===this._ch?(d&&(d--,this.outdent()),this.print_string(this._ch)):","===this._ch?(this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||g||0!==d||y?this._output.space_before_token=!0:this._output.add_new_line()):">"!==this._ch&&"+"!==this._ch&&"~"!==this._ch||g||0!==d?"]"===this._ch?this.print_string(this._ch):"["===this._ch?(this.preserveSingleSpace(i),this.print_string(this._ch)):"="===this._ch?(this.eatWhitespace(),this.print_string("="),u.test(this._ch)&&(this._ch="")):"!"!==this._ch||this._input.lookBack("\\")?(this.preserveSingleSpace(i),this.print_string(this._ch)):(this.print_string(" "),this.print_string(this._ch)):this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&u.test(this._ch)&&(this._ch=""));return this._output.get_code(e)},t.exports.Beautifier=f},function(t,e,n){"use strict";var i=n(6).Options;function r(t){i.call(this,t,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var e=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||e}r.prototype=new i,t.exports.Options=r}]),void 0===(i=function(){return{css_beautify:r}}.apply(e,[]))||(t.exports=i)},function(t,e,n){"use strict";e.a='\n<view class="container" id="main">\n  <view class="header">\n    <bitmaptext font="fnt_number-export" class="title" value="等级"></bitmaptext>\n  </view>\n  <view class="rankList">\n        <scrollview class="list">\n            {{~it.data :item:index}}\n                {{? index % 2 === 1 }}\n                <view class="listItem listItemOld">\n                {{?}}\n                {{? index % 2 === 0 }}\n                <view class="listItem">\n                {{?}}\n                    <bitmaptext font="fnt_number-export" class="listItemNum" value="{{= index + 1}}"></bitmaptext>\n                    <image class="listHeadImg" src="{{= item.avatarUrl }}"></image>\n                  <text class="listItemName" value="{{= item.nickname}}"></text>\n                  <text class="listItemScore" value="{{= item.rankScore}}"></text>\n                  <text class="listScoreUnit" value="分"></text>\n                </view>\n            {{~}}\n        </scrollview>\n        <text class="listTips" value="仅展示前50位好友排名"></text>\n\n        <view class="listItem selfListItem">\n            <bitmaptext font="fnt_number-export" class="listItemNum" value="{{= it.selfIndex}}"></bitmaptext>\n            <image class="listHeadImg" src="{{= it.self.avatarUrl }}"></image>\n            <text class="listItemName" value="{{= it.self.nickname}}"></text>\n            <text class="listItemScore" value="{{= item.rankScore}}"></text>\n            <text class="listScoreUnit" value="分"></text>\n        </view>\n    </view>\n</view>\n'},function(t,e,n){"use strict";e.a="window.styleValue = {\n    container: {\n        width: 960,\n        height: 1410,\n        borderRadius: 12,\n    },\n\n    header: {\n        height: 120,\n        width: 960,\n        flexDirection: 'column',\n        alignItems: 'center',\n      \tbackgroundColor: '#ffffff',\n        borderBottomWidth: 0.5,\n        borderColor: 'rgba(0, 0, 0, 0.3)',\n    },\n\n    title: {\n        width: 144,\n        fontSize: 48,\n        height: 120,\n        lineHeight: 50,\n        textAlign: 'center',\n        fontWeight: 'bold',\n        borderBottomWidth: 6,\n        borderColor: '#000000',\n    },\n\n    rankList: {\n        width: 960,\n        height: 1000,\n      \tbackgroundColor: '#ffffff',\n    },\n\n    list: {\n        width          : 960,\n        height         : 950,\n      \tbackgroundColor: '#ffffff',\n        marginTop: 30,\n    },\n\n    listItem: {\n        backgroundColor: '#F7F7F7',\n        width: 960,\n        height: 150,\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n\n    listItemOld: {\n       backgroundColor: '#ffffff',\n    },\n\n    listItemNum: {\n        fontSize: 32,\n        fontWeight: 'bold',\n        color: '#452E27',\n        lineHeight: 45,\n        height: 150,\n        textAlign: 'center',\n        width: 120,\n    },\n\n    listHeadImg: {\n        borderRadius: 6,\n        width: 90,\n        height: 90,\n    },\n\n    listItemScore: {\n        fontSize: 48,\n        fontWeight: 'bold',\n        marginLeft : 10,\n        height: 150,\n        lineHeight: 150,\n        width: 300,\n        textAlign: 'right',\n    },\n\n    listItemName:{\n        fontSize: 36,\n        height: 150,\n        lineHeight: 150,\n        width: 350,\n        marginLeft: 30,\n    },\n\n    listScoreUnit: {\n        opacity: 0.5,\n        color: '#000000',\n        fontSize: 30,\n        height: 150,\n        lineHeight: 150,\n        marginLeft: 8,\n    },\n\n    selfListItem: {\n        borderRadius: 20,\n        marginTop: 50,\n        backgroundColor: '#ffffff',\n    },\n\n  \tlistTips: {\n      \twidth: 960,\n        height: 90,\n      \tlineHeight: 90,\n      \ttextAlign: 'center',\n      \tfontSize: 30,\n      \tcolor: 'rgba(0,0,0,0.5)',\n      \tbackgroundColor: '#ffffff',\n        borderRadius: 10,\n    }\n}\n"},function(t,e,n){"use strict";setTimeout((function(){Layout.registBitMapFont("fnt_number-export","https://res.wx.qq.com/wechatgame/product/webpack/userupload/20200314/fnt_number-export.png",'info face="fnt_number-export" size=50 bold=0 italic=0 charset="" unicode=0 stretchH=100 smooth=1 aa=1 padding=0,0,0,0 spacing=1,1\ncommon lineHeight=60 base=26 scaleW=190 scaleH=181 pages=1 packed=0 alphaChnl=1 redChnl=0 greenChnl=0 blueChnl=0\npage id=0 file="fnt_number-export.png"\nchars count=15\nchar id=31561 x=0 y=61 width=60 height=61 xoffset=0 yoffset=2 xadvance=57 page=0 chnl=0 letter="等"\nchar id=32423 x=0 y=0 width=62 height=60 xoffset=0 yoffset=2 xadvance=59 page=0 chnl=0 letter="级"\nchar id=46 x=168 y=116 width=21 height=21 xoffset=0 yoffset=39 xadvance=18 page=0 chnl=0 letter="."\nchar id=49 x=145 y=0 width=27 height=57 xoffset=0 yoffset=3 xadvance=24 page=0 chnl=0 letter="1"\nchar id=50 x=44 y=123 width=41 height=57 xoffset=0 yoffset=3 xadvance=38 page=0 chnl=0 letter="2"\nchar id=51 x=102 y=58 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="3"\nchar id=52 x=143 y=58 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="4"\nchar id=53 x=0 y=123 width=43 height=57 xoffset=0 yoffset=3 xadvance=40 page=0 chnl=0 letter="5"\nchar id=54 x=127 y=116 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="6"\nchar id=55 x=86 y=119 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="7"\nchar id=56 x=63 y=0 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="8"\nchar id=57 x=104 y=0 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="9"\nchar id=48 x=61 y=61 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="0"\nchar id=32 x=0 y=0 width=0 height=0 xoffset=0 yoffset=0 xadvance=0 page=0 chnl=0 letter=" "\nchar id=9 x=0 y=0 width=0 height=0 xoffset=0 yoffset=0 xadvance=0 page=0 chnl=0 letter="\t"\n\nkernings count=0')}),0),e.a="\n/**\n  * xml为编辑器实例，挂载到window对象，通过xml.getValue可以拿到模板字符串\n  * style为编辑器实例，挂载到window对象，通过style.getValue可以拿到样式对象的字符串值\n  * 控制台默认\n  */\nlet xmlValue   = xml.getValue();\nlet styleValue = style.getValue();\n\n// 创建mock数据\nlet item = {\n    nickname: \"zim\",\n    rankScore: 1,\n    avatarUrl: 'https://res.wx.qq.com/wechatgame/product/webpack/userupload/20191119/wegoing.jpeg',\n    starSum: 1,\n};\nlet datasource =  {\n    data     :[],\n    selfIndex: 0,\n    self     : item\n}\nfor ( let i = 0; i < 20;i++ ) {\n    var cp = JSON.parse(JSON.stringify(item));\n    cp.rankScore = Math.floor(Math.random()*1000+1)\n    cp.starSum   = i + 1;\n    datasource.data.push(cp);\n}\n\n// 将XML模板编译成XML字符串\nlet tempFn     = doT.template(xmlValue);\nlet resultText = tempFn(datasource);\n\n// 获取元素的绝对位置坐标（像对于页面左上角）\nfunction getElementPagePosition(element){\n  //计算x坐标\n  var actualLeft = element.offsetLeft;\n  var current = element.offsetParent;\n  while (current !== null){\n    actualLeft += current.offsetLeft;\n    current = current.offsetParent;\n  }\n  //计算y坐标\n  var actualTop = element.offsetTop;\n  var current = element.offsetParent;\n  while (current !== null){\n    actualTop += (current.offsetTop+current.clientTop);\n    current = current.offsetParent;\n  }\n  //返回结果\n  return {x: actualLeft, y: actualTop}\n}\n\nlet canvas = document.getElementById('canvas');\nlet context = canvas.getContext('2d');\n\n// 设置canvas的尺寸和样式的container比例一致\ncanvas.style.width = 300 + 'px';\ncanvas.style.height = 1410/ 960* 300 + 'px';\ncanvas.width = 960;\ncanvas.height = 1410;\n\n\n\nfunction init() {\n    let pos = getElementPagePosition(canvas);\n    // 每次初始化之前先执行清理逻辑保证内存不会一直增长\n    Layout.clear();\n    // 初始化引擎\n    Layout.init(resultText, eval(styleValue));\n    Layout.updateViewPort({\n        x     : pos.x,\n        y     : pos.y,\n        width : canvas.offsetWidth,\n        height: canvas.offsetHeight,\n    });\n\n    Layout.layout(context);\n\n}\n\ninit();\nwindow.onresize = init;\n"},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===i(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"EE",(function(){return b}));var r=n(1),o=n(4),s=n(3),a=n.n(s),l=n(5),u=n.n(l),c=n(6),h=n(7),p=n.n(h),f=n(13),d=n(15);function _(t){return(_="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=new a.a,w=new o.default("imgPool"),x=new o.default("canvasPool"),k={view:d.View,text:d.Text,image:d.Image,scrollview:d.ScrollView,bitmaptext:d.BitMapText},C=function t(e,n){var i=this,r=k[e.name],o=e.children||[],s=e.attr||{},a=s.id||"",l=Object.keys(s).reduce((function(t,e){var i=s[e],r=e;return"id"===e?(t.style=Object.assign(t.style||{},n[a]||{}),t):"class"===e?(t.style=i.split(/\s+/).reduce((function(t,e){return Object.assign(t,n[e])}),t.style||{}),t):(t[r]="true"===i||"false"!==i&&i,t)}),{});l.idName=a,l.className=s.class||"";var u=new r(l);return u.root=this,o.forEach((function(e){var r=t.call(i,e,n);u.add(r)})),u},T=function t(e){return Object.keys(e.children).map((function(t){return e.children[t]})).map((function(e){return{id:e.id,name:e.name,style:e.style,children:t(e)}}))};function S(t,e){var n=this;t.forEach((function(t){var i=e.find((function(e){return e.id===t.id}));i.layoutBox=i.layoutBox||{},["left","top","width","height"].forEach((function(e){i.layoutBox[e]=t.layout[e]})),i.parent?(i.layoutBox.absoluteX=(i.parent.layoutBox.absoluteX||0)+i.layoutBox.left,i.layoutBox.absoluteY=(i.parent.layoutBox.absoluteY||0)+i.layoutBox.top):(i.layoutBox.absoluteX=i.layoutBox.left,i.layoutBox.absoluteY=i.layoutBox.top),i.layoutBox.originalAbsoluteY=i.layoutBox.absoluteY,"ScrollView"===i.type&&i.updateRenderPort(n.renderport),S.call(n,t.children,i.children)}))}var O=new(function(t){function e(){var t,n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.style,s=r.name;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(i=m(e).call(this,{style:o,id:0,name:s}))||"object"!==_(i)&&"function"!=typeof i?v(n):i).hasEventHandler=!1,t.elementTree=null,t.renderContext=null,t.debugInfo={},t.renderport={},t.viewport={},t.touchStart=t.eventHandler("touchstart").bind(v(t)),t.touchMove=t.eventHandler("touchmove").bind(v(t)),t.touchEnd=t.eventHandler("touchend").bind(v(t)),t.touchCancel=t.eventHandler("touchcancel").bind(v(t)),t.version="0.0.1",t.touchMsg={},t.hasViewPortSet=!1,t.realLayoutBox={realX:0,realY:0},t.state=c.STATE.UNINIT,t.bitMapFonts=[],t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,t),n=e,(i=[{key:"updateViewPort",value:function(t){this.viewport.width=t.width||0,this.viewport.height=t.height||0,this.viewport.x=t.x||0,this.viewport.y=t.y||0,this.realLayoutBox={realX:this.viewport.x,realY:this.viewport.y},this.hasViewPortSet=!0}},{key:"init",value:function(t,e,n){var i=new Date,r={attributeNamePrefix:"",attrNodeName:"attr",textNodeName:"#text",ignoreAttributes:!1,ignoreNameSpace:!0,allowBooleanAttributes:!0,parseNodeValue:!1,parseAttributeValue:!1,trimValues:!0,parseTrueNumberOnly:!1};n&&"function"==typeof n&&(r.attrValueProcessor=n);var o=p.a.parse(t,r,!0).children[0];this.debugInfo.xmlTree=new Date-i,this.layoutTree=C.call(this,o,e),this.debugInfo.layoutTree=new Date-i,this.add(this.layoutTree);var s={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:T(this)};u()(s),this.elementTree=s,this.debugInfo.renderTree=new Date-i;var a=this.children[0];void 0===a.style.width||void 0===a.style.height?console.error("Please set width and height property for root element"):(this.renderport.width=a.style.width,this.renderport.height=a.style.height),this.state=c.STATE.INITED}},{key:"layout",value:function(t){var e=new Date;this.renderContext=t,this.renderContext&&this.renderContext.clearRect(0,0,this.renderport.width,this.renderport.height),this.hasViewPortSet||console.error("Please invoke method `updateViewPort` before method `layout`"),S.call(this,this.elementTree.children,this.children),this.debugInfo.layoutChildren=new Date-e,function t(e,n,i){e.forEach((function(e){var r=n.find((function(t){return t.id===e.id}));r.realLayoutBox=r.realLayoutBox||{},["left","top","width","height"].forEach((function(t){r.realLayoutBox[t]=e.layout[t]*i})),r.parent?(r.realLayoutBox.realX=(r.parent.realLayoutBox.realX||0)+r.realLayoutBox.left,Object.defineProperty(r.realLayoutBox,"realY",{configurable:!0,enumerable:!0,get:function(){var t=(r.parent.realLayoutBox.realY||0)+r.realLayoutBox.top;return r.parent&&"ScrollView"===r.parent.type&&(t-=r.parent.top*i),t}})):(r.realLayoutBox.realX=r.realLayoutBox.left,r.realLayoutBox.realY=r.realLayoutBox.top),t(e.children,r.children,i)}))}(this.elementTree.children,this.children,this.viewport.width/this.renderport.width),this.debugInfo.updateRealLayout=new Date-e,function t(e,n,i){e.map((function(e){var r=n.find((function(t){return t.id===e.id}));if("ScrollView"!==r.type)return r.insert(i),t(e.children,r.children,i);r.insertScrollView(i)}))}(this.elementTree.children,this.children,t),this.debugInfo.renderChildren=new Date-e,this.bindEvents(),this.state=c.STATE.RENDERED}},{key:"getChildByPos",value:function(t,e,n){for(var i=Object.keys(t.children),r=0;r<i.length;r++){var o=t.children[i[r]],s=o.realLayoutBox;if(s.realX<=e&&e<=s.realX+s.width&&s.realY<=n&&n<=s.realY+s.height)return Object.keys(o.children).length?this.getChildByPos(o,e,n):o}return t}},{key:"eventHandler",value:function(t){return function(e){if(this.elementTree){var n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]||e;if(n&&n.pageX&&n.pageY){n.timeStamp||(n.timeStamp=e.timeStamp);var i=n&&this.getChildByPos(this,n.pageX,n.pageY);i&&i.emit(t,e),"touchstart"!==t&&"touchend"!==t||(this.touchMsg[t]=n),"touchend"===t&&Object(c.isClick)(this.touchMsg)&&i&&i.emit("click",e)}}}}},{key:"bindEvents",value:function(){this.hasEventHandler||(this.hasEventHandler=!0,"undefined"!=typeof wx?(wx.onTouchStart(this.touchStart),wx.onTouchMove(this.touchMove),wx.onTouchEnd(this.touchEnd),wx.onTouchCancel(this.touchCancel)):(document.onmousedown=this.touchStart,document.onmousemove=this.touchMove,document.onmouseup=this.touchEnd,document.onmouseleave=this.touchEnd))}},{key:"emit",value:function(t,e){b.emit(t,e)}},{key:"on",value:function(t,e){b.on(t,e)}},{key:"once",value:function(t,e){b.once(t,e)}},{key:"off",value:function(t,e){b.off(t,e)}},{key:"getElementsById",value:function(t){return function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return Object.keys(e.children).forEach((function(r){var o=e.children[r];o.idName===i&&n.push(o),Object.keys(o.children).length&&t(o,n,i)})),n}(this,[],t)}},{key:"getElementsByClassName",value:function(t){return function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return Object.keys(e.children).forEach((function(r){var o=e.children[r];o.className.split(/\s+/).indexOf(i)>-1&&n.push(o),Object.keys(o.children).length&&t(o,n,i)})),n}(this,[],t)}},{key:"destroyAll",value:function(t){var e=this;t||(t=this);var n=t.children;Object.keys(n).forEach((function(t){var i=n[t];i.destroy(),e.destroyAll(i),i.destroySelf&&i.destroySelf()}))}},{key:"clear",value:function(){var t=this;this.destroyAll(),this.elementTree=null,this.children=[],this.layoutTree={},this.state=c.STATE.CLEAR,Object.keys(x.pool).forEach((function(t){var e=x.get(t);e.context&&e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.elements=[],e.canvas=null,e.context=null})),this.renderContext&&this.renderContext.clearRect(0,0,this.renderContext.canvas.width,this.renderContext.canvas.height),["touchstart","touchmove","touchcancel","touchend","click","repaint"].forEach((function(e){t.off(e)})),this.EE.off("image__render__done")}},{key:"clearPool",value:function(){w.clear(),x.clear()}},{key:"clearAll",value:function(){this.clear(),this.clearPool()}},{key:"loadImgs",value:function(t){t.forEach((function(t){var e=Object(c.createImage)();w.set(t,e),e.onload=function(){e.loadDone=!0},e.onloadcbks=[],e.src=t}))}},{key:"registBitMapFont",value:function(t,e,n){var i=new f.default(t,e,n);this.bitMapFonts.push(i)}}])&&g(n.prototype,i),r&&g(n,r),e}(r.default))({style:{width:0,height:0},name:"layout"});e.default=O},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(2);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=new(n(3)),s=0,a=1;function l(t,e){var n=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}(t);return null==e&&(e=1),"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(e,")")}var u=function(t,e){return["click","touchstart","touchmove","touchend","touchcancel"].indexOf(t),"element-".concat(e,"-").concat(t)},c=function(){function t(e){var n=this,r=e.style,u=void 0===r?{}:r,c=e.props,h=void 0===c?{}:c,p=e.idName,f=void 0===p?"":p,d=e.className,_=void 0===d?"":d,g=e.id,m=void 0===g?++s:g;for(var v in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.children=[],this.parent=null,this.parentId=0,this.id=m,this.props=h,this.idName=f,this.className=_,this.style=u,this.EE=o,this.root=null,this.isDestroyed=!1,this.layoutBox={},void 0!==u.opacity&&u.color&&u.color.indexOf("#")>-1&&(u.color=l(u.color,u.opacity)),void 0!==u.opacity&&u.backgroundColor&&u.backgroundColor.indexOf("#")>-1&&(u.backgroundColor=l(u.backgroundColor,u.opacity)),this.style)i.scalableStyles.indexOf(v)>-1&&(this.style[v]*=a);["touchstart","touchmove","touchcancel","touchend","click"].forEach((function(t){n.on(t,(function(e,i){n.parent&&n.parent.emit(t,e,i)}))})),this.initRepaint()}var e,n,c;return e=t,(n=[{key:"initRepaint",value:function(){var t=this;this.on("repaint",(function(e){t.parent&&t.parent.emit("repaint",e)}))}},{key:"repaint",value:function(){}},{key:"insert",value:function(){}},{key:"checkNeedRender",value:function(){return!0}},{key:"destroy",value:function(){var t=this;["touchstart","touchmove","touchcancel","touchend","click","repaint"].forEach((function(e){t.off(e)})),this.EE.off("image__render__done"),this.isDestroyed=!0,this.EE=null,this.root=null,this.parent=null,this.ctx=null,this.realLayoutBox=null,this.layoutBox=null,this.props=null,this.style=null,this.renderBoxes&&(this.renderBoxes=null)}},{key:"add",value:function(t){t.parent=this,t.parentId=this.id,this.children.push(t)}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.emit.apply(o,[u(t,this.id)].concat(n))}},{key:"on",value:function(t,e){o.on(u(t,this.id),e)}},{key:"once",value:function(t,e){o.once(u(t,this.id),e)}},{key:"off",value:function(t,e){o.off(u(t,this.id),e)}},{key:"roundRect",value:function(t,e){var n=this.style||{},i=e||this.layoutBox,r=i.width,o=i.height,s=n.borderRadius,a=i.absoluteX,l=i.absoluteY;t.moveTo(a+s,l),t.arcTo(a+r,l,a+r,l+o,s),t.arcTo(a+r,l+o,a,l+o,s),t.arcTo(a,l+o,a,l,s),t.arcTo(a,l,a+r,l,s),t.clip()}},{key:"renderBorder",value:function(t,e){var n=this.style||{};n.borderRadius&&this.roundRect(t,e),t.save();var i=e||this.layoutBox,r=n.borderWidth||0,o=n.borderLeftWidth||0,s=n.borderRightWidth||0,a=n.borderTopWidth||0,l=n.borderBottomWidth||0,u=n.borderRadius||0,c=n.borderColor,h=i.absoluteX,p=i.absoluteY;t.beginPath(),r&&c&&(t.lineWidth=r,t.strokeStyle=c,t.strokeRect(h,p,i.width,i.height)),a&&(c||n.borderTopColor)&&(t.lineWidth=a,t.strokeStyle=n.borderTopColor||c,t.moveTo(u?h+u:h,p+a/2),t.lineTo(u?h+i.width-u:h+i.width,p+a/2)),l&&(c||n.borderBottomColor)&&(t.lineWidth=l,t.strokeStyle=n.borderBottomColor||c,t.moveTo(u?h+u:h,p+i.height-l/2),t.lineTo(u?h+i.width-u:h+i.width,p+i.height-l/2)),o&&(c||n.borderLeftColor)&&(t.lineWidth=o,t.strokeStyle=n.borderLeftColor||c,t.moveTo(h+o/2,u?p+u:p),t.lineTo(h+o/2,u?p+i.height-u:p+i.height)),s&&(c||n.borderRightColor)&&(t.lineWidth=s,t.strokeStyle=n.borderRightColor||c,t.moveTo(h+i.width-s/2,u?p+u:p),t.lineTo(h+i.width-s/2,u?p+i.height-u:p+i.height)),t.closePath(),t.stroke(),t.restore()}}])&&r(e.prototype,n),c&&r(e,c),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"scalableStyles",(function(){return r})),n.d(e,"textStyles",(function(){return i})),n.d(e,"layoutAffectedStyles",(function(){return o}));var i=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"],r=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius","minWidth","maxWidth","minHeight","maxHeight"],o=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"]},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,s=i.length;o<s;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e),n.d(e,"default",(function(){return o}));var r=[],o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pool";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=r.find((function(t){return t.name===e}));if(n)return n;this.name=e,this.pool={},r.push(this)}var e,n,o;return e=t,(n=[{key:"get",value:function(t){return this.pool[t]}},{key:"set",value:function(t,e){this.pool[t]=e}},{key:"clear",value:function(){this.pool={}}}])&&i(e.prototype,n),o&&i(e,o),t}()},function(t,e,n){var i,r,o;r=[],void 0===(o="function"==typeof(i=function(){var e=function(){var t,e="inherit",n="ltr",i="rtl",r="row",o="row-reverse",s="column",a="column-reverse",l="flex-start",u="center",c="flex-end",h="space-between",p="space-around",f="flex-start",d="center",_="flex-end",g="stretch",m="relative",v="absolute",y={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},b={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},w={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},x={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function k(t){return void 0===t}function C(t){return t===r||t===o}function T(t,e){if(void 0!==t.style.marginStart&&C(e))return t.style.marginStart;var n=null;switch(e){case"row":n=t.style.marginLeft;break;case"row-reverse":n=t.style.marginRight;break;case"column":n=t.style.marginTop;break;case"column-reverse":n=t.style.marginBottom}return void 0!==n?n:void 0!==t.style.margin?t.style.margin:0}function S(t,e){if(void 0!==t.style.marginEnd&&C(e))return t.style.marginEnd;var n=null;switch(e){case"row":n=t.style.marginRight;break;case"row-reverse":n=t.style.marginLeft;break;case"column":n=t.style.marginBottom;break;case"column-reverse":n=t.style.marginTop}return null!=n?n:void 0!==t.style.margin?t.style.margin:0}function O(t,e){if(void 0!==t.style.borderStartWidth&&t.style.borderStartWidth>=0&&C(e))return t.style.borderStartWidth;var n=null;switch(e){case"row":n=t.style.borderLeftWidth;break;case"row-reverse":n=t.style.borderRightWidth;break;case"column":n=t.style.borderTopWidth;break;case"column-reverse":n=t.style.borderBottomWidth}return null!=n&&n>=0?n:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function E(t,e){if(void 0!==t.style.borderEndWidth&&t.style.borderEndWidth>=0&&C(e))return t.style.borderEndWidth;var n=null;switch(e){case"row":n=t.style.borderRightWidth;break;case"row-reverse":n=t.style.borderLeftWidth;break;case"column":n=t.style.borderBottomWidth;break;case"column-reverse":n=t.style.borderTopWidth}return null!=n&&n>=0?n:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function L(t,e){return function(t,e){if(void 0!==t.style.paddingStart&&t.style.paddingStart>=0&&C(e))return t.style.paddingStart;var n=null;switch(e){case"row":n=t.style.paddingLeft;break;case"row-reverse":n=t.style.paddingRight;break;case"column":n=t.style.paddingTop;break;case"column-reverse":n=t.style.paddingBottom}return null!=n&&n>=0?n:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}(t,e)+O(t,e)}function M(t,e){return function(t,e){if(void 0!==t.style.paddingEnd&&t.style.paddingEnd>=0&&C(e))return t.style.paddingEnd;var n=null;switch(e){case"row":n=t.style.paddingRight;break;case"row-reverse":n=t.style.paddingLeft;break;case"column":n=t.style.paddingBottom;break;case"column-reverse":n=t.style.paddingTop}return null!=n&&n>=0?n:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}(t,e)+E(t,e)}function A(t,e){return O(t,e)+E(t,e)}function N(t,e){return T(t,e)+S(t,e)}function R(t,e){return L(t,e)+M(t,e)}function P(t,e){return e.style.alignSelf?e.style.alignSelf:t.style.alignItems?t.style.alignItems:"stretch"}function D(t,e){if(e===i){if(t===r)return o;if(t===o)return r}return t}function I(t,e){return function(t){return t===s||t===a}(t)?D(r,e):s}function W(t){return t.style.position?t.style.position:"relative"}function B(t){return W(t)===m&&t.style.flex>0}function j(t,e){return t.layout[x[e]]+N(t,e)}function H(t,e){return void 0!==t.style[x[e]]&&t.style[x[e]]>=0}function z(t,e){return void 0!==t.style[e]}function F(t,e){return void 0!==t.style[e]?t.style[e]:0}function U(t,e,n){var i={row:t.style.minWidth,"row-reverse":t.style.minWidth,column:t.style.minHeight,"column-reverse":t.style.minHeight}[e],r={row:t.style.maxWidth,"row-reverse":t.style.maxWidth,column:t.style.maxHeight,"column-reverse":t.style.maxHeight}[e],o=n;return void 0!==r&&r>=0&&o>r&&(o=r),void 0!==i&&i>=0&&o<i&&(o=i),o}function K(t,e){return t>e?t:e}function V(t,e){void 0===t.layout[x[e]]&&H(t,e)&&(t.layout[x[e]]=K(U(t,e,t.style[x[e]]),R(t,e)))}function X(t,e,n){e.layout[b[n]]=t.layout[x[n]]-e.layout[x[n]]-e.layout[w[n]]}function G(t,e){return void 0!==t.style[y[e]]?F(t,y[e]):-F(t,b[e])}function Y(i,E,Y){var q=function(t,i){var r;return(r=t.style.direction?t.style.direction:e)===e&&(r=void 0===i?n:i),r}(i,Y),Q=D(function(t){return t.style.flexDirection?t.style.flexDirection:s}(i),q),Z=I(Q,q),J=D(r,q);V(i,Q),V(i,Z),i.layout.direction=q,i.layout[y[Q]]+=T(i,Q)+G(i,Q),i.layout[b[Q]]+=S(i,Q)+G(i,Q),i.layout[y[Z]]+=T(i,Z)+G(i,Z),i.layout[b[Z]]+=S(i,Z)+G(i,Z);var tt=i.children.length,et=R(i,J);if(function(t){return void 0!==t.style.measure}(i)){var nt=!k(i.layout[x[J]]),it=t;it=H(i,J)?i.style.width:nt?i.layout[x[J]]:E-N(i,J),it-=et;var rt=!H(i,J)&&!nt,ot=!H(i,s)&&k(i.layout[x[s]]);if(rt||ot){var st=i.style.measure(it);rt&&(i.layout.width=st.width+et),ot&&(i.layout.height=st.height+R(i,s))}if(0===tt)return}var at,lt,ut,ct,ht=function(t){return"wrap"===t.style.flexWrap}(i),pt=function(t){return t.style.justifyContent?t.style.justifyContent:"flex-start"}(i),ft=L(i,Q),dt=L(i,Z),_t=R(i,Q),gt=R(i,Z),mt=!k(i.layout[x[Q]]),vt=!k(i.layout[x[Z]]),yt=C(Q),bt=null,wt=null,xt=t;mt&&(xt=i.layout[x[Q]]-_t);for(var kt=0,Ct=0,Tt=0,St=0,Ot=0,Et=0;Ct<tt;){var Lt,Mt=0,At=0,Nt=0,Rt=0,Pt=mt&&pt===l||!mt&&pt!==u,Dt=Pt?tt:kt,It=!0,Wt=tt,Bt=null,jt=null,Ht=ft,zt=0;for(at=kt;at<tt;++at){if((ut=i.children[at]).lineIndex=Et,ut.nextAbsoluteChild=null,ut.nextFlexChild=null,(qt=P(i,ut))===g&&W(ut)===m&&vt&&!H(ut,Z))ut.layout[x[Z]]=K(U(ut,Z,i.layout[x[Z]]-gt-N(ut,Z)),R(ut,Z));else if(W(ut)===v)for(null===bt&&(bt=ut),null!==wt&&(wt.nextAbsoluteChild=ut),wt=ut,lt=0;lt<2;lt++)ct=0!==lt?r:s,!k(i.layout[x[ct]])&&!H(ut,ct)&&z(ut,y[ct])&&z(ut,b[ct])&&(ut.layout[x[ct]]=K(U(ut,ct,i.layout[x[ct]]-R(i,ct)-N(ut,ct)-F(ut,y[ct])-F(ut,b[ct])),R(ut,ct)));var Ft=0;if(mt&&B(ut)?(At++,Nt+=ut.style.flex,null===Bt&&(Bt=ut),null!==jt&&(jt.nextFlexChild=ut),jt=ut,Ft=R(ut,Q)+N(ut,Q)):(Lt=t,yt||(Lt=H(i,J)?i.layout[x[J]]-et:E-N(i,J)-et),0===Tt&&$(ut,Lt,q),W(ut)===m&&(Rt++,Ft=j(ut,Q))),ht&&mt&&Mt+Ft>xt&&at!==kt){Rt--,Tt=1;break}Pt&&(W(ut)!==m||B(ut))&&(Pt=!1,Dt=at),It&&(W(ut)!==m||qt!==g&&qt!==f||k(ut.layout[x[Z]]))&&(It=!1,Wt=at),Pt&&(ut.layout[w[Q]]+=Ht,mt&&X(i,ut,Q),Ht+=j(ut,Q),zt=K(zt,U(ut,Z,j(ut,Z)))),It&&(ut.layout[w[Z]]+=St+dt,vt&&X(i,ut,Z)),Tt=0,Mt+=Ft,Ct=at+1}var Ut=0,Kt=0,Vt=0;if(Vt=mt?xt-Mt:K(Mt,0)-Mt,0!==At){var Xt,Gt,Yt=Vt/Nt;for(jt=Bt;null!==jt;)(Xt=Yt*jt.style.flex+R(jt,Q))!==(Gt=U(jt,Q,Xt))&&(Vt-=Gt,Nt-=jt.style.flex),jt=jt.nextFlexChild;for((Yt=Vt/Nt)<0&&(Yt=0),jt=Bt;null!==jt;)jt.layout[x[Q]]=U(jt,Q,Yt*jt.style.flex+R(jt,Q)),Lt=t,H(i,J)?Lt=i.layout[x[J]]-et:yt||(Lt=E-N(i,J)-et),$(jt,Lt,q),ut=jt,jt=jt.nextFlexChild,ut.nextFlexChild=null}else pt!==l&&(pt===u?Ut=Vt/2:pt===c?Ut=Vt:pt===h?(Vt=K(Vt,0),Kt=At+Rt-1!=0?Vt/(At+Rt-1):0):pt===p&&(Ut=(Kt=Vt/(At+Rt))/2));for(Ht+=Ut,at=Dt;at<Ct;++at)W(ut=i.children[at])===v&&z(ut,y[Q])?ut.layout[w[Q]]=F(ut,y[Q])+O(i,Q)+T(ut,Q):(ut.layout[w[Q]]+=Ht,mt&&X(i,ut,Q),W(ut)===m&&(Ht+=Kt+j(ut,Q),zt=K(zt,U(ut,Z,j(ut,Z)))));var $t=i.layout[x[Z]];for(vt||($t=K(U(i,Z,zt+gt),gt)),at=Wt;at<Ct;++at)if(W(ut=i.children[at])===v&&z(ut,y[Z]))ut.layout[w[Z]]=F(ut,y[Z])+O(i,Z)+T(ut,Z);else{var qt,Qt=dt;if(W(ut)===m)if((qt=P(i,ut))===g)k(ut.layout[x[Z]])&&(ut.layout[x[Z]]=K(U(ut,Z,$t-gt-N(ut,Z)),R(ut,Z)));else if(qt!==f){var Zt=$t-gt-j(ut,Z);Qt+=qt===d?Zt/2:Zt}ut.layout[w[Z]]+=St+Qt,vt&&X(i,ut,Z)}St+=zt,Ot=K(Ot,Ht),Et+=1,kt=Ct}if(Et>1&&vt){var Jt=i.layout[x[Z]]-gt,te=Jt-St,ee=0,ne=dt,ie=function(t){return t.style.alignContent?t.style.alignContent:"flex-start"}(i);ie===_?ne+=te:ie===d?ne+=te/2:ie===g&&Jt>St&&(ee=te/Et);var re=0;for(at=0;at<Et;++at){var oe=re,se=0;for(lt=oe;lt<tt;++lt)if(W(ut=i.children[lt])===m){if(ut.lineIndex!==at)break;k(ut.layout[x[Z]])||(se=K(se,ut.layout[x[Z]]+N(ut,Z)))}for(re=lt,se+=ee,lt=oe;lt<re;++lt)if(W(ut=i.children[lt])===m){var ae=P(i,ut);if(ae===f)ut.layout[w[Z]]=ne+T(ut,Z);else if(ae===_)ut.layout[w[Z]]=ne+se-S(ut,Z)-ut.layout[x[Z]];else if(ae===d){var le=ut.layout[x[Z]];ut.layout[w[Z]]=ne+(se-le)/2}else ae===g&&(ut.layout[w[Z]]=ne+T(ut,Z))}ne+=se}}var ue=!1,ce=!1;if(mt||(i.layout[x[Q]]=K(U(i,Q,Ot+M(i,Q)),_t),Q!==o&&Q!==a||(ue=!0)),vt||(i.layout[x[Z]]=K(U(i,Z,St+gt),gt),Z!==o&&Z!==a||(ce=!0)),ue||ce)for(at=0;at<tt;++at)ut=i.children[at],ue&&X(i,ut,Q),ce&&X(i,ut,Z);for(wt=bt;null!==wt;){for(lt=0;lt<2;lt++)ct=0!==lt?r:s,!k(i.layout[x[ct]])&&!H(wt,ct)&&z(wt,y[ct])&&z(wt,b[ct])&&(wt.layout[x[ct]]=K(U(wt,ct,i.layout[x[ct]]-A(i,ct)-N(wt,ct)-F(wt,y[ct])-F(wt,b[ct])),R(wt,ct))),z(wt,b[ct])&&!z(wt,y[ct])&&(wt.layout[y[ct]]=i.layout[x[ct]]-wt.layout[x[ct]]-F(wt,b[ct]));ut=wt,wt=wt.nextAbsoluteChild,ut.nextAbsoluteChild=null}}function $(t,e,i){t.shouldUpdate=!0;var r=t.style.direction||n;!t.isDirty&&t.lastLayout&&t.lastLayout.requestedHeight===t.layout.height&&t.lastLayout.requestedWidth===t.layout.width&&t.lastLayout.parentMaxWidth===e&&t.lastLayout.direction===r?(t.layout.width=t.lastLayout.width,t.layout.height=t.lastLayout.height,t.layout.top=t.lastLayout.top,t.layout.left=t.lastLayout.left):(t.lastLayout||(t.lastLayout={}),t.lastLayout.requestedWidth=t.layout.width,t.lastLayout.requestedHeight=t.layout.height,t.lastLayout.parentMaxWidth=e,t.lastLayout.direction=r,t.children.forEach((function(t){t.layout.width=void 0,t.layout.height=void 0,t.layout.top=0,t.layout.left=0})),Y(t,e,i),t.lastLayout.width=t.layout.width,t.lastLayout.height=t.layout.height,t.lastLayout.top=t.layout.top,t.lastLayout.left=t.layout.left)}return{layoutNodeImpl:Y,computeLayout:$,fillNodes:function t(e){return e.layout&&!e.isDirty||(e.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),e.style||(e.style={}),e.children||(e.children=[]),e.children.forEach(t),e}}}();return t.exports=e,function(t){e.fillNodes(t),e.computeLayout(t)}})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){"use strict";function i(t,e,n){var i,r;return e||(e=250),function(){var o=n||this,s=+new Date,a=arguments;i&&s<i+e?(clearTimeout(r),r=setTimeout((function(){i=s,t.apply(o,a)}),e)):(i=s,t.apply(o,a))}}function r(){}function o(t){var e=t.touchstart,n=t.touchend;if(!(e&&n&&e.timeStamp&&n.timeStamp&&void 0!==e.pageX&&void 0!==e.pageY&&void 0!==n.pageX&&void 0!==n.pageY))return!1;var i=e.pageX,r=e.pageY,o=n.pageX,s=n.pageY,a=n.timeStamp-e.timeStamp;return!!(Math.abs(s-r)<30&&Math.abs(o-i)<30&&a<300)}function s(){return"undefined"!=typeof wx?wx.createCanvas():document.createElement("canvas")}function a(){return"undefined"!=typeof wx?wx.createImage():document.createElement("img")}function l(){return"undefined"!=typeof wx?wx.getSystemInfoSync().devicePixelRatio:window.devicePixelRatio}n.r(e),n.d(e,"throttle",(function(){return i})),n.d(e,"none",(function(){return r})),n.d(e,"isClick",(function(){return o})),n.d(e,"createCanvas",(function(){return s})),n.d(e,"createImage",(function(){return a})),n.d(e,"getDpr",(function(){return l})),n.d(e,"STATE",(function(){return u}));var u={UNINIT:0,INITED:1,RENDERED:2,CLEAR:3}},function(t,e,n){"use strict";var i=n(8),r=n(10),o=n(10),s=n(9).buildOptions,a=n(12);e.parse=function(t,e,n){if(n){!0===n&&(n={});var l=a.validate(t,n);if(!0!==l)throw Error(l.err.msg)}return e=s(e,o.defaultOptions,o.props),i.convertToJson(r.getTraversalObj(t,e),e)}},function(t,e,n){"use strict";var i=n(9);e.convertToJson=function t(e,n){var r={name:e.tagname};return e.child&&!i.isEmptyObject(e.child)||e.attrsMap&&!i.isEmptyObject(e.attrsMap)?(i.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==n.cdataPositionChar)&&("strict"===n.arrayMode?r[n.textNodeName]=[e.val]:r[n.textNodeName]=e.val),i.merge(r,e.attrsMap,n.arrayMode),r.children=[],e.children.forEach((function(e){r.children.push(t(e,n))})),r):i.isExist(e.val)&&e.val?e.val:r}},function(t,e,n){"use strict";var i=function(t,e){var n=e.exec(t);return!(null==n)};e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,n){if(e)for(var i=Object.keys(e),r=i.length,o=0;o<r;o++)t[i[o]]="strict"===n?[e[i[o]]]:e[i[o]]},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,n){var i={};if(!t)return e;for(var r=0;r<n.length;r++)void 0!==t[n[r]]?i[n[r]]=t[n[r]]:i[n[r]]=e[n[r]];return i},e.doesMatch=i,e.doesNotMatch=function(t,e){return!i(t,e)},e.getAllMatches=function(t,e){for(var n=[],i=e.exec(t);i;){for(var r=[],o=i.length,s=0;s<o;s++)r.push(i[s]);n.push(r),i=e.exec(t)}return n}},function(t,e,n){"use strict";var i=n(9),r=n(9).buildOptions,o=n(11),s={OPENING:1,CLOSING:2,SELF:3,CDATA:4},a="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|(([\\w:\\-._]*:)?([\\w:\\-._]+))([^>]*)>|((\\/)(([\\w:\\-._]*:)?([\\w:\\-._]+))\\s*>))([^<]*)";!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var l={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",localeRange:"",tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t},stopNodes:[]};e.defaultOptions=l;var u=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","localeRange","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];e.props=u;function c(t,e,n){var i=t[7]||n,r=t[14];return r&&(e.trimValues&&(r=r.trim()),r=f(r=e.tagValueProcessor(r,i),e.parseNodeValue,e.parseTrueNumberOnly)),r}function h(t){return"]]>"===t[4]?s.CDATA:"/"===t[10]?s.CLOSING:void 0!==t[8]&&"/"===t[8].substr(t[8].length-1)?s.SELF:s.OPENING}function p(t,e){if(e.ignoreNameSpace){var n=t.split(":"),i="/"===t.charAt(0)?"/":"";if("xmlns"===n[0])return"";2===n.length&&(t=i+n[1])}return t}function f(t,e,n){var r;return e&&"string"==typeof t?(""===t.trim()||isNaN(t)?r="true"===t||"false"!==t&&t:(r=-1!==t.indexOf("0x")?Number.parseInt(t,16):-1!==t.indexOf(".")?Number.parseFloat(t):Number.parseInt(t,10),n&&(r=String(r)===t?r:t)),r):i.isExist(t)?t:""}var d=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function _(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");for(var n=i.getAllMatches(t,d),r=n.length,o={},s=0;s<r;s++){var a=p(n[s][1],e);a.length&&(void 0!==n[s][4]?(e.trimValues&&(n[s][4]=n[s][4].trim()),n[s][4]=e.attrValueProcessor(n[s][4],a),o[e.attributeNamePrefix+a]=f(n[s][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(o[e.attributeNamePrefix+a]=!0))}if(!Object.keys(o).length)return;if(e.attrNodeName){var l={};return l[e.attrNodeName]=o,l}return o}}e.getTraversalObj=function(t,e){e=r(e,l,u),t=t.replace(/<!--[\s\S]*?-->/g,"");var n=new o("!xml"),p=n;a=a.replace(/\[\\w/g,"["+e.localeRange+"\\w");for(var f=new RegExp(a,"g"),d=f.exec(t),g=f.exec(t);d;){var m=h(d);if(m===s.CLOSING)p.parent&&d[14]&&(p.parent.val=i.getValue(p.parent.val)+""+c(d,e,p.parent.tagname)),e.stopNodes.length&&e.stopNodes.includes(p.tagname)&&(p.child=[],null==p.attrsMap&&(p.attrsMap={}),p.val=t.substr(p.startIndex+1,d.index-p.startIndex-1)),p=p.parent;else if(m===s.CDATA)if(e.cdataTagName){var v=new o(e.cdataTagName,p,d[3]);v.attrsMap=_(d[8],e),p.addChild(v),p.val=i.getValue(p.val)+e.cdataPositionChar,d[14]&&(p.val+=c(d,e))}else p.val=(p.val||"")+(d[3]||"")+c(d,e);else if(m===s.SELF){p&&d[14]&&(p.val=i.getValue(p.val)+""+c(d,e));var y=new o(e.ignoreNameSpace?d[7]:d[5],p,"");d[8]&&d[8].length>0&&(d[8]=d[8].substr(0,d[8].length-1)),y.attrsMap=_(d[8],e),p.addChild(y)}else{var b=new o(e.ignoreNameSpace?d[7]:d[5],p,c(d,e));e.stopNodes.length&&e.stopNodes.includes(b.tagname)&&(b.startIndex=d.index+d[1].length),b.attrsMap=_(d[8],e),p.addChild(b),p=b}d=g,g=f.exec(t)}return n}},function(t,e,n){"use strict";t.exports=function(t,e,n){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.children=[],this.val=n,this.addChild=function(t){this.children.push(t),Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},function(t,e,n){"use strict";var i=n(9),r={allowBooleanAttributes:!1,localeRange:"a-zA-Z"},o=["allowBooleanAttributes","localeRange"];function s(t,e){for(var n=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var i=t.substr(n,e-n);if(e>5&&"xml"===i)return{err:{code:"InvalidXml",msg:"XML declaration allowed only at the start of the document."}};if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function a(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){var n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&0===--n)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=i.buildOptions(e,r,o);var n=[],l=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(var u=new RegExp("^[_w][\\w\\-.:]*$".replace("_w","_"+e.localeRange)),h=new RegExp("^([w]|_)[\\w.\\-_:]*".replace("([w","(["+e.localeRange)),f=0;f<t.length;f++){if("<"!==t[f]){if(" "===t[f]||"\t"===t[f]||"\n"===t[f]||"\r"===t[f])continue;return{err:{code:"InvalidChar",msg:"char "+t[f]+" is not expected ."}}}if("?"===t[++f]){if((f=s(t,++f)).err)return f}else{if("!"===t[f]){f=a(t,f);continue}var _=!1;"/"===t[f]&&(_=!0,f++);for(var g="";f<t.length&&">"!==t[f]&&" "!==t[f]&&"\t"!==t[f]&&"\n"!==t[f]&&"\r"!==t[f];f++)g+=t[f];if("/"===(g=g.trim())[g.length-1]){g=g.substring(0,g.length-1);continue}if(!d(g,h))return{err:{code:"InvalidTag",msg:"Tag "+g+" is an invalid name."}};var m=c(t,f);if(!1===m)return{err:{code:"InvalidAttr",msg:'Attributes for "'+g+'" have open quote.'}};var v=m.value;if(f=m.index,"/"===v[v.length-1]){var y=p(v=v.substring(0,v.length-1),e,u);if(!0!==y)return y;l=!0}else if(_){if(!m.tagClosed)return{err:{code:"InvalidTag",msg:'closing tag "'+g+"\" don't have proper closing."}};if(v.trim().length>0)return{err:{code:"InvalidTag",msg:'closing tag "'+g+"\" can't have attributes or invalid starting."}};var b=n.pop();if(g!==b)return{err:{code:"InvalidTag",msg:"closing tag "+b+" is expected inplace of "+g+"."}}}else{var w=p(v,e,u);if(!0!==w)return w;n.push(g),l=!0}for(f++;f<t.length;f++)if("<"===t[f]){if("!"===t[f+1]){f=a(t,++f);continue}break}"<"===t[f]&&f--}}return l?!(n.length>0)||{err:{code:"InvalidXml",msg:"Invalid "+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+" found."}}:{err:{code:"InvalidXml",msg:"Start tag expected."}}};var l='"',u="'";function c(t,e){for(var n="",i="",r=!1;e<t.length;e++){if(t[e]===l||t[e]===u)if(""===i)i=t[e];else{if(i!==t[e])continue;i=""}else if(">"===t[e]&&""===i){r=!0;break}n+=t[e]}return""===i&&{value:n,index:e,tagClosed:r}}var h=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function p(t,e,n){for(var r=i.getAllMatches(t,h),o={},s=0;s<r.length;s++){if(0===r[s][1].length)return{err:{code:"InvalidAttr",msg:"attribute "+r[s][2]+" has no space in starting."}};if(void 0===r[s][3]&&!e.allowBooleanAttributes)return{err:{code:"InvalidAttr",msg:"boolean attribute "+r[s][2]+" is not allowed."}};var a=r[s][2];if(!f(a,n))return{err:{code:"InvalidAttr",msg:"attribute "+a+" is an invalid name."}};if(Object.prototype.hasOwnProperty.call(o,a))return{err:{code:"InvalidAttr",msg:"attribute "+a+" is repeated."}};o[a]=1}return!0}function f(t,e){return i.doesMatch(t,e)}function d(t,e){return!i.doesNotMatch(t,e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return a}));n(6);var i=n(14);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=new(n(4).default)("bitMapPool"),s=n(3),a=function(){function t(e,n,r){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var l=o.get(e);if(l)return l;this.config=r,this.chars=this.parseConfig(r),this.ready=!1,this.event=new s,this.texture=i.default.loadImage(n,(function(){a.ready=!0,a.event.emit("text__load__done")})),o.set(e,this)}var e,n,a;return e=t,(n=[{key:"parseConfig",value:function(t){var e=(t=t.split("\r\n").join("\n")).split("\n"),n=this.getConfigByKey(e[3],"count");this.lineHeight=this.getConfigByKey(e[1],"lineHeight"),this.fontSize=this.getConfigByKey(e[0],"size"),console.log("font config",n,this.lineHeight,this.fontSize);for(var i={},r=4;r<4+n;r++){var o=e[r],s={};i[String.fromCharCode(this.getConfigByKey(o,"id"))]=s,s.x=this.getConfigByKey(o,"x"),s.y=this.getConfigByKey(o,"y"),s.w=this.getConfigByKey(o,"width"),s.h=this.getConfigByKey(o,"height"),s.offX=this.getConfigByKey(o,"xoffset"),s.offY=this.getConfigByKey(o,"yoffset"),s.xadvance=this.getConfigByKey(o,"xadvance")}return console.log(i),i}},{key:"getConfigByKey",value:function(t,e){for(var n=t.split(" "),i=0,r=n.length;i<r;i++){var o=n[i];if(e===o.substring(0,e.length)){var s=o.substring(e.length+1);return parseInt(s)}}return 0}}])&&r(e.prototype,n),a&&r(e,a),t}()},function(t,e,n){"use strict";n.r(e);var i=n(4),r=n(6);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=new i.default("imgPool"),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"getRes",value:function(t){return s.get(t)}},{key:"loadImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.none,n=null,i=this.getRes(t);return t?(i&&i.loadDone?(n=i,e()):i&&!i.loadDone?(n=i,i.onloadcbks.push(e)):((n=Object(r.createImage)()).onloadcbks=[e],s.set(t,n),n.onload=function(){n.onloadcbks.forEach((function(t){return t()})),n.onloadcbks=[],n.loadDone=!0},n.onerror=function(t){console.log("img load error",t)},n.src=t),n):n}}])&&o(e.prototype,n),i&&o(e,i),t}();e.default=new a},function(t,e,n){"use strict";n.r(e);var i=n(16);n.d(e,"View",(function(){return i.default}));var r=n(17);n.d(e,"Image",(function(){return r.default}));var o=n(18);n.d(e,"Text",(function(){return o.default}));var s=n(19);n.d(e,"ScrollView",(function(){return s.default}));var a=n(21);n.d(e,"BitMapText",(function(){return a.default}))},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return u}));var u=function(t){function e(t){var n,i=t.style,r=void 0===i?{}:i,o=t.props,l=void 0===o?{}:o,u=t.idName,c=void 0===u?"":u,h=t.className,p=void 0===h?"":h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=s(this,a(e).call(this,{props:l,idName:c,className:p,style:r}))).type="View",n.ctx=null,n.renderBoxes=[],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),n=e,(i=[{key:"destroySelf",value:function(){this.isDestroyed=!0,this.children=null}},{key:"checkNeedRender",value:function(){var t=this.style||{},e=t.borderColor;return!!(t.backgroundColor||t.borderWidth&&e||t.borderTopWidth&&(e||t.borderTopColor)||t.borderBottomWidth&&(e||t.borderBottomColor)||t.borderLeftWidth&&(e||t.borderLeftColor)||t.borderRightWidth&&(e||t.borderRightColor))}},{key:"render",value:function(t,e){var n=this.style||{},i=e||this.layoutBox;t.save();var r=n.borderWidth||0,o=i.absoluteX,s=i.absoluteY,a=n.borderLeftWidth||r,l=n.borderRightWidth||r,u=n.borderTopWidth||r,c=n.borderBottomWidth||r;this.renderBorder(t,e),n.backgroundColor&&(t.fillStyle=n.backgroundColor,t.fillRect(o+a,s+l,i.width-(a+l),i.height-(u+c))),t.restore()}},{key:"insert",value:function(t,e){this.ctx=t,e||(e=this.layoutBox),this.renderBoxes.push({ctx:t,box:e}),this.render(t,e)}},{key:"repaint",value:function(){var t=this;this.renderBoxes.forEach((function(e){t.render(e.ctx,e.box)}))}}])&&o(n.prototype,i),r&&o(n,r),e}(n(1).default)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return p}));var r=n(1),o=n(6);function s(t){return(s="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=new(n(4).default)("imgPool"),p=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i,r,o=t.style,a=void 0===o?{}:o,c=t.props,h=void 0===c?{}:c,p=t.idName,f=void 0===p?"":p,d=t.className,_=void 0===d?"":d,g=t.src,m=void 0===g?"":g;return i=this,(n=!(r=l(e).call(this,{props:h,idName:f,className:_,style:a}))||"object"!==s(r)&&"function"!=typeof r?u(i):r).imgsrc=m,Object.defineProperty(u(n),"src",{get:function(){return this.imgsrc},set:function(t){var e=this;t!==this.imgsrc&&(this.imgsrc=t,this.initImg((function(){e.emit("repaint")})))},enumerable:!0,configurable:!0}),n.type="Image",n.renderBoxes=[],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(i=[{key:"repaint",value:function(){var t=this;this.renderBoxes.forEach((function(e){t.renderImg(e.ctx,e.box,!1)}))}},{key:"destroySelf",value:function(){this.isDestroyed=!0,this.img&&(this.img.onloadcbks=[],this.img.onload=null,this.img.onerror=null),this.img=null,delete this.src,this.off("img__load__done")}},{key:"initImg",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.none;this.img=null,this.imgLoadDone=!1;var n=h.get(this.src);if(!this.src)return this.imgLoadDone=!0,void e();n&&n.loadDone?(this.img=n,this.imgLoadDone=!0,e()):n&&!n.loadDone?(this.img=n,n.onloadcbks.push((function(){t.img&&(t.imgLoadDone=!0,t.emit("img__load__done"),e())}))):(this.img=Object(o.createImage)(),this.img.onloadcbks=[],h.set(this.src,this.img),this.img.onload=function(){t.img&&(t.img&&(t.img.onloadcbks.forEach((function(t){return t()})),t.img.onloadcbks=[],t.img.loadDone=!0,t.imgLoadDone=!0),t.emit("img__load__done"),e())},this.img.onerror=function(t){console.log("img load error",t)},this.img.src=this.src)}},{key:"renderImg",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.img){var i=this.style||{},r=e||this.layoutBox;t.save(),i.borderColor&&(t.strokeStyle=i.borderColor),t.lineWidth=i.borderWidth||0;var o=r.absoluteX,s=r.absoluteY;this.renderBorder(t,e),t.drawImage(this.img,o,s,r.width,r.height),t.restore(),n&&this.EE.emit("image__render__done")}}},{key:"insert",value:function(t,e){var n=this;this.renderBoxes.push({ctx:t,box:e}),this.initImg((function(){n.renderImg(t,e)}))}}])&&a(n.prototype,i),r&&a(n,r),e}(r.default)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return g}));var r=n(1),o=n(6);function s(t){return(s="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h="PingFangSC-Regular, sans-serif",p=null,f=function(){if(p)return p;var t=Object(o.createCanvas)();return t.width=1,t.height=1,p=t.getContext("2d")};function d(t,e){var n=f();return n.font="".concat(t.fontWeight||"normal"," ").concat(t.fontSize||12,"px ").concat(t.fontFamily||h),n.measureText(e).width||0}function _(t){return f().measureText(t).width||0}var g=function(t){function e(t){var n,i,r,o=t.style,a=void 0===o?{}:o,c=t.props,h=void 0===c?{}:c,p=t.idName,f=void 0===p?"":p,g=t.className,m=void 0===g?"":g,v=t.value,y=void 0===v?"":v;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===a.width?a.width=d(a,y):"ellipsis"===a.textOverflow&&(y=function(t,e){e=String(e);var n=t.width,i=d(t,e),r=t.textOverflow||"ellipsis";if(i<=n)return e;"ellipsis"===r&&(n-=_("..."));for(var o=e.length-1,s=e.substring(0,o);_(s)>n&&o>0;)o--,s=e.substring(0,o);return o&&"ellipsis"===r?s+"...":s}(a,y)),i=this,(n=!(r=l(e).call(this,{props:h,idName:f,className:m,style:a}))||"object"!==s(r)&&"function"!=typeof r?u(i):r).type="Text",n.ctx=null,n.valuesrc=y,n.renderBoxes=[],Object.defineProperty(u(n),"value",{get:function(){return this.valuesrc},set:function(t){t!==this.valuesrc&&(this.valuesrc=t,this.emit("repaint"))},enumerable:!0,configurable:!0}),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(i=[{key:"toCanvasData",value:function(){var t=this.style||{};this.fontSize=t.fontSize||12,this.textBaseline="top",this.font="".concat(t.fontWeight||""," ").concat(t.fontSize||12,"px ").concat(h),this.textAlign=t.textAlign||"left",this.fillStyle=t.color||"#000"}},{key:"insert",value:function(t,e){this.renderBoxes.push({ctx:t,box:e}),this.render(t,e)}},{key:"repaint",value:function(){var t=this;this.renderBoxes.forEach((function(e){t.render(e.ctx,e.box)}))}},{key:"render",value:function(t,e){this.toCanvasData(),t.save();var n=e||this.layoutBox,i=this.style;t.textBaseline=this.textBaseline,t.font=this.font,t.textAlign=this.textAlign;var r=n.absoluteX,o=n.absoluteY;this.renderBorder(t,e),i.backgroundColor&&(t.fillStyle=i.backgroundColor,t.fillRect(r,o,n.width,n.height)),t.fillStyle=this.fillStyle,"center"===this.textAlign?r+=n.width/2:"right"===this.textAlign&&(r+=n.width),i.lineHeight&&(t.textBaseline="middle",o+=i.lineHeight/2),t.fillText(this.value,r,o),t.restore()}}])&&a(n.prototype,i),r&&a(n,r),e}(r.default)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return _}));var r=n(16),o=n(4),s=n(20),a=n(6);function l(t){return(l="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=0,d=new o.default("canvasPool"),_=function(t){function e(t){var n,i,r,o=t.style,u=void 0===o?{}:o,p=t.props,f=void 0===p?{}:p,d=t.name,_=void 0===d?"":d;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=c(e).call(this,{props:f,name:_,style:u}))||"object"!==l(r)&&"function"!=typeof r?h(i):r).type="ScrollView",n.top=0,n.touch=new s.default,n.pageHeight=2e3,n.pageCount=1,n.canvasMap={},n.throttleRepaint=Object(a.throttle)(n.clipRepaint,16,h(n)),n.renderTimers=[],n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t),n=e,(i=[{key:"initRepaint",value:function(){var t=this;this.on("repaint",(function(){t.clear(),t.repaint(),t.clipRepaint(-t.top)}))}},{key:"clear",value:function(){var t=this;Object.keys(this.canvasMap).forEach((function(e){var n=t.canvasMap[e];n.context&&n.context.clearRect(0,0,n.canvas.width,n.canvas.height)}))}},{key:"repaint",value:function(t){var e=this;t||(t=this);var n=t.children;Object.keys(n).forEach((function(t){var i=n[t];i.repaint(),e.repaint(i)}))}},{key:"updateRenderPort",value:function(t){this.renderport=t}},{key:"calPageData",value:function(){this.pageCount=Math.ceil((this.scrollHeight+this.layoutBox.absoluteY)/this.pageHeight);for(var t=0;t<this.pageCount;t++){var e=d.get(t);e?(e.context&&e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.elements=[],this.canvasMap[t]=e):(this.canvasMap[t]={elements:[]},d.set(t,this.canvasMap[t]))}}},{key:"destroySelf",value:function(){this.touch=null,this.isDestroyed=!0,this.throttleRepaint=null,this.renderTimers.forEach((function(t){clearTimeout(t)})),this.renderTimers=[],this.canvasMap={},this.ctx=null,this.children=null}},{key:"clipRepaint",value:function(t){if(!this.isDestroyed){t=-t,this.top=t;var e=this.layoutBox,n=e.absoluteY;if(!this.isDestroyed&&this.root.state!==a.STATE.CLEAR){this.ctx.clearRect(e.absoluteX,n,e.width,e.height),this.ctx.fillStyle=this.parent.style.backgroundColor||"#ffffff",this.ctx.fillRect(e.absoluteX,n,e.width,e.height);for(var i=0;i<this.pageCount;i++){var r=this.canvasMap[i].canvas,o=n+t,s=n+t+e.height;if(o<this.pageHeight*(i+1)&&s>this.pageHeight*i){var l=n+t-this.pageHeight*i,u=e.height,c=n;l>0&&this.pageHeight-l<e.height?u=this.pageHeight-l:l<0&&(u=l+e.height,c-=l,l=0),this.ctx.drawImage(r,e.absoluteX,l,e.width,u,e.absoluteX,c,e.width,u)}}}}}},{key:"renderChildren",value:function(t){var e=this,n=t.children,i=this.pageHeight;Object.keys(n).forEach((function(t){var r=n[t],o=r.layoutBox.originalAbsoluteY,s=Math.floor(o/i),a=s+1;if(r.layoutBox.absoluteY-=e.pageHeight*s,r.checkNeedRender()&&e.canvasMap[s].elements.push({element:r,box:r.layoutBox}),o+r.layoutBox.height>i*a){var l=Object.assign({},r.layoutBox);l.absoluteY=o-e.pageHeight*a,r.checkNeedRender()&&e.canvasMap[a].elements.push({element:r,box:l})}e.renderChildren(r)}))}},{key:"insertElements",value:function(t){var e=this,n=Object(a.createCanvas)(),i=n.getContext("2d");if(n.width=this.renderport.width,n.height=this.pageHeight,i.id=++f,this.canvasMap[t].canvas=n,this.canvasMap[t].context=i,this.canvasMap[t].elements.forEach((function(t){t.element.insert(i,t.box)})),t<this.pageCount-1){var r=setTimeout((function(){e.insertElements(++t)}),250);this.renderTimers.push(r)}}},{key:"insertScrollView",value:function(t){var e=this;this.insert(t),this.calPageData(),this.renderChildren(this),this.insertElements(0),this.clipRepaint(-this.top),this.EE.on("image__render__done",(function(){e.throttleRepaint(-e.top||0)})),this.scrollHeight>this.layoutBox.height&&(this.touch.setTouchRange(-(this.scrollHeight-this.layoutBox.height),0,this.clipRepaint.bind(this)),this.on("touchstart",this.touch.startFunc),this.on("touchmove",this.touch.moveFunc),this.on("touchend",this.touch.endFunc))}},{key:"scrollHeight",get:function(){var t=this.children[this.children.length-1];return t.layoutBox.top+t.layoutBox.height}}])&&u(n.prototype,i),r&&u(n,r),e}(r.default)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return s}));var i=n(6);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=Object(i.getDpr)(),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.needProcess=!1,this.startFunc=this.touchStartHandler.bind(this),this.endFunc=this.touchEndHandler.bind(this),this.moveFunc=this.touchMoveHandler.bind(this)}var e,n,i;return e=t,(n=[{key:"reset",value:function(){this.touchTime=new Date,this.touchStartX=0,this.touchStartY=0,this.start=0,this.end=0,this.move=0,this.target=0,this.scroll=null,"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(this.animate)}},{key:"enable",value:function(){this.reset(),this.needProcess=!0}},{key:"disable",value:function(){this.needProcess=!1}},{key:"setTouchRange",value:function(t,e,n){this.enable(),this.start=t,this.end=e,0===t&&0===e||(this.scroll=n)}},{key:"limitTarget",value:function(t){var e=t;return t>this.end?e=this.end:t<this.start&&(e=this.start),e}},{key:"touchStartHandler",value:function(t){var e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||t;e&&e.pageX&&e.pageY&&(this.touchStartX=e.clientX*o,this.touchStartY=e.clientY*o,this.touchTime=new Date,this.isMoving=!0,this.needProcess=!0,this.animate=requestAnimationFrame(this.loop.bind(this)))}},{key:"touchMoveHandler",value:function(t){if(this.isMoving){var e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||t;if(e&&e.pageX&&e.pageY){var n=e.clientY*o;(this.touchStartY-n>2||this.touchStartY-n<-2)&&(this.target-=this.touchStartY-n),this.target=this.limitTarget(this.target),this.touchStartY=n}}}},{key:"touchEndHandler",value:function(){this.isMoving=!1;var t=(Date.now()-this.touchTime)/1e3;t<.9&&(this.target+=.6*(this.target-this.move)/(5*t),this.target=this.limitTarget(this.target))}},{key:"loop",value:function(){this.needProcess?(this.isMoving?this.move!==this.target&&(Math.abs(this.target-this.move)>1?this.move+=.4*(this.target-this.move):this.move=this.target,this.scroll&&this.scroll(this.move)):this.move!==this.target?(Math.abs(this.target-this.move)>1?this.move+=.3*(this.target-this.move):this.move=this.target,this.scroll&&this.scroll(this.move)):this.needProcess=!1,this.animate=requestAnimationFrame(this.loop.bind(this))):"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(this.animate)}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var r=n(1);n(5),n(13);function o(t){return(o="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=new(n(4).default)("bitMapPool"),h=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i,r,s=t.style,u=void 0===s?{}:s,h=t.props,p=void 0===h?{}:h,f=t.idName,d=void 0===f?"":f,_=t.className,g=void 0===_?"":_,m=t.value,v=void 0===m?"":m,y=t.font,b=void 0===y?"":y;return i=this,(n=!(r=a(e).call(this,{props:p,idName:d,className:g,style:u}))||"object"!==o(r)&&"function"!=typeof r?l(i):r).type="BitMapText",n.ctx=null,n.valuesrc=v,n.renderBoxes=[],Object.defineProperty(l(n),"value",{get:function(){return this.valuesrc},set:function(t){t!==this.valuesrc&&(this.valuesrc=t,this.emit("repaint"))},enumerable:!0,configurable:!0}),n.font=c.get(b),n.font||console.error("Please invoke API `registBitMapFont` before using `BitMapText`"),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"insert",value:function(t,e){this.renderBoxes.push({ctx:t,box:e}),this.render(t,e)}},{key:"repaint",value:function(){var t=this;this.renderBoxes.forEach((function(e){t.render(e.ctx,e.box)}))}},{key:"render",value:function(t,e){var n=this;this.font&&(this.font.ready?this.renderText(t,e):this.font.event.on("text__load__done",(function(){n.renderText(t,e)})))}},{key:"getTextBounds",value:function(){for(var t=this.style.letterSpacing,e=void 0===t?0:t,n=0,i=0,r=this.value.length;i<r;i++){var o=this.value[i],s=this.font.chars[o];s&&(n+=s.w,i<r-1&&(n+=e))}return{width:n,height:this.font.lineHeight}}},{key:"renderText",value:function(t,e){var n=this.getTextBounds(),i=this.font.lineHeight;t.save(),this.renderBorder(t,e);var r=e||this.layoutBox,o=this.style,s=o.width,a=o.height,l=o.lineHeight,u=void 0===l?i:l,c=o.textAlign,h=(o.textBaseline,o.verticalAlign),p=r.absoluteX,f=r.absoluteY,d=u/i,_=d*n.width;u<a&&("middle"===h?f+=(a-u)/2:"bottom"===h?f=f+a-u:f+=(a-u)/2),s>_&&("center"===c?p+=(s-_)/2:"right"===c&&(p+=s-_));for(var g=0;g<this.value.length;g++){var m=this.value[g],v=this.font.chars[m];v&&(t.drawImage(this.font.texture,v.x,v.y,v.w,v.h,p+v.offX*d,f+v.offY*d,v.w*d,v.h*d),p+=v.w*d)}}}])&&s(n.prototype,i),r&&s(n,r),e}(r.default)}])},function(t,e,n){var i;!function(){"use strict";var r,o={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};o.encodeHTMLSource=function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(n,(function(t){return e[t]||t})):""}},r=function(){return this||(0,eval)("this")}(),t.exports?t.exports=o:void 0===(i=function(){return o}.call(e,n,e,t))||(t.exports=i);var s={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},a=/$^/;function l(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}o.template=function(t,e,n){var i,u,c=(e=e||o.templateSettings).append?s.append:s.split,h=0,p=e.use||e.define?function t(e,n,i){return("string"==typeof n?n:n.toString()).replace(e.define||a,(function(t,n,r,o){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in i||(":"===r?(e.defineParams&&o.replace(e.defineParams,(function(t,e,r){i[n]={arg:e,text:r}})),n in i||(i[n]=o)):new Function("def","def['"+n+"']="+o)(i)),""})).replace(e.use||a,(function(n,r){e.useParams&&(r=r.replace(e.useParams,(function(t,e,n,r){if(i[n]&&i[n].arg&&r){var o=(n+":"+r).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[o]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+r+"$2"),e+"def.__exp['"+o+"']"}})));var o=new Function("def","return "+r)(i);return o?t(e,o,i):o}))}(e,t,n||{}):t;p=("var out='"+(e.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(e.interpolate||a,(function(t,e){return c.start+l(e)+c.end})).replace(e.encode||a,(function(t,e){return i=!0,c.startencode+l(e)+c.end})).replace(e.conditional||a,(function(t,e,n){return e?n?"';}else if("+l(n)+"){out+='":"';}else{out+='":n?"';if("+l(n)+"){out+='":"';}out+='"})).replace(e.iterate||a,(function(t,e,n,i){return e?(h+=1,u=i||"i"+h,e=l(e),"';var arr"+h+"="+e+";if(arr"+h+"){var "+n+","+u+"=-1,l"+h+"=arr"+h+".length-1;while("+u+"<l"+h+"){"+n+"=arr"+h+"["+u+"+=1];out+='"):"';} } out+='"})).replace(e.evaluate||a,(function(t,e){return"';"+l(e)+"out+='"}))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),i&&(e.selfcontained||!r||r._encodeHTML||(r._encodeHTML=o.encodeHTMLSource(e.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+o.encodeHTMLSource.toString()+"("+(e.doNotSkipEncoded||"")+"));"+p);try{return new Function(e.varname,p)}catch(t){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),t}},o.compile=function(t,e){return o.template(t,null,e)}}()},function(t,e,n){!function(t){"use strict";var e=t.Pos;function n(t,e){return t.line-e.line||t.ch-e.ch}var i="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=new RegExp("<(/?)(["+i+"]["+i+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function o(t,e,n,i){this.line=e,this.ch=n,this.cm=t,this.text=t.getLine(e),this.min=i?Math.max(i.from,t.firstLine()):t.firstLine(),this.max=i?Math.min(i.to-1,t.lastLine()):t.lastLine()}function s(t,n){var i=t.cm.getTokenTypeAt(e(t.line,n));return i&&/\btag\b/.test(i)}function a(t){if(!(t.line>=t.max))return t.ch=0,t.text=t.cm.getLine(++t.line),!0}function l(t){if(!(t.line<=t.min))return t.text=t.cm.getLine(--t.line),t.ch=t.text.length,!0}function u(t){for(;;){var e=t.text.indexOf(">",t.ch);if(-1==e){if(a(t))continue;return}if(s(t,e+1)){var n=t.text.lastIndexOf("/",e),i=n>-1&&!/\S/.test(t.text.slice(n+1,e));return t.ch=e+1,i?"selfClose":"regular"}t.ch=e+1}}function c(t){for(;;){var e=t.ch?t.text.lastIndexOf("<",t.ch-1):-1;if(-1==e){if(l(t))continue;return}if(s(t,e+1)){r.lastIndex=e,t.ch=e;var n=r.exec(t.text);if(n&&n.index==e)return n}else t.ch=e}}function h(t){for(;;){r.lastIndex=t.ch;var e=r.exec(t.text);if(!e){if(a(t))continue;return}if(s(t,e.index+1))return t.ch=e.index+e[0].length,e;t.ch=e.index+1}}function p(t){for(;;){var e=t.ch?t.text.lastIndexOf(">",t.ch-1):-1;if(-1==e){if(l(t))continue;return}if(s(t,e+1)){var n=t.text.lastIndexOf("/",e),i=n>-1&&!/\S/.test(t.text.slice(n+1,e));return t.ch=e+1,i?"selfClose":"regular"}t.ch=e}}function f(t,n){for(var i=[];;){var r,o=h(t),s=t.line,a=t.ch-(o?o[0].length:0);if(!o||!(r=u(t)))return;if("selfClose"!=r)if(o[1]){for(var l=i.length-1;l>=0;--l)if(i[l]==o[2]){i.length=l;break}if(l<0&&(!n||n==o[2]))return{tag:o[2],from:e(s,a),to:e(t.line,t.ch)}}else i.push(o[2])}}function d(t,n){for(var i=[];;){var r=p(t);if(!r)return;if("selfClose"!=r){var o=t.line,s=t.ch,a=c(t);if(!a)return;if(a[1])i.push(a[2]);else{for(var l=i.length-1;l>=0;--l)if(i[l]==a[2]){i.length=l;break}if(l<0&&(!n||n==a[2]))return{tag:a[2],from:e(t.line,t.ch),to:e(o,s)}}}else c(t)}}t.registerHelper("fold","xml",(function(t,i){for(var r=new o(t,i.line,0);;){var s=h(r);if(!s||r.line!=i.line)return;var a=u(r);if(!a)return;if(!s[1]&&"selfClose"!=a){var l=e(r.line,r.ch),c=f(r,s[2]);return c&&n(c.from,l)>0?{from:l,to:c.from}:null}}})),t.findMatchingTag=function(t,i,r){var s=new o(t,i.line,i.ch,r);if(-1!=s.text.indexOf(">")||-1!=s.text.indexOf("<")){var a=u(s),l=a&&e(s.line,s.ch),h=a&&c(s);if(a&&h&&!(n(s,i)>0)){var p={from:e(s.line,s.ch),to:l,tag:h[2]};return"selfClose"==a?{open:p,close:null,at:"open"}:h[1]?{open:d(s,h[2]),close:p,at:"close"}:{open:p,close:f(s=new o(t,l.line,l.ch,r),h[2]),at:"open"}}}},t.findEnclosingTag=function(t,e,n,i){for(var r=new o(t,e.line,e.ch,n);;){var s=d(r,i);if(!s)break;var a=f(new o(t,e.line,e.ch,n),s.tag);if(a)return{open:s,close:a}}},t.scanForClosingTag=function(t,e,n,i){return f(new o(t,e.line,e.ch,i?{from:0,to:i}:null),n)}}(n(0))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _template_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_style_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_js_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),codemirror__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),codemirror__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(codemirror__WEBPACK_IMPORTED_MODULE_3__),_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_index__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_index__WEBPACK_IMPORTED_MODULE_4__),dot__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7),dot__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(dot__WEBPACK_IMPORTED_MODULE_5__),beautify=__webpack_require__(10).js,localTemplate=localStorage.getItem("template"),localCss=localStorage.getItem("css"),localJs=localStorage.getItem("js");function run(){document.getElementById("error").innerHTML="";try{eval(window.js.getValue()),localStorage.setItem("template",window.xml.getValue()),localStorage.setItem("css",window.style.getValue()),localStorage.setItem("js",window.js.getValue());var comment="/**\n * xml经过doT.js编译出的模板函数\n * 因为小游戏不支持new Function，模板函数只能外部编译\n * 可直接拷贝本函数到小游戏中使用\n */\n",be=beautify(String(dot__WEBPACK_IMPORTED_MODULE_5___default.a.template(window.xml.getValue())),{indent_size:4,space_in_empty_paren:!0});window.dot.setValue(comment+be),console.log(_index__WEBPACK_IMPORTED_MODULE_4___default.a)}catch(t){console.log(t),document.getElementById("error").innerHTML=t}}window.doT=dot__WEBPACK_IMPORTED_MODULE_5___default.a,window.CodeMirror=codemirror__WEBPACK_IMPORTED_MODULE_3___default.a,window.Layout=_index__WEBPACK_IMPORTED_MODULE_4___default.a,__webpack_require__(12),__webpack_require__(8),__webpack_require__(13),__webpack_require__(14),__webpack_require__(15),__webpack_require__(16),__webpack_require__(17),__webpack_require__(18),window.xml=codemirror__WEBPACK_IMPORTED_MODULE_3___default()(document.getElementById("xml"),{value:localTemplate||_template_js__WEBPACK_IMPORTED_MODULE_0__.a,mode:"text/html",lineNumbers:!0}),window.style=codemirror__WEBPACK_IMPORTED_MODULE_3___default()(document.getElementById("style"),{value:localCss||_style_js__WEBPACK_IMPORTED_MODULE_1__.a,lineNumbers:!0,mode:"text/javascript",matchTags:{bothTags:!0},extraKeys:{"Ctrl-J":"toMatchingTag"}}),window.js=codemirror__WEBPACK_IMPORTED_MODULE_3___default()(document.getElementById("js"),{value:localJs||_js_js__WEBPACK_IMPORTED_MODULE_2__.a,lineNumbers:!0,mode:"text/javascript",matchTags:{bothTags:!0},extraKeys:{"Ctrl-J":"toMatchingTag"}}),window.dot=codemirror__WEBPACK_IMPORTED_MODULE_3___default()(document.getElementById("dot"),{value:"",lineNumbers:!0,mode:"text/javascript",matchTags:{bothTags:!0},extraKeys:{"Ctrl-J":"toMatchingTag"}}),setTimeout((function(){run()}),0),document.getElementById("run").onclick=function(){run()},document.getElementById("reset").onclick=function(){window.xml.setValue(_template_js__WEBPACK_IMPORTED_MODULE_0__.a),window.style.setValue(_style_js__WEBPACK_IMPORTED_MODULE_1__.a),window.js.setValue(_js_js__WEBPACK_IMPORTED_MODULE_2__.a),setTimeout((function(){run()}),0)};var items=[].slice.call(document.getElementsByClassName("panels__item")),panels=[].slice.call(document.getElementsByClassName("code")),status=panels.map((function(t){return 1}));function resetSize(){var t=panels.filter((function(t){return"none"!==t.style.display})).length;items.forEach((function(t,e){t.className=status[e]?"panels__item active":"panels__item"})),panels.forEach((function(e){e.style.width=1/t*100+"%"}))}localStorage.getItem("panels")&&(status=JSON.parse(localStorage.getItem("panels")),panels.forEach((function(t,e){0===status[e]&&(t.style.display="none")})),resetSize());for(var _loop=function(t){var e=items[t];e.onclick=function(){panels.filter((function(t){return"none"!==t.style.display})).length;var n=document.getElementById(e.dataset.panel),i=n.style.display;n.style.display=""===i?"none":"",status[t]=""===i?0:1,localStorage.setItem("panels",JSON.stringify(status)),resetSize(),run()}},i=0;i<items.length;i++)_loop(i)},function(t,e,n){"use strict";var i,r;i=[n(1),n(2),n(11)],void 0===(r=function(t,e,n){return function(t,e,n){var i=function(e,n){return t.js_beautify(e,n)};return i.js=t.js_beautify,i.css=e.css_beautify,i.html=n.html_beautify,i.js_beautify=t.js_beautify,i.css_beautify=e.css_beautify,i.html_beautify=n.html_beautify,i}(t,e,n)}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o;o=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([,,function(t,e,n){"use strict";function i(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function r(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,e){this.__indent_cache=new r(t,e),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new i(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}i.prototype.clone_empty=function(){var t=new i(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},i.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},i.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},i.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},i.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},i.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},i.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},i.prototype.is_empty=function(){return 0===this.__items.length},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf("\n");-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},i.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},i.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},i.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},i.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t},r.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},r.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=""),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},r.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},r.prototype.__add_column=function(){var t=this.__cache.length,e=0,n="";this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(" ")),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&("\n"===e[e.length-1]&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,e){for(var n=this.__lines.length-2;n>=0;){var r=this.__lines[n];if(r.is_empty())break;if(0!==r.item(0).indexOf(t)&&r.item(-1)!==e){this.__lines.splice(n+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},t.exports.Output=o},function(t,e,n){"use strict";t.exports.Token=function(t,e,n,i){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(t,e,n){"use strict";function i(t,e){this.raw_options=r(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function r(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t)n[e.replace(/-/g,"_")]=t[e];return n}i.prototype._get_array=function(t,e){var n=this.raw_options[t],i=e||[];return"object"==typeof n?null!==n&&"function"==typeof n.concat&&(i=n.concat()):"string"==typeof n&&(i=n.split(/[^a-zA-Z0-9_\/\-]+/)),i},i.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},i.prototype._get_characters=function(t,e){var n=this.raw_options[t],i=e||"";return"string"==typeof n&&(i=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),i},i.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var i=parseInt(n,10);return isNaN(i)&&(i=e),i},i.prototype._get_selection=function(t,e,n){var i=this._get_selection_list(t,e,n);if(1!==i.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i[0]},i.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var i=this._get_array(t,n);if(!this._is_valid_selection(i,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i},i.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=i,t.exports.normalizeOpts=o,t.exports.mergeOpts=r},,function(t,e,n){"use strict";var i=RegExp.prototype.hasOwnProperty("sticky");function r(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}r.prototype.restart=function(){this.__position=0},r.prototype.back=function(){this.__position>0&&(this.__position-=1)},r.prototype.hasNext=function(){return this.__position<this.__input_length},r.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},r.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},r.prototype.__match=function(t,e){t.lastIndex=e;var n=t.exec(this.__input);return!n||i&&t.sticky||n.index!==e&&(n=null),n},r.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},r.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},r.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},r.prototype.read=function(t,e,n){var i,r="";return t&&(i=this.match(t))&&(r+=i[0]),!e||!i&&t||(r+=this.readUntil(e,n)),r},r.prototype.readUntil=function(t,e){var n,i=this.__position;t.lastIndex=this.__position;var r=t.exec(this.__input);return r?(i=r.index,e&&(i+=r[0].length)):i=this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n},r.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},r.prototype.get_regexp=function(t,e){var n=null,r="g";return e&&i&&(r="y"),"string"==typeof t&&""!==t?n=new RegExp(t,r):t&&(n=new RegExp(t.source,r)),n},r.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},r.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},r.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=r},function(t,e,n){"use strict";var i=n(8).InputScanner,r=n(3).Token,o=n(10).TokenStream,s=n(11).WhitespacePattern,a={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},l=function(t,e){this._input=new i(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};l.prototype.tokenize=function(){var t;this._input.restart(),this.__tokens=new o,this._reset();for(var e=new r(a.START,""),n=null,i=[],s=new o;e.type!==a.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)s.add(t),t=this._get_next_token(e,n);s.isEmpty()||(t.comments_before=s,s=new o),t.parent=n,this._is_opening(t)?(i.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=i.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(a.RAW,n):this._create_token(a.EOF,"")},l.prototype._is_comment=function(t){return!1},l.prototype._is_opening=function(t){return!1},l.prototype._is_closing=function(t,e){return!1},l.prototype._create_token=function(t,e){return new r(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},t.exports.Tokenizer=l,t.exports.TOKEN=a},function(t,e,n){"use strict";function i(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}i.prototype.restart=function(){this.__position=0},i.prototype.isEmpty=function(){return 0===this.__tokens_length},i.prototype.hasNext=function(){return this.__position<this.__tokens_length},i.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},i.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},i.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=i},function(t,e,n){"use strict";var i=n(12).Pattern;function r(t,e){i.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}r.prototype=new i,r.prototype.__set_whitespace_patterns=function(t,e){t+="\\t ",e+="\\n\\r",this._match_pattern=this._input.get_regexp("["+t+e+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")},r.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t=this._input.read(this._match_pattern);if(" "===t)this.whitespace_before_token=" ";else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t},r.prototype.matching=function(t,e){var n=this._create();return n.__set_whitespace_patterns(t,e),n._update(),n},r.prototype._create=function(){return new r(this._input,this)},r.prototype.__split=function(t,e){t.lastIndex=0;for(var n=0,i=[],r=t.exec(e);r;)i.push(e.substring(n,r.index)),n=r.index+r[0].length,r=t.exec(e);return n<e.length?i.push(e.substring(n,e.length)):i.push(""),i},t.exports.WhitespacePattern=r},function(t,e,n){"use strict";function i(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}i.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},i.prototype.read_match=function(){return this._input.match(this._match_pattern)},i.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},i.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},i.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},i.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){},t.exports.Pattern=i},function(t,e,n){"use strict";function i(t,e){t="string"==typeof t?t:t.source,e="string"==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}i.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},i.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=i},function(t,e,n){"use strict";var i=n(12).Pattern,r={django:!1,erb:!1,handlebars:!1,php:!1};function o(t,e){i.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},r),this._excluded=Object.assign({},r),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var n=new i(t);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/)}}o.prototype=new i,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},o.prototype.read_options=function(t){var e=this._create();for(var n in r)e._disabled[n]=-1===t.templating.indexOf(n);return e._update(),e},o.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},o.prototype.read=function(){var t="";t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},o.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+t.join("|")+")")},o.prototype._read_template=function(){var t="",e=this._input.peek();if("<"===e){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(t=t||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(t=t||this.__patterns.erb.read())}else"{"===e&&(this._disabled.handlebars||this._excluded.handlebars||(t=(t=(t=t||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=(t=t||this.__patterns.django_comment.read())||this.__patterns.django.read())));return t},t.exports.TemplatablePattern=o},,,,function(t,e,n){"use strict";var i=n(19).Beautifier,r=n(20).Options;t.exports=function(t,e,n,r){return new i(t,e,n,r).beautify()},t.exports.defaultOptions=function(){return new r}},function(t,e,n){"use strict";var i=n(20).Options,r=n(2).Output,o=n(21).Tokenizer,s=n(21).TOKEN,a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,u=function(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new r(t,e)};u.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)},u.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e},u.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},u.prototype.add_raw_token=function(t){this._output.add_raw_token(t)},u.prototype.print_preserved_newlines=function(t){var e=0;t.type!==s.TEXT&&t.previous.type!==s.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var n=0;n<e;n++)this.print_newline(n>0);return 0!==e},u.prototype.traverse_whitespace=function(t){return!(!t.whitespace_before&&!t.newlines||(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),0))},u.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},u.prototype.print_newline=function(t){this._output.add_new_line(t)},u.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))},u.prototype.indent=function(){this.indent_level++},u.prototype.get_full_indent=function(t){return(t=this.indent_level+(t||0))<1?"":this._output.get_indent_string(t)};var c=function(t,e){var n=null,i=null;return e.closed?("script"===t?n="text/javascript":"style"===t&&(n="text/css"),(n=function(t){for(var e=null,n=t.next;n.type!==s.EOF&&t.closed!==n;){if(n.type===s.ATTRIBUTE&&"type"===n.text){n.next&&n.next.type===s.EQUALS&&n.next.next&&n.next.next.type===s.VALUE&&(e=n.next.next.text);break}n=n.next}return e}(e)||n).search("text/css")>-1?i="css":n.search(/(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1?i="javascript":n.search(/(text|application|dojo)\/(x-)?(html)/)>-1?i="html":n.search(/test\/null/)>-1&&(i="null"),i):null};function h(t,e){return-1!==e.indexOf(t)}function p(t,e,n){this.parent=t||null,this.tag=e?e.tag_name:"",this.indent_level=n||0,this.parser_token=e||null}function f(t){this._printer=t,this._current_frame=null}function d(t,e,n,r){this._source_text=t||"",e=e||{},this._js_beautify=n,this._css_beautify=r,this._tag_stack=null;var o=new i(e,"html");this._options=o,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}f.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},f.prototype.record_tag=function(t){var e=new p(this._current_frame,t,this._printer.indent_level);this._current_frame=e},f.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e},f.prototype._get_frame=function(t,e){for(var n=this._current_frame;n&&-1===t.indexOf(n.tag);){if(e&&-1!==e.indexOf(n.tag)){n=null;break}n=n.parent}return n},f.prototype.try_pop=function(t,e){var n=this._get_frame([t],e);return this._try_pop_frame(n)},f.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)},d.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;"auto"===this._options.eol&&(e="\n",t&&a.test(t)&&(e=t.match(a)[0]));var n=(t=t.replace(l,"\n")).match(/^[\t ]*/)[0],i={text:"",type:""},r=new _,c=new u(this._options,n),h=new o(t,this._options).tokenize();this._tag_stack=new f(c);for(var p=null,d=h.next();d.type!==s.EOF;)d.type===s.TAG_OPEN||d.type===s.COMMENT?r=p=this._handle_tag_open(c,d,r,i):d.type===s.ATTRIBUTE||d.type===s.EQUALS||d.type===s.VALUE||d.type===s.TEXT&&!r.tag_complete?p=this._handle_inside_tag(c,d,r,h):d.type===s.TAG_CLOSE?p=this._handle_tag_close(c,d,r):d.type===s.TEXT?p=this._handle_text(c,d,r):c.add_raw_token(d),i=p,d=h.next();return c._output.get_code(e)},d.prototype._handle_tag_close=function(t,e,n){var i={text:e.text,type:e.type};return t.alignment_size=0,n.tag_complete=!0,t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):("<"===n.tag_start_char&&(t.set_space_before_token("/"===e.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(t.indent(),n.indent_content=!1),n.is_inline_element||n.is_unformatted||n.is_content_unformatted||t.set_wrap_point(),i},d.prototype._handle_inside_tag=function(t,e,n,i){var r=n.has_wrapped_attrs,o={text:e.text,type:e.type};if(t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),n.is_unformatted)t.add_raw_token(e);else if("{"===n.tag_start_char&&e.type===s.TEXT)t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e);else{if(e.type===s.ATTRIBUTE?(t.set_space_before_token(!0),n.attr_count+=1):e.type===s.EQUALS?t.set_space_before_token(!1):e.type===s.VALUE&&e.previous.type===s.EQUALS&&t.set_space_before_token(!1),e.type===s.ATTRIBUTE&&"<"===n.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),r=r||0!==e.newlines),this._is_wrap_attributes_force)){var a=n.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&1===n.attr_count){var l,u=!0,c=0;do{if((l=i.peek(c)).type===s.ATTRIBUTE){u=!1;break}c+=1}while(c<4&&l.type!==s.EOF&&l.type!==s.TAG_CLOSE);a=!u}a&&(t.print_newline(!1),r=!0)}t.print_token(e),r=r||t.previous_token_wrapped(),n.has_wrapped_attrs=r}return o},d.prototype._handle_text=function(t,e,n){var i={text:e.text,type:"TK_CONTENT"};return n.custom_beautifier_name?this._print_custom_beatifier_text(t,e,n):n.is_unformatted||n.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),i},d.prototype._print_custom_beatifier_text=function(t,e,n){var i=this;if(""!==e.text){var r,o=e.text,s=1,a="",l="";"javascript"===n.custom_beautifier_name&&"function"==typeof this._js_beautify?r=this._js_beautify:"css"===n.custom_beautifier_name&&"function"==typeof this._css_beautify?r=this._css_beautify:"html"===n.custom_beautifier_name&&(r=function(t,e){return new d(t,e,i._js_beautify,i._css_beautify).beautify()}),"keep"===this._options.indent_scripts?s=0:"separate"===this._options.indent_scripts&&(s=-t.indent_level);var u=t.get_full_indent(s);if(o=o.replace(/\n[ \t]*$/,""),"html"!==n.custom_beautifier_name&&"<"===o[0]&&o.match(/^(<!--|<!\[CDATA\[)/)){var c=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(o);if(!c)return void t.add_raw_token(e);a=u+c[1]+"\n",o=c[4],c[5]&&(l=u+c[5]),o=o.replace(/\n[ \t]*$/,""),(c[2]||-1!==c[3].indexOf("\n"))&&(c=c[3].match(/[ \t]+$/))&&(e.whitespace_before=c[0])}if(o)if(r){var h=function(){this.eol="\n"};h.prototype=this._options.raw_options,o=r(u+o,new h)}else{var p=e.whitespace_before;p&&(o=o.replace(new RegExp("\n("+p+")?","g"),"\n")),o=u+o.replace(/\n/g,"\n"+u)}a&&(o=o?a+o+"\n"+l:a+l),t.print_newline(!1),o&&(e.text=o,e.whitespace_before="",e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}},d.prototype._handle_tag_open=function(t,e,n,i){var r=this._get_tag_open_token(e);return(n.is_unformatted||n.is_content_unformatted)&&e.type===s.TAG_OPEN&&0===e.text.indexOf("</")?t.add_raw_token(e):(t.traverse_whitespace(e),this._set_tag_position(t,e,r,n,i),r.is_inline_element||t.set_wrap_point(),t.print_token(e)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(r.alignment_size=e.text.length+1),r.tag_complete||r.is_unformatted||(t.alignment_size=r.alignment_size),r};var _=function(t,e){var n;this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",e?(this.tag_start_char=e.text[0],this.text=e.text,"<"===this.tag_start_char?(n=e.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=e.text.match(/^{{[#\^]?([^\s}]+)/),this.tag_check=n?n[1]:""),this.tag_check=this.tag_check.toLowerCase(),e.type===s.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&"/>"===e.closed.text,this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))):this.tag_complete=!0};d.prototype._get_tag_open_token=function(t){var e=new _(this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||h(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&h(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&h(e.tag_check,this._options.content_unformatted),e.is_inline_element=h(e.tag_name,this._options.inline)||"{"===e.tag_start_char,e},d.prototype._set_tag_position=function(t,e,n,i,r){n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&(n.is_inline_element||(n.parent&&(n.parent.multiline_content=!0),t.print_newline(!1))),this._tag_stack.record_tag(n),"script"!==n.tag_name&&"style"!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier_name=c(n.tag_check,e)))),h(n.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),n.is_empty_element?("{"===n.tag_start_char&&"else"===n.tag_check&&(this._tag_stack.indent_to_tag(["if","unless","each"]),n.indent_content=!0,t.current_line_has_match(/{{#if/)||t.print_newline(!1)),"!--"===n.tag_name&&r.type===s.TAG_CLOSE&&i.is_end_tag&&-1===n.text.indexOf("\n")||n.is_inline_element||n.is_unformatted||t.print_newline(!1)):n.is_unformatted||n.is_content_unformatted?n.is_inline_element||n.is_unformatted||t.print_newline(!1):n.is_end_tag?(n.start_tag_token&&n.start_tag_token.multiline_content||!(n.is_inline_element||i.is_inline_element||r.type===s.TAG_CLOSE&&n.start_tag_token===i||"TK_CONTENT"===r.type))&&t.print_newline(!1):(n.indent_content=!n.custom_beautifier_name,"<"===n.tag_start_char&&("html"===n.tag_name?n.indent_content=this._options.indent_inner_html:"head"===n.tag_name?n.indent_content=this._options.indent_head_inner_html:"body"===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||"TK_CONTENT"===r.type||(n.parent&&(n.parent.multiline_content=!0),t.print_newline(!1)))},d.prototype._do_optional_end_element=function(t){var e=null;if(!t.is_empty_element&&t.is_start_tag&&t.parent)return"body"===t.tag_name?e=e||this._tag_stack.try_pop("head"):"li"===t.tag_name?e=e||this._tag_stack.try_pop("li",["ol","ul"]):"dd"===t.tag_name||"dt"===t.tag_name?e=(e=e||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]):"rp"===t.tag_name||"rt"===t.tag_name?e=(e=e||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):"optgroup"===t.tag_name?e=e||this._tag_stack.try_pop("optgroup",["select"]):"option"===t.tag_name?e=e||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===t.tag_name?e=e||this._tag_stack.try_pop("caption",["table"]):"thead"===t.tag_name?e=(e=e||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):"tbody"===t.tag_name||"tfoot"===t.tag_name?e=(e=(e=(e=e||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):"tr"===t.tag_name?e=(e=(e=e||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):"th"!==t.tag_name&&"td"!==t.tag_name||(e=(e=e||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"])),t.parent=this._tag_stack.get_parser_token(),e},t.exports.Beautifier=d},function(t,e,n){"use strict";var i=n(6).Options;function r(t){i.call(this,t,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}r.prototype=new i,t.exports.Options=r},function(t,e,n){"use strict";var i=n(9).Tokenizer,r=n(9).TOKEN,o=n(13).Directives,s=n(14).TemplatablePattern,a=n(12).Pattern,l={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:r.START,RAW:r.RAW,EOF:r.EOF},u=new o(/<\!--/,/-->/),c=function(t,e){i.call(this,t,e),this._current_tag_name="";var n=new s(this._input).read_options(this._options),r=new a(this._input);if(this.__patterns={word:n.until(/[\n\r\t <]/),single_quote:n.until_after(/'/),double_quote:n.until_after(/"/),attribute:n.until(/[\n\r\t =\/>]/),element_name:n.until(/[\n\r\t >\/]/),handlebars_comment:r.starting_with(/{{!--/).until_after(/--}}/),handlebars:r.starting_with(/{{/).until_after(/}}/),handlebars_open:r.until(/[\n\r\t }]/),handlebars_raw_close:r.until(/}}/),comment:r.starting_with(/<!--/).until_after(/-->/),cdata:r.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:r.starting_with(/<!\[/).until_after(/]>/),processing:r.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var o=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=r.matching(o).until_after(o)}};(c.prototype=new i)._is_comment=function(t){return!1},c.prototype._is_opening=function(t){return t.type===l.TAG_OPEN},c.prototype._is_closing=function(t,e){return t.type===l.TAG_CLOSE&&e&&((">"===t.text||"/>"===t.text)&&"<"===e.text[0]||"}}"===t.text&&"{"===e.text[0]&&"{"===e.text[1])},c.prototype._reset=function(){this._current_tag_name=""},c.prototype._get_next_token=function(t,e){var n=null;this._readWhitespace();var i=this._input.peek();return null===i?this._create_token(l.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_open_handlebars(i,e))||this._read_attribute(i,t,e))||this._read_raw_content(i,t,e))||this._read_close(i,e))||this._read_content_word(i))||this._read_comment_or_cdata(i))||this._read_processing(i))||this._read_open(i,e))||this._create_token(l.UNKNOWN,this._input.next())},c.prototype._read_comment_or_cdata=function(t){var e=null,n=null,i=null;return"<"===t&&("!"===this._input.peek(1)&&((n=this.__patterns.comment.read())?(i=u.get_directives(n))&&"start"===i.ignore&&(n+=u.readIgnored(this._input)):n=this.__patterns.cdata.read()),n&&((e=this._create_token(l.COMMENT,n)).directives=i)),e},c.prototype._read_processing=function(t){var e=null,n=null;if("<"===t){var i=this._input.peek(1);"!"!==i&&"?"!==i||(n=(n=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),n&&((e=this._create_token(l.COMMENT,n)).directives=null)}return e},c.prototype._read_open=function(t,e){var n=null,i=null;return e||"<"===t&&(n=this._input.next(),"/"===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),i=this._create_token(l.TAG_OPEN,n)),i},c.prototype._read_open_handlebars=function(t,e){var n=null,i=null;return e||this._options.indent_handlebars&&"{"===t&&"{"===this._input.peek(1)&&("!"===this._input.peek(2)?(n=(n=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),i=this._create_token(l.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),i=this._create_token(l.TAG_OPEN,n))),i},c.prototype._read_close=function(t,e){var n=null,i=null;return e&&("<"===e.text[0]&&(">"===t||"/"===t&&">"===this._input.peek(1))?(n=this._input.next(),"/"===t&&(n+=this._input.next()),i=this._create_token(l.TAG_CLOSE,n)):"{"===e.text[0]&&"}"===t&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),i=this._create_token(l.TAG_CLOSE,"}}"))),i},c.prototype._read_attribute=function(t,e,n){var i=null,r="";if(n&&"<"===n.text[0])if("="===t)i=this._create_token(l.EQUALS,this._input.next());else if('"'===t||"'"===t){var o=this._input.next();o+='"'===t?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),i=this._create_token(l.VALUE,o)}else(r=this.__patterns.attribute.read())&&(i=e.type===l.EQUALS?this._create_token(l.VALUE,r):this._create_token(l.ATTRIBUTE,r));return i},c.prototype._is_content_unformatted=function(t){return-1===this._options.void_elements.indexOf(t)&&(-1!==this._options.content_unformatted.indexOf(t)||-1!==this._options.unformatted.indexOf(t))},c.prototype._read_raw_content=function(t,e,n){var i="";if(n&&"{"===n.text[0])i=this.__patterns.handlebars_raw_close.read();else if(e.type===l.TAG_CLOSE&&"<"===e.opened.text[0]){var r=e.opened.text.substr(1).toLowerCase();if("script"===r||"style"===r){var o=this._read_comment_or_cdata(t);if(o)return o.type=l.TEXT,o;i=this._input.readUntil(new RegExp("</"+r+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(r)&&(i=this._input.readUntil(new RegExp("</"+r+"[\\n\\r\\t ]*?>","ig")))}return i?this._create_token(l.TEXT,i):null},c.prototype._read_content_word=function(t){var e="";if(this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]&&(e=this.__patterns.unformatted_content_delimiter.read()),e||(e=this.__patterns.word.read()),e)return this._create_token(l.TEXT,e)},t.exports.Tokenizer=c,t.exports.TOKEN=l}]),i=[n,n(1),n(2)],void 0===(r=function(t){var e=n(1),i=n(2);return{html_beautify:function(t,n){return o(t,n,e.js_beautify,i.css_beautify)}}}.apply(e,i))||(t.exports=r)},function(t,e,n){!function(t){"use strict";var e="CodeMirror-hint",n="CodeMirror-hint-active";function i(t,e){this.cm=t,this.options=e,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;t.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}t.showHint=function(t,e,n){if(!e)return t.showHint(n);n&&n.async&&(e.async=!0);var i={hint:e};if(n)for(var r in n)i[r]=n[r];return t.showHint(i)},t.defineExtension("showHint",(function(e){e=function(t,e,n){var i=t.options.hintOptions,r={};for(var o in c)r[o]=c[o];if(i)for(var o in i)void 0!==i[o]&&(r[o]=i[o]);if(n)for(var o in n)void 0!==n[o]&&(r[o]=n[o]);return r.hint.resolve&&(r.hint=r.hint.resolve(t,e)),r}(this,this.getCursor("start"),e);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!e.hint.supportsSelection)return;for(var r=0;r<n.length;r++)if(n[r].head.line!=n[r].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var o=this.state.completionActive=new i(this,e);o.options.hint&&(t.signal(this,"startCompletion",this),o.update(!0))}})),t.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var r=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},o=window.cancelAnimationFrame||clearTimeout;function s(t){return"string"==typeof t?t:t.text}function a(t,e){for(;e&&e!=t;){if("LI"===e.nodeName.toUpperCase()&&e.parentNode==t)return e;e=e.parentNode}}function l(i,r){this.completion=i,this.data=r,this.picked=!1;var o=this,l=i.cm,u=l.getInputField().ownerDocument,c=u.defaultView||u.parentWindow,h=this.hints=u.createElement("ul"),p=i.cm.options.theme;h.className="CodeMirror-hints "+p,this.selectedHint=r.selectedHint||0;for(var f=r.list,d=0;d<f.length;++d){var _=h.appendChild(u.createElement("li")),g=f[d],m=e+(d!=this.selectedHint?"":" "+n);null!=g.className&&(m=g.className+" "+m),_.className=m,g.render?g.render(_,r,g):_.appendChild(u.createTextNode(g.displayText||s(g))),_.hintId=d}var v=i.options.container||u.body,y=l.cursorCoords(i.options.alignWithWord?r.from:null),b=y.left,w=y.bottom,x=!0,k=0,C=0;if(v!==u.body){var T=-1!==["absolute","relative","fixed"].indexOf(c.getComputedStyle(v).position)?v:v.offsetParent,S=T.getBoundingClientRect(),O=u.body.getBoundingClientRect();k=S.left-O.left-T.scrollLeft,C=S.top-O.top-T.scrollTop}h.style.left=b-k+"px",h.style.top=w-C+"px";var E=c.innerWidth||Math.max(u.body.offsetWidth,u.documentElement.offsetWidth),L=c.innerHeight||Math.max(u.body.offsetHeight,u.documentElement.offsetHeight);v.appendChild(h);var M=h.getBoundingClientRect(),A=M.bottom-L,N=h.scrollHeight>h.clientHeight+1,R=l.getScrollInfo();if(A>0){var P=M.bottom-M.top;if(y.top-(y.bottom-M.top)-P>0)h.style.top=(w=y.top-P-C)+"px",x=!1;else if(P>L){h.style.height=L-5+"px",h.style.top=(w=y.bottom-M.top-C)+"px";var D=l.getCursor();r.from.ch!=D.ch&&(y=l.cursorCoords(D),h.style.left=(b=y.left-k)+"px",M=h.getBoundingClientRect())}}var I,W=M.right-E;if(W>0&&(M.right-M.left>E&&(h.style.width=E-5+"px",W-=M.right-M.left-E),h.style.left=(b=y.left-W-k)+"px"),N)for(var B=h.firstChild;B;B=B.nextSibling)B.style.paddingRight=l.display.nativeBarWidth+"px";return l.addKeyMap(this.keyMap=function(t,e){var n={Up:function(){e.moveFocus(-1)},Down:function(){e.moveFocus(1)},PageUp:function(){e.moveFocus(1-e.menuSize(),!0)},PageDown:function(){e.moveFocus(e.menuSize()-1,!0)},Home:function(){e.setFocus(0)},End:function(){e.setFocus(e.length-1)},Enter:e.pick,Tab:e.pick,Esc:e.close};/Mac/.test(navigator.platform)&&(n["Ctrl-P"]=function(){e.moveFocus(-1)},n["Ctrl-N"]=function(){e.moveFocus(1)});var i=t.options.customKeys,r=i?{}:n;function o(t,i){var o;o="string"!=typeof i?function(t){return i(t,e)}:n.hasOwnProperty(i)?n[i]:i,r[t]=o}if(i)for(var s in i)i.hasOwnProperty(s)&&o(s,i[s]);var a=t.options.extraKeys;if(a)for(var s in a)a.hasOwnProperty(s)&&o(s,a[s]);return r}(i,{moveFocus:function(t,e){o.changeActive(o.selectedHint+t,e)},setFocus:function(t){o.changeActive(t)},menuSize:function(){return o.screenAmount()},length:f.length,close:function(){i.close()},pick:function(){o.pick()},data:r})),i.options.closeOnUnfocus&&(l.on("blur",this.onBlur=function(){I=setTimeout((function(){i.close()}),100)}),l.on("focus",this.onFocus=function(){clearTimeout(I)})),l.on("scroll",this.onScroll=function(){var t=l.getScrollInfo(),e=l.getWrapperElement().getBoundingClientRect(),n=w+R.top-t.top,r=n-(c.pageYOffset||(u.documentElement||u.body).scrollTop);if(x||(r+=h.offsetHeight),r<=e.top||r>=e.bottom)return i.close();h.style.top=n+"px",h.style.left=b+R.left-t.left+"px"}),t.on(h,"dblclick",(function(t){var e=a(h,t.target||t.srcElement);e&&null!=e.hintId&&(o.changeActive(e.hintId),o.pick())})),t.on(h,"click",(function(t){var e=a(h,t.target||t.srcElement);e&&null!=e.hintId&&(o.changeActive(e.hintId),i.options.completeOnSingleClick&&o.pick())})),t.on(h,"mousedown",(function(){setTimeout((function(){l.focus()}),20)})),t.signal(r,"select",f[this.selectedHint],h.childNodes[this.selectedHint]),!0}function u(t,e,n,i){if(t.async)t(e,i,n);else{var r=t(e,n);r&&r.then?r.then(i):i(r)}}i.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&t.signal(this.data,"close"),this.widget&&this.widget.close(),t.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(e,n){var i=e.list[n];i.hint?i.hint(this.cm,e,i):this.cm.replaceRange(s(i),i.from||e.from,i.to||e.to,"complete"),t.signal(e,"pick",i),this.close()},cursorActivity:function(){this.debounce&&(o(this.debounce),this.debounce=0);var t=this.cm.getCursor(),e=this.cm.getLine(t.line);if(t.line!=this.startPos.line||e.length-t.ch!=this.startLen-this.startPos.ch||t.ch<this.startPos.ch||this.cm.somethingSelected()||!t.ch||this.options.closeCharacters.test(e.charAt(t.ch-1)))this.close();else{var n=this;this.debounce=r((function(){n.update()})),this.widget&&this.widget.disable()}},update:function(t){if(null!=this.tick){var e=this,n=++this.tick;u(this.options.hint,this.cm,this.options,(function(i){e.tick==n&&e.finishUpdate(i,t)}))}},finishUpdate:function(e,n){this.data&&t.signal(this.data,"update");var i=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=e,e&&e.list.length&&(i&&1==e.list.length?this.pick(e,0):(this.widget=new l(this,e),t.signal(e,"shown")))}},l.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var t=this.completion.cm;this.completion.options.closeOnUnfocus&&(t.off("blur",this.onBlur),t.off("focus",this.onFocus)),t.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var t=this;this.keyMap={Enter:function(){t.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(e,i){if(e>=this.data.list.length?e=i?this.data.list.length-1:0:e<0&&(e=i?0:this.data.list.length-1),this.selectedHint!=e){var r=this.hints.childNodes[this.selectedHint];r&&(r.className=r.className.replace(" "+n,"")),(r=this.hints.childNodes[this.selectedHint=e]).className+=" "+n,r.offsetTop<this.hints.scrollTop?this.hints.scrollTop=r.offsetTop-3:r.offsetTop+r.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=r.offsetTop+r.offsetHeight-this.hints.clientHeight+3),t.signal(this.data,"select",this.data.list[this.selectedHint],r)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},t.registerHelper("hint","auto",{resolve:function(e,n){var i,r=e.getHelpers(n,"hint");if(r.length){var o=function(t,e,n){var i=function(t,e){if(!t.somethingSelected())return e;for(var n=[],i=0;i<e.length;i++)e[i].supportsSelection&&n.push(e[i]);return n}(t,r);!function r(o){if(o==i.length)return e(null);u(i[o],t,n,(function(t){t&&t.list.length>0?e(t):r(o+1)}))}(0)};return o.async=!0,o.supportsSelection=!0,o}return(i=e.getHelper(e.getCursor(),"hintWords"))?function(e){return t.hint.fromList(e,{words:i})}:t.hint.anyword?function(e,n){return t.hint.anyword(e,n)}:function(){}}}),t.registerHelper("hint","fromList",(function(e,n){var i,r=e.getCursor(),o=e.getTokenAt(r),s=t.Pos(r.line,o.start),a=r;o.start<r.ch&&/\w/.test(o.string.charAt(r.ch-o.start-1))?i=o.string.substr(0,r.ch-o.start):(i="",s=r);for(var l=[],u=0;u<n.words.length;u++){var c=n.words[u];c.slice(0,i.length)==i&&l.push(c)}if(l.length)return{list:l,from:s,to:a}})),t.commands.autocomplete=t.showHint;var c={hint:t.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};t.defineOption("hintOptions",null)}(n(0))},function(t,e,n){!function(t){"use strict";function e(t){t.state.tagHit&&t.state.tagHit.clear(),t.state.tagOther&&t.state.tagOther.clear(),t.state.tagHit=t.state.tagOther=null}function n(n){n.state.failedTagMatch=!1,n.operation((function(){if(e(n),!n.somethingSelected()){var i=n.getCursor(),r=n.getViewport();r.from=Math.min(r.from,i.line),r.to=Math.max(i.line+1,r.to);var o=t.findMatchingTag(n,i,r);if(o){if(n.state.matchBothTags){var s="open"==o.at?o.open:o.close;s&&(n.state.tagHit=n.markText(s.from,s.to,{className:"CodeMirror-matchingtag"}))}var a="close"==o.at?o.open:o.close;a?n.state.tagOther=n.markText(a.from,a.to,{className:"CodeMirror-matchingtag"}):n.state.failedTagMatch=!0}}}))}function i(t){t.state.failedTagMatch&&n(t)}t.defineOption("matchTags",!1,(function(r,o,s){s&&s!=t.Init&&(r.off("cursorActivity",n),r.off("viewportChange",i),e(r)),o&&(r.state.matchBothTags="object"==typeof o&&o.bothTags,r.on("cursorActivity",n),r.on("viewportChange",i),n(r))})),t.commands.toMatchingTag=function(e){var n=t.findMatchingTag(e,e.getCursor());if(n){var i="close"==n.at?n.open:n.close;i&&e.extendSelection(i.to,i.from)}}}(n(0),n(8))},function(t,e,n){!function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",(function(i,r){var o,s,a=i.indentUnit,l={},u=r.htmlMode?e:n;for(var c in u)l[c]=u[c];for(var c in r)l[c]=r[c];function h(t,e){function n(n){return e.tokenize=n,n(t,e)}var i=t.next();return"<"==i?t.eat("!")?t.eat("[")?t.match("CDATA[")?n(f("atom","]]>")):null:t.match("--")?n(f("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(function t(e){return function(n,i){for(var r;null!=(r=n.next());){if("<"==r)return i.tokenize=t(e+1),i.tokenize(n,i);if(">"==r){if(1==e){i.tokenize=h;break}return i.tokenize=t(e-1),i.tokenize(n,i)}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=f("meta","?>"),"meta"):(o=t.eat("/")?"closeTag":"openTag",e.tokenize=p,"tag bracket"):"&"==i?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function p(t,e){var n,i,r=t.next();if(">"==r||"/"==r&&t.eat(">"))return e.tokenize=h,o=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return o="equals",null;if("<"==r){e.tokenize=h,e.state=m,e.tagName=e.tagStart=null;var s=e.tokenize(t,e);return s?s+" tag error":"tag error"}return/[\'\"]/.test(r)?(e.tokenize=(n=r,(i=function(t,e){for(;!t.eol();)if(t.next()==n){e.tokenize=p;break}return"string"}).isInAttribute=!0,i),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function f(t,e){return function(n,i){for(;!n.eol();){if(n.match(e)){i.tokenize=h;break}n.next()}return t}}function d(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,(l.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function _(t){t.context&&(t.context=t.context.prev)}function g(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!l.contextGrabbers.hasOwnProperty(n)||!l.contextGrabbers[n].hasOwnProperty(e))return;_(t)}}function m(t,e,n){return"openTag"==t?(n.tagStart=e.column(),v):"closeTag"==t?y:m}function v(t,e,n){return"word"==t?(n.tagName=e.current(),s="tag",x):l.allowMissingTagName&&"endTag"==t?(s="tag bracket",x(t,0,n)):(s="error",v)}function y(t,e,n){if("word"==t){var i=e.current();return n.context&&n.context.tagName!=i&&l.implicitlyClosed.hasOwnProperty(n.context.tagName)&&_(n),n.context&&n.context.tagName==i||!1===l.matchClosing?(s="tag",b):(s="tag error",w)}return l.allowMissingTagName&&"endTag"==t?(s="tag bracket",b(t,0,n)):(s="error",w)}function b(t,e,n){return"endTag"!=t?(s="error",b):(_(n),m)}function w(t,e,n){return s="error",b(t,0,n)}function x(t,e,n){if("word"==t)return s="attribute",k;if("endTag"==t||"selfcloseTag"==t){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||l.autoSelfClosers.hasOwnProperty(i)?g(n,i):(g(n,i),n.context=new d(n,i,r==n.indented)),m}return s="error",x}function k(t,e,n){return"equals"==t?C:(l.allowMissing||(s="error"),x(t,0,n))}function C(t,e,n){return"string"==t?T:"word"==t&&l.allowUnquoted?(s="string",x):(s="error",x(t,0,n))}function T(t,e,n){return"string"==t?T:x(t,0,n)}return h.isInText=!0,{startState:function(t){var e={tokenize:h,state:m,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;o=null;var n=e.tokenize(t,e);return(n||o)&&"comment"!=n&&(s=null,e.state=e.state(o||n,t,e),s&&(n="error"==s?n+" error":s)),n},indent:function(e,n,i){var r=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+a;if(r&&r.noIndent)return t.Pass;if(e.tokenize!=p&&e.tokenize!=h)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==l.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+a*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;r;){if(r.tagName==o[2]){r=r.prev;break}if(!l.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(o)for(;r;){var s=l.contextGrabbers[r.tagName];if(!s||!s.hasOwnProperty(o[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+a:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(t){t.state==C&&(t.state=x)},xmlCurrentTag:function(t){return t.tagName?{name:t.tagName,close:"closeTag"==t.type}:null},xmlCurrentContext:function(t){for(var e=[],n=t.context;n;n=n.prev)n.tagName&&e.push(n.tagName);return e.reverse()}}})),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n(0))},function(t,e,n){!function(t){var e=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=t.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function r(t){return t&&t.bracketRegex||/[(){}[\]]/}function o(t,e,o){var a=t.getLineHandle(e.line),l=e.ch-1,u=o&&o.afterCursor;null==u&&(u=/(^| )cm-fat-cursor($| )/.test(t.getWrapperElement().className));var c=r(o),h=!u&&l>=0&&c.test(a.text.charAt(l))&&i[a.text.charAt(l)]||c.test(a.text.charAt(l+1))&&i[a.text.charAt(++l)];if(!h)return null;var p=">"==h.charAt(1)?1:-1;if(o&&o.strict&&p>0!=(l==e.ch))return null;var f=t.getTokenTypeAt(n(e.line,l+1)),d=s(t,n(e.line,l+(p>0?1:0)),p,f||null,o);return null==d?null:{from:n(e.line,l),to:d&&d.pos,match:d&&d.ch==h.charAt(0),forward:p>0}}function s(t,e,o,s,a){for(var l=a&&a.maxScanLineLength||1e4,u=a&&a.maxScanLines||1e3,c=[],h=r(a),p=o>0?Math.min(e.line+u,t.lastLine()+1):Math.max(t.firstLine()-1,e.line-u),f=e.line;f!=p;f+=o){var d=t.getLine(f);if(d){var _=o>0?0:d.length-1,g=o>0?d.length:-1;if(!(d.length>l))for(f==e.line&&(_=e.ch-(o<0?1:0));_!=g;_+=o){var m=d.charAt(_);if(h.test(m)&&(void 0===s||t.getTokenTypeAt(n(f,_+1))==s)){var v=i[m];if(v&&">"==v.charAt(1)==o>0)c.push(m);else{if(!c.length)return{pos:n(f,_),ch:m};c.pop()}}}}}return f-o!=(o>0?t.lastLine():t.firstLine())&&null}function a(t,i,r){for(var s=t.state.matchBrackets.maxHighlightLineLength||1e3,a=[],l=t.listSelections(),u=0;u<l.length;u++){var c=l[u].empty()&&o(t,l[u].head,r);if(c&&t.getLine(c.from.line).length<=s){var h=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";a.push(t.markText(c.from,n(c.from.line,c.from.ch+1),{className:h})),c.to&&t.getLine(c.to.line).length<=s&&a.push(t.markText(c.to,n(c.to.line,c.to.ch+1),{className:h}))}}if(a.length){e&&t.state.focused&&t.focus();var p=function(){t.operation((function(){for(var t=0;t<a.length;t++)a[t].clear()}))};if(!i)return p;setTimeout(p,800)}}function l(t){t.operation((function(){t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null),t.state.matchBrackets.currentlyHighlighted=a(t,!1,t.state.matchBrackets)}))}t.defineOption("matchBrackets",!1,(function(e,n,i){i&&i!=t.Init&&(e.off("cursorActivity",l),e.state.matchBrackets&&e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null)),n&&(e.state.matchBrackets="object"==typeof n?n:{},e.on("cursorActivity",l))})),t.defineExtension("matchBrackets",(function(){a(this,!0)})),t.defineExtension("findMatchingBracket",(function(t,e,n){return(n||"boolean"==typeof e)&&(n?(n.strict=e,e=n):e=e?{strict:!0}:null),o(this,t,e)})),t.defineExtension("scanForBracket",(function(t,e,n,i){return s(this,t,e,n,i)}))}(n(0))},function(t,e,n){!function(t){var e=/\S/g,n=String.prototype.repeat||function(t){return Array(t+1).join(this)};function i(e){if(e.getOption("disableInput"))return t.Pass;for(var i,s=e.listSelections(),a=[],l=0;l<s.length;l++){var u=s[l].head;if(!/\bcomment\b/.test(e.getTokenTypeAt(u)))return t.Pass;var c=e.getModeAt(u);if(i){if(i!=c)return t.Pass}else i=c;var h,p,f=null,d=i.blockCommentStart,_=i.lineComment;if(d&&i.blockCommentContinue){var g=(h=e.getLine(u.line)).lastIndexOf(i.blockCommentEnd,u.ch-i.blockCommentEnd.length);if(-1!=g&&g==u.ch-i.blockCommentEnd.length||_&&(p=h.lastIndexOf(_,u.ch-1))>-1&&/\bcomment\b/.test(e.getTokenTypeAt({line:u.line,ch:p+1})));else if((p=h.lastIndexOf(d,u.ch-d.length))>-1&&p>g)if(r(0,h)>=p)f=h.slice(0,p);else{var m,v=e.options.tabSize;p=t.countColumn(h,p,v),f=e.options.indentWithTabs?n.call("\t",m=Math.floor(p/v))+n.call(" ",p-v*m):n.call(" ",p)}else(p=h.indexOf(i.blockCommentContinue))>-1&&p<=u.ch&&p<=r(0,h)&&(f=h.slice(0,p));null!=f&&(f+=i.blockCommentContinue)}if(null==f&&_&&o(e))if(null==h&&(h=e.getLine(u.line)),p=h.indexOf(_),u.ch||p){if(p>-1&&r(0,h)>=p){if(!(f=r(u.ch,h)>-1)){var y=e.getLine(u.line+1)||"",b=y.indexOf(_);f=b>-1&&r(0,y)>=b||null}f&&(f=h.slice(0,p)+_+h.slice(p+_.length).match(/^\s*/)[0])}}else f="";if(null==f)return t.Pass;a[l]="\n"+f}e.operation((function(){for(var t=s.length-1;t>=0;t--)e.replaceRange(a[t],s[t].from(),s[t].to(),"+insert")}))}function r(t,n){e.lastIndex=t;var i=e.exec(n);return i?i.index:-1}function o(t){var e=t.getOption("continueComments");return!e||"object"!=typeof e||!1!==e.continueLineComment}t.defineOption("continueComments",null,(function(e,n,r){if(r&&r!=t.Init&&e.removeKeyMap("continueComment"),n){var o="Enter";"string"==typeof n?o=n:"object"==typeof n&&n.key&&(o=n.key);var s={name:"continueComment"};s[o]=i,e.addKeyMap(s)}}))}(n(0))},function(t,e,n){!function(t){"use strict";var e={},n=/[^\s\u00a0]/,i=t.Pos;function r(t){var e=t.search(n);return-1==e?0:e}function o(t,e){var n=t.getMode();return!1!==n.useInnerComments&&n.innerMode?t.getModeAt(e):n}t.commands.toggleComment=function(t){t.toggleComment()},t.defineExtension("toggleComment",(function(t){t||(t=e);for(var n=1/0,r=this.listSelections(),o=null,s=r.length-1;s>=0;s--){var a=r[s].from(),l=r[s].to();a.line>=n||(l.line>=n&&(l=i(n,0)),n=a.line,null==o?this.uncomment(a,l,t)?o="un":(this.lineComment(a,l,t),o="line"):"un"==o?this.uncomment(a,l,t):this.lineComment(a,l,t))}})),t.defineExtension("lineComment",(function(t,s,a){a||(a=e);var l=this,u=o(l,t),c=l.getLine(t.line);if(null!=c&&(h=t,p=c,!/\bstring\b/.test(l.getTokenTypeAt(i(h.line,0)))||/^[\'\"\`]/.test(p))){var h,p,f=a.lineComment||u.lineComment;if(f){var d=Math.min(0!=s.ch||s.line==t.line?s.line+1:s.line,l.lastLine()+1),_=null==a.padding?" ":a.padding,g=a.commentBlankLines||t.line==s.line;l.operation((function(){if(a.indent){for(var e=null,o=t.line;o<d;++o){var s=(u=l.getLine(o)).slice(0,r(u));(null==e||e.length>s.length)&&(e=s)}for(o=t.line;o<d;++o){var u=l.getLine(o),c=e.length;(g||n.test(u))&&(u.slice(0,c)!=e&&(c=r(u)),l.replaceRange(e+f+_,i(o,0),i(o,c)))}}else for(o=t.line;o<d;++o)(g||n.test(l.getLine(o)))&&l.replaceRange(f+_,i(o,0))}))}else(a.blockCommentStart||u.blockCommentStart)&&(a.fullLines=!0,l.blockComment(t,s,a))}})),t.defineExtension("blockComment",(function(t,r,s){s||(s=e);var a=this,l=o(a,t),u=s.blockCommentStart||l.blockCommentStart,c=s.blockCommentEnd||l.blockCommentEnd;if(u&&c){if(!/\bcomment\b/.test(a.getTokenTypeAt(i(t.line,0)))){var h=Math.min(r.line,a.lastLine());h!=t.line&&0==r.ch&&n.test(a.getLine(h))&&--h;var p=null==s.padding?" ":s.padding;t.line>h||a.operation((function(){if(0!=s.fullLines){var e=n.test(a.getLine(h));a.replaceRange(p+c,i(h)),a.replaceRange(u+p,i(t.line,0));var o=s.blockCommentLead||l.blockCommentLead;if(null!=o)for(var f=t.line+1;f<=h;++f)(f!=h||e)&&a.replaceRange(o+p,i(f,0))}else a.replaceRange(c,r),a.replaceRange(u,t)}))}}else(s.lineComment||l.lineComment)&&0!=s.fullLines&&a.lineComment(t,r,s)})),t.defineExtension("uncomment",(function(t,r,s){s||(s=e);var a,l=this,u=o(l,t),c=Math.min(0!=r.ch||r.line==t.line?r.line:r.line-1,l.lastLine()),h=Math.min(t.line,c),p=s.lineComment||u.lineComment,f=[],d=null==s.padding?" ":s.padding;t:if(p){for(var _=h;_<=c;++_){var g=l.getLine(_),m=g.indexOf(p);if(m>-1&&!/comment/.test(l.getTokenTypeAt(i(_,m+1)))&&(m=-1),-1==m&&n.test(g))break t;if(m>-1&&n.test(g.slice(0,m)))break t;f.push(g)}if(l.operation((function(){for(var t=h;t<=c;++t){var e=f[t-h],n=e.indexOf(p),r=n+p.length;n<0||(e.slice(r,r+d.length)==d&&(r+=d.length),a=!0,l.replaceRange("",i(t,n),i(t,r)))}})),a)return!0}var v=s.blockCommentStart||u.blockCommentStart,y=s.blockCommentEnd||u.blockCommentEnd;if(!v||!y)return!1;var b=s.blockCommentLead||u.blockCommentLead,w=l.getLine(h),x=w.indexOf(v);if(-1==x)return!1;var k=c==h?w:l.getLine(c),C=k.indexOf(y,c==h?x+v.length:0),T=i(h,x+1),S=i(c,C+1);if(-1==C||!/comment/.test(l.getTokenTypeAt(T))||!/comment/.test(l.getTokenTypeAt(S))||l.getRange(T,S,"\n").indexOf(y)>-1)return!1;var O=w.lastIndexOf(v,t.ch),E=-1==O?-1:w.slice(0,t.ch).indexOf(y,O+v.length);if(-1!=O&&-1!=E&&E+y.length!=t.ch)return!1;E=k.indexOf(y,r.ch);var L=k.slice(r.ch).lastIndexOf(v,E-r.ch);return O=-1==E||-1==L?-1:r.ch+L,(-1==E||-1==O||O==r.ch)&&(l.operation((function(){l.replaceRange("",i(c,C-(d&&k.slice(C-d.length,C)==d?d.length:0)),i(c,C+y.length));var t=x+v.length;if(d&&w.slice(t,t+d.length)==d&&(t+=d.length),l.replaceRange("",i(h,x),i(h,t)),b)for(var e=h+1;e<=c;++e){var r=l.getLine(e),o=r.indexOf(b);if(-1!=o&&!n.test(r.slice(0,o))){var s=o+b.length;d&&r.slice(s,s+d.length)==d&&(s+=d.length),l.replaceRange("",i(e,o),i(e,s))}}})),!0)}))}(n(0))},function(t,e,n){!function(t){"use strict";t.defineMode("javascript",(function(e,n){var i,r,o=e.indentUnit,s=n.statementIndent,a=n.jsonld,l=n.json||a,u=n.typescript,c=n.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),i=t("keyword c"),r=t("keyword d"),o=t("operator"),s={type:"atom",style:"atom"};return{if:t("if"),while:e,with:e,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:t("new"),delete:i,void:i,throw:i,debugger:t("debugger"),var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:t("this"),class:t("class"),super:t("atom"),yield:i,export:t("export"),import:t("import"),extends:i,await:i}}(),p=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function d(t,e,n){return i=t,r=n,e}function _(t,e){var n,i=t.next();if('"'==i||"'"==i)return e.tokenize=(n=i,function(t,e){var i,r=!1;if(a&&"@"==t.peek()&&t.match(f))return e.tokenize=_,d("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=n||r);)r=!r&&"\\"==i;return r||(e.tokenize=_),d("string","string")}),e.tokenize(t,e);if("."==i&&t.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return d("number","number");if("."==i&&t.match(".."))return d("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return d(i);if("="==i&&t.eat(">"))return d("=>","operator");if("0"==i&&t.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return d("number","number");if(/\d/.test(i))return t.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),d("number","number");if("/"==i)return t.eat("*")?(e.tokenize=g,g(t,e)):t.eat("/")?(t.skipToEnd(),d("comment","comment")):Yt(t,e,1)?(function(t){for(var e,n=!1,i=!1;null!=(e=t.next());){if(!n){if("/"==e&&!i)return;"["==e?i=!0:i&&"]"==e&&(i=!1)}n=!n&&"\\"==e}}(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),d("regexp","string-2")):(t.eat("="),d("operator","operator",t.current()));if("`"==i)return e.tokenize=m,m(t,e);if("#"==i)return t.skipToEnd(),d("error","error");if("<"==i&&t.match("!--")||"-"==i&&t.match("->"))return t.skipToEnd(),d("comment","comment");if(p.test(i))return">"==i&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=i&&"="!=i||t.eat("="):/[<>*+\-]/.test(i)&&(t.eat(i),">"==i&&t.eat(i))),d("operator","operator",t.current());if(c.test(i)){t.eatWhile(c);var r=t.current();if("."!=e.lastType){if(h.propertyIsEnumerable(r)){var o=h[r];return d(o.type,o.style,r)}if("async"==r&&t.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return d("async","keyword",r)}return d("variable","variable",r)}}function g(t,e){for(var n,i=!1;n=t.next();){if("/"==n&&i){e.tokenize=_;break}i="*"==n}return d("comment","comment")}function m(t,e){for(var n,i=!1;null!=(n=t.next());){if(!i&&("`"==n||"$"==n&&t.eat("{"))){e.tokenize=_;break}i=!i&&"\\"==n}return d("quasi","string-2",t.current())}var v="([{}])";function y(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var n=t.string.indexOf("=>",t.start);if(!(n<0)){if(u){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,n));i&&(n=i.index)}for(var r=0,o=!1,s=n-1;s>=0;--s){var a=t.string.charAt(s),l=v.indexOf(a);if(l>=0&&l<3){if(!r){++s;break}if(0==--r){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++r;else if(c.test(a))o=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(t.string.charAt(s-1)==a&&"\\"!=t.string.charAt(s-2)){s--;break}}else if(o&&!r){++s;break}}o&&!r&&(e.fatArrowAt=s)}}var b={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(t,e,n,i,r,o){this.indented=t,this.column=e,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function x(t,e){for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0;for(var i=t.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==e)return!0}var k={state:null,column:null,marked:null,cc:null};function C(){for(var t=arguments.length-1;t>=0;t--)k.cc.push(arguments[t])}function T(){return C.apply(null,arguments),!0}function S(t,e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}function O(t){var e=k.state;if(k.marked="def",e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var i=function t(e,n){if(n){if(n.block){var i=t(e,n.prev);return i?i==n.prev?n:new L(i,n.vars,!0):null}return S(e,n.vars)?n:new L(n.prev,new M(e,n.vars),!1)}return null}(t,e.context);if(null!=i)return void(e.context=i)}else if(!S(t,e.localVars))return void(e.localVars=new M(t,e.localVars));n.globalVars&&!S(t,e.globalVars)&&(e.globalVars=new M(t,e.globalVars))}function E(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function L(t,e,n){this.prev=t,this.vars=e,this.block=n}function M(t,e){this.name=t,this.next=e}var A=new M("this",new M("arguments",null));function N(){k.state.context=new L(k.state.context,k.state.localVars,!1),k.state.localVars=A}function R(){k.state.context=new L(k.state.context,k.state.localVars,!0),k.state.localVars=null}function P(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}function D(t,e){var n=function(){var n=k.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new w(i,k.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function I(){var t=k.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function W(t){return function e(n){return n==t?T():";"==t||"}"==n||")"==n||"]"==n?C():T(e)}}function B(t,e){return"var"==t?T(D("vardef",e),yt,W(";"),I):"keyword a"==t?T(D("form"),F,B,I):"keyword b"==t?T(D("form"),B,I):"keyword d"==t?k.stream.match(/^\s*$/,!1)?T():T(D("stat"),K,W(";"),I):"debugger"==t?T(W(";")):"{"==t?T(D("}"),R,st,I,P):";"==t?T():"if"==t?("else"==k.state.lexical.info&&k.state.cc[k.state.cc.length-1]==I&&k.state.cc.pop()(),T(D("form"),F,B,I,Tt)):"function"==t?T(Lt):"for"==t?T(D("form"),St,B,I):"class"==t||u&&"interface"==e?(k.marked="keyword",T(D("form","class"==t?t:e),Pt,I)):"variable"==t?u&&"declare"==e?(k.marked="keyword",T(B)):u&&("module"==e||"enum"==e||"type"==e)&&k.stream.match(/^\s*\w/,!1)?(k.marked="keyword","enum"==e?T(Xt):"type"==e?T(At,W("operator"),ht,W(";")):T(D("form"),bt,W("{"),D("}"),st,I,I)):u&&"namespace"==e?(k.marked="keyword",T(D("form"),H,B,I)):u&&"abstract"==e?(k.marked="keyword",T(B)):T(D("stat"),J):"switch"==t?T(D("form"),F,W("{"),D("}","switch"),R,st,I,I,P):"case"==t?T(H,W(":")):"default"==t?T(W(":")):"catch"==t?T(D("form"),N,j,B,I,P):"export"==t?T(D("stat"),Bt,I):"import"==t?T(D("stat"),Ht,I):"async"==t?T(B):"@"==e?T(H,B):C(D("stat"),H,W(";"),I)}function j(t){if("("==t)return T(Nt,W(")"))}function H(t,e){return U(t,e,!1)}function z(t,e){return U(t,e,!0)}function F(t){return"("!=t?C():T(D(")"),H,W(")"),I)}function U(t,e,n){if(k.state.fatArrowAt==k.stream.start){var i=n?q:$;if("("==t)return T(N,D(")"),rt(Nt,")"),I,W("=>"),i,P);if("variable"==t)return C(N,bt,W("=>"),i,P)}var r=n?X:V;return b.hasOwnProperty(t)?T(r):"function"==t?T(Lt,r):"class"==t||u&&"interface"==e?(k.marked="keyword",T(D("form"),Rt,I)):"keyword c"==t||"async"==t?T(n?z:H):"("==t?T(D(")"),K,W(")"),I,r):"operator"==t||"spread"==t?T(n?z:H):"["==t?T(D("]"),Vt,I,r):"{"==t?ot(et,"}",null,r):"quasi"==t?C(G,r):"new"==t?T(function(t){return function(e){return"."==e?T(t?Z:Q):"variable"==e&&u?T(gt,t?X:V):C(t?z:H)}}(n)):"import"==t?T(H):T()}function K(t){return t.match(/[;\}\)\],]/)?C():C(H)}function V(t,e){return","==t?T(H):X(t,e,!1)}function X(t,e,n){var i=0==n?V:X,r=0==n?H:z;return"=>"==t?T(N,n?q:$,P):"operator"==t?/\+\+|--/.test(e)||u&&"!"==e?T(i):u&&"<"==e&&k.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?T(D(">"),rt(ht,">"),I,i):"?"==e?T(H,W(":"),r):T(r):"quasi"==t?C(G,i):";"!=t?"("==t?ot(z,")","call",i):"."==t?T(tt,i):"["==t?T(D("]"),K,W("]"),I,i):u&&"as"==e?(k.marked="keyword",T(ht,i)):"regexp"==t?(k.state.lastType=k.marked="operator",k.stream.backUp(k.stream.pos-k.stream.start-1),T(r)):void 0:void 0}function G(t,e){return"quasi"!=t?C():"${"!=e.slice(e.length-2)?T(G):T(H,Y)}function Y(t){if("}"==t)return k.marked="string-2",k.state.tokenize=m,T(G)}function $(t){return y(k.stream,k.state),C("{"==t?B:H)}function q(t){return y(k.stream,k.state),C("{"==t?B:z)}function Q(t,e){if("target"==e)return k.marked="keyword",T(V)}function Z(t,e){if("target"==e)return k.marked="keyword",T(X)}function J(t){return":"==t?T(I,B):C(V,W(";"),I)}function tt(t){if("variable"==t)return k.marked="property",T()}function et(t,e){return"async"==t?(k.marked="property",T(et)):"variable"==t||"keyword"==k.style?(k.marked="property","get"==e||"set"==e?T(nt):(u&&k.state.fatArrowAt==k.stream.start&&(n=k.stream.match(/^\s*:\s*/,!1))&&(k.state.fatArrowAt=k.stream.pos+n[0].length),T(it))):"number"==t||"string"==t?(k.marked=a?"property":k.style+" property",T(it)):"jsonld-keyword"==t?T(it):u&&E(e)?(k.marked="keyword",T(et)):"["==t?T(H,at,W("]"),it):"spread"==t?T(z,it):"*"==e?(k.marked="keyword",T(et)):":"==t?C(it):void 0;var n}function nt(t){return"variable"!=t?C(it):(k.marked="property",T(Lt))}function it(t){return":"==t?T(z):"("==t?C(Lt):void 0}function rt(t,e,n){function i(r,o){if(n?n.indexOf(r)>-1:","==r){var s=k.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),T((function(n,i){return n==e||i==e?C():C(t)}),i)}return r==e||o==e?T():n&&n.indexOf(";")>-1?C(t):T(W(e))}return function(n,r){return n==e||r==e?T():C(t,i)}}function ot(t,e,n){for(var i=3;i<arguments.length;i++)k.cc.push(arguments[i]);return T(D(e,n),rt(t,e),I)}function st(t){return"}"==t?T():C(B,st)}function at(t,e){if(u){if(":"==t)return T(ht);if("?"==e)return T(at)}}function lt(t,e){if(u&&(":"==t||"in"==e))return T(ht)}function ut(t){if(u&&":"==t)return k.stream.match(/^\s*\w+\s+is\b/,!1)?T(H,ct,ht):T(ht)}function ct(t,e){if("is"==e)return k.marked="keyword",T()}function ht(t,e){return"keyof"==e||"typeof"==e||"infer"==e?(k.marked="keyword",T("typeof"==e?z:ht)):"variable"==t||"void"==e?(k.marked="type",T(_t)):"|"==e||"&"==e?T(ht):"string"==t||"number"==t||"atom"==t?T(_t):"["==t?T(D("]"),rt(ht,"]",","),I,_t):"{"==t?T(D("}"),rt(ft,"}",",;"),I,_t):"("==t?T(rt(dt,")"),pt,_t):"<"==t?T(rt(ht,">"),ht):void 0}function pt(t){if("=>"==t)return T(ht)}function ft(t,e){return"variable"==t||"keyword"==k.style?(k.marked="property",T(ft)):"?"==e||"number"==t||"string"==t?T(ft):":"==t?T(ht):"["==t?T(W("variable"),lt,W("]"),ft):"("==t?C(Mt,ft):void 0}function dt(t,e){return"variable"==t&&k.stream.match(/^\s*[?:]/,!1)||"?"==e?T(dt):":"==t?T(ht):"spread"==t?T(dt):C(ht)}function _t(t,e){return"<"==e?T(D(">"),rt(ht,">"),I,_t):"|"==e||"."==t||"&"==e?T(ht):"["==t?T(ht,W("]"),_t):"extends"==e||"implements"==e?(k.marked="keyword",T(ht)):"?"==e?T(ht,W(":"),ht):void 0}function gt(t,e){if("<"==e)return T(D(">"),rt(ht,">"),I,_t)}function mt(){return C(ht,vt)}function vt(t,e){if("="==e)return T(ht)}function yt(t,e){return"enum"==e?(k.marked="keyword",T(Xt)):C(bt,at,kt,Ct)}function bt(t,e){return u&&E(e)?(k.marked="keyword",T(bt)):"variable"==t?(O(e),T()):"spread"==t?T(bt):"["==t?ot(xt,"]"):"{"==t?ot(wt,"}"):void 0}function wt(t,e){return"variable"!=t||k.stream.match(/^\s*:/,!1)?("variable"==t&&(k.marked="property"),"spread"==t?T(bt):"}"==t?C():"["==t?T(H,W("]"),W(":"),wt):T(W(":"),bt,kt)):(O(e),T(kt))}function xt(){return C(bt,kt)}function kt(t,e){if("="==e)return T(z)}function Ct(t){if(","==t)return T(yt)}function Tt(t,e){if("keyword b"==t&&"else"==e)return T(D("form","else"),B,I)}function St(t,e){return"await"==e?T(St):"("==t?T(D(")"),Ot,I):void 0}function Ot(t){return"var"==t?T(yt,Et):"variable"==t?T(Et):C(Et)}function Et(t,e){return")"==t?T():";"==t?T(Et):"in"==e||"of"==e?(k.marked="keyword",T(H,Et)):C(H,Et)}function Lt(t,e){return"*"==e?(k.marked="keyword",T(Lt)):"variable"==t?(O(e),T(Lt)):"("==t?T(N,D(")"),rt(Nt,")"),I,ut,B,P):u&&"<"==e?T(D(">"),rt(mt,">"),I,Lt):void 0}function Mt(t,e){return"*"==e?(k.marked="keyword",T(Mt)):"variable"==t?(O(e),T(Mt)):"("==t?T(N,D(")"),rt(Nt,")"),I,ut,P):u&&"<"==e?T(D(">"),rt(mt,">"),I,Mt):void 0}function At(t,e){return"keyword"==t||"variable"==t?(k.marked="type",T(At)):"<"==e?T(D(">"),rt(mt,">"),I):void 0}function Nt(t,e){return"@"==e&&T(H,Nt),"spread"==t?T(Nt):u&&E(e)?(k.marked="keyword",T(Nt)):u&&"this"==t?T(at,kt):C(bt,at,kt)}function Rt(t,e){return"variable"==t?Pt(t,e):Dt(t,e)}function Pt(t,e){if("variable"==t)return O(e),T(Dt)}function Dt(t,e){return"<"==e?T(D(">"),rt(mt,">"),I,Dt):"extends"==e||"implements"==e||u&&","==t?("implements"==e&&(k.marked="keyword"),T(u?ht:H,Dt)):"{"==t?T(D("}"),It,I):void 0}function It(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||u&&E(e))&&k.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(k.marked="keyword",T(It)):"variable"==t||"keyword"==k.style?(k.marked="property",T(u?Wt:Lt,It)):"number"==t||"string"==t?T(u?Wt:Lt,It):"["==t?T(H,at,W("]"),u?Wt:Lt,It):"*"==e?(k.marked="keyword",T(It)):u&&"("==t?C(Mt,It):";"==t||","==t?T(It):"}"==t?T():"@"==e?T(H,It):void 0}function Wt(t,e){if("?"==e)return T(Wt);if(":"==t)return T(ht,kt);if("="==e)return T(z);var n=k.state.lexical.prev;return C(n&&"interface"==n.info?Mt:Lt)}function Bt(t,e){return"*"==e?(k.marked="keyword",T(Kt,W(";"))):"default"==e?(k.marked="keyword",T(H,W(";"))):"{"==t?T(rt(jt,"}"),Kt,W(";")):C(B)}function jt(t,e){return"as"==e?(k.marked="keyword",T(W("variable"))):"variable"==t?C(z,jt):void 0}function Ht(t){return"string"==t?T():"("==t?C(H):C(zt,Ft,Kt)}function zt(t,e){return"{"==t?ot(zt,"}"):("variable"==t&&O(e),"*"==e&&(k.marked="keyword"),T(Ut))}function Ft(t){if(","==t)return T(zt,Ft)}function Ut(t,e){if("as"==e)return k.marked="keyword",T(zt)}function Kt(t,e){if("from"==e)return k.marked="keyword",T(H)}function Vt(t){return"]"==t?T():C(rt(z,"]"))}function Xt(){return C(D("form"),bt,W("{"),D("}"),rt(Gt,"}"),I,I)}function Gt(){return C(bt,kt)}function Yt(t,e,n){return e.tokenize==_&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(n||0)))}return P.lex=!0,I.lex=!0,{startState:function(t){var e={tokenize:_,lastType:"sof",cc:[],lexical:new w((t||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new L(null,null,!1),indented:t||0};return n.globalVars&&"object"==typeof n.globalVars&&(e.globalVars=n.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),y(t,e)),e.tokenize!=g&&t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==i?n:(e.lastType="operator"!=i||"++"!=r&&"--"!=r?i:"incdec",function(t,e,n,i,r){var o=t.cc;for(k.state=t,k.stream=r,k.marked=null,k.cc=o,k.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;)if((o.length?o.pop():l?H:B)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return k.marked?k.marked:"variable"==n&&x(t,i)?"variable-2":e}}(e,n,i,r,t))},indent:function(e,i){if(e.tokenize==g)return t.Pass;if(e.tokenize!=_)return 0;var r,a=i&&i.charAt(0),l=e.lexical;if(!/^\s*else\b/.test(i))for(var u=e.cc.length-1;u>=0;--u){var c=e.cc[u];if(c==I)l=l.prev;else if(c!=Tt)break}for(;("stat"==l.type||"form"==l.type)&&("}"==a||(r=e.cc[e.cc.length-1])&&(r==V||r==X)&&!/^[,\.=+\-*:?[\(]/.test(i));)l=l.prev;s&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var h=l.type,f=a==h;return"vardef"==h?l.indented+("operator"==e.lastType||","==e.lastType?l.info.length+1:0):"form"==h&&"{"==a?l.indented:"form"==h?l.indented+o:"stat"==h?l.indented+(function(t,e){return"operator"==t.lastType||","==t.lastType||p.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}(e,i)?s||o:0):"switch"!=l.info||f||0==n.doubleIndentSwitch?l.align?l.column+(f?0:1):l.indented+(f?0:o):l.indented+(/^(?:case|default)\b/.test(i)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:Yt,skipExpression:function(t){var e=t.cc[t.cc.length-1];e!=H&&e!=z||t.cc.pop()}}})),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(0))}]);