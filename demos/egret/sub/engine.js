module.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=2)}([function(t,e,o){var n,r,i,a,l;function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}l=function(){return function t(e,o,n){function r(l,u){if(!o[l]){if(!e[l]){if(!u&&"function"==typeof a&&a)return a(l,!0);if(i)return i(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var c=o[l]={exports:{}};e[l][0].call(c.exports,(function(t){var o=e[l][1][t];return r(o||t)}),c,c.exports,t,e,o,n)}return o[l].exports}for(var i="function"==typeof a&&a,l=0;l<n.length;l++)r(n[l]);return r}({1:[function(t,e,o){function n(){}n.prototype={on:function(t,e,o){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:o}),this},once:function(t,e,o){var n=this;function r(){n.off(t,r),e.apply(o,arguments)}return r._=e,this.on(t,r,o)},emit:function(t){for(var e=[].slice.call(arguments,1),o=((this.e||(this.e={}))[t]||[]).slice(),n=0,r=o.length;n<r;n++)o[n].fn.apply(o[n].ctx,e);return this},off:function(t,e){var o=this.e||(this.e={}),n=o[t],r=[];if(n&&e)for(var i=0,a=n.length;i<a;i++)n[i].fn!==e&&n[i].fn._!==e&&r.push(n[i]);return r.length?o[t]=r:delete o[t],this}},e.exports=n,e.exports.TinyEmitter=n},{}]},{},[1])(1)},"object"===u(e)&&void 0!==t?t.exports=l():(r=[],void 0===(i="function"==typeof(n=l)?n.apply(e,r):n)||(t.exports=i))},function(t,e){t.exports=function(t){return t=(t=t.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:e(),root:o()}}();function e(){if(r(/^<\?xml\s*/)){for(var t={attributes:{}};!i()&&!a("?>");){var e=n();if(!e)return t;t.attributes[e.name]=e.value}return r(/\?>\s*/),t}}function o(){var t=r(/^<([\w-:.]+)\s*/);if(t){for(var e,l={name:t[1],attributes:{},children:[]};!(i()||a(">")||a("?>")||a("/>"));){var u=n();if(!u)return l;l.attributes[u.name]=u.value}if(r(/^\s*\/>\s*/))return l;for(r(/\??>\s*/),l.content=function(){var t=r(/^([^<]*)/);return t?t[1]:""}();e=o();)l.children.push(e);return r(/^<\/[\w-:.]+>\s*/),l}}function n(){var t,e=r(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(e)return{name:e[1],value:(t=e[2],t.replace(/^['"]|['"]$/g,""))}}function r(e){var o=t.match(e);if(o)return t=t.slice(o[0].length),o}function i(){return 0==t.length}function a(e){return 0==t.indexOf(e)}}},function(t,e,o){"use strict";o.r(e);var n=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius","minWidth","maxWidth","minHeight","maxHeight"];function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=new(o(0)),a=0,l=1;function u(t,e){var o=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}(t);return null==e&&(e=1),"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(e,")")}var s=function(t,e){return["click","touchstart","touchmove","touchend","touchcancel"].indexOf(t),"element-".concat(e,"-").concat(t)},c=function(){function t(e){var o=this,r=e.style,s=void 0===r?{}:r,c=e.props,h=void 0===c?{}:c,f=e.idName,d=void 0===f?"":f,y=e.className,p=void 0===y?"":y,v=e.id,g=void 0===v?++a:v;e.parentId;for(var b in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.children={},this.parent=null,this.id=g,this.props=h,this.idName=d,this.className=p,this.style=s,void 0!==s.opacity&&s.color&&s.color.indexOf("#")>-1&&(s.color=u(s.color,s.opacity)),void 0!==s.opacity&&s.backgroundColor&&s.backgroundColor.indexOf("#")>-1&&(s.backgroundColor=u(s.backgroundColor,s.opacity)),this.style)n.indexOf(b)>-1&&(this.style[b]*=l);this.layoutBox={},["touchstart","touchmove","touchcancel","touchend"].forEach((function(t){o.on(t,(function(e){o.parent&&o.parent.emit(t,e)}))})),this.EE=i}var e,o,c;return e=t,(o=[{key:"add",value:function(t){t.parent=this,t.parentId=this.id,this.children[t.id]=t}},{key:"emit",value:function(t,e){i.emit(s(t,this.id),e)}},{key:"on",value:function(t,e){i.on(s(t,this.id),e)}},{key:"once",value:function(t,e){i.once(s(t,this.id),e)}},{key:"off",value:function(t,e){i.off(s(t,this.id),e)}},{key:"insert",value:function(){}},{key:"roundRect",value:function(t,e){var o=this.style||{},n=e||this.layoutBox,r=n.width,i=n.height,a=o.borderRadius,l=n.absoluteX,u=n.absoluteY;t.moveTo(l+a,u),t.arcTo(l+r,u,l+r,u+i,a),t.arcTo(l+r,u+i,l,u+i,a),t.arcTo(l,u+i,l,u,a),t.arcTo(l,u,l+r,u,a),t.clip()}},{key:"renderBorder",value:function(t,e){var o=this.style||{};o.borderRadius&&this.roundRect(t,e),t.save();var n=e||this.layoutBox,r=o.borderWidth||0,i=o.borderLeftWidth||0,a=o.borderRightWidth||0,l=o.borderTopWidth||0,u=o.borderBottomWidth||0,s=o.borderRadius||0,c=o.borderColor,h=n.absoluteX,f=n.absoluteY;r&&c&&(t.lineWidth=2*r,t.strokeStyle=c,t.stroke()),t.beginPath(),l&&(c||o.borderTopColor)&&(t.lineWidth=l,t.strokeStyle=o.borderTopColor||c,t.moveTo(s?h+s:h,f+l/2),t.lineTo(s?h+n.width-s:h+n.width,f+l/2)),u&&(c||o.borderBottomColor)&&(t.lineWidth=u,t.strokeStyle=o.borderBottomColor||c,t.moveTo(s?h+s:h,f+n.height-u/2),t.lineTo(s?h+n.width-s:h+n.width,f+n.height-u/2)),i&&(c||o.borderLeftColor)&&(t.lineWidth=i,t.strokeStyle=o.borderLeftColor||c,t.moveTo(h+i/2,s?f+s:f),t.lineTo(h+i/2,s?f+n.height-s:f+n.height)),a&&(c||o.borderRightColor)&&(t.lineWidth=a,t.strokeStyle=o.borderRightColor||c,t.moveTo(h+n.width-a/2,s?f+s:f),t.lineTo(h+n.width-a/2,s?f+n.height-s:f+n.height)),t.closePath(),t.stroke(),t.restore()}}])&&r(e.prototype,o),c&&r(e,c),t}(),h=function(){var t,e="inherit",o="ltr",n="rtl",r="row",i="row-reverse",a="column",l="column-reverse",u="flex-start",s="center",c="flex-end",h="space-between",f="space-around",d="flex-start",y="center",p="flex-end",v="stretch",g="relative",b="absolute",m={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},w={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},x={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},k={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function S(t){return void 0===t}function O(t){return t===r||t===i}function T(t,e){if(void 0!==t.style.marginStart&&O(e))return t.style.marginStart;var o=null;switch(e){case"row":o=t.style.marginLeft;break;case"row-reverse":o=t.style.marginRight;break;case"column":o=t.style.marginTop;break;case"column-reverse":o=t.style.marginBottom}return void 0!==o?o:void 0!==t.style.margin?t.style.margin:0}function B(t,e){if(void 0!==t.style.marginEnd&&O(e))return t.style.marginEnd;var o=null;switch(e){case"row":o=t.style.marginRight;break;case"row-reverse":o=t.style.marginLeft;break;case"column":o=t.style.marginBottom;break;case"column-reverse":o=t.style.marginTop}return null!=o?o:void 0!==t.style.margin?t.style.margin:0}function _(t,e){if(void 0!==t.style.borderStartWidth&&t.style.borderStartWidth>=0&&O(e))return t.style.borderStartWidth;var o=null;switch(e){case"row":o=t.style.borderLeftWidth;break;case"row-reverse":o=t.style.borderRightWidth;break;case"column":o=t.style.borderTopWidth;break;case"column-reverse":o=t.style.borderBottomWidth}return null!=o&&o>=0?o:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function C(t,e){if(void 0!==t.style.borderEndWidth&&t.style.borderEndWidth>=0&&O(e))return t.style.borderEndWidth;var o=null;switch(e){case"row":o=t.style.borderRightWidth;break;case"row-reverse":o=t.style.borderLeftWidth;break;case"column":o=t.style.borderBottomWidth;break;case"column-reverse":o=t.style.borderTopWidth}return null!=o&&o>=0?o:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function j(t,e){return function(t,e){if(void 0!==t.style.paddingStart&&t.style.paddingStart>=0&&O(e))return t.style.paddingStart;var o=null;switch(e){case"row":o=t.style.paddingLeft;break;case"row-reverse":o=t.style.paddingRight;break;case"column":o=t.style.paddingTop;break;case"column-reverse":o=t.style.paddingBottom}return null!=o&&o>=0?o:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}(t,e)+_(t,e)}function E(t,e){return function(t,e){if(void 0!==t.style.paddingEnd&&t.style.paddingEnd>=0&&O(e))return t.style.paddingEnd;var o=null;switch(e){case"row":o=t.style.paddingRight;break;case"row-reverse":o=t.style.paddingLeft;break;case"column":o=t.style.paddingBottom;break;case"column-reverse":o=t.style.paddingTop}return null!=o&&o>=0?o:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}(t,e)+C(t,e)}function P(t,e){return _(t,e)+C(t,e)}function L(t,e){return T(t,e)+B(t,e)}function W(t,e){return j(t,e)+E(t,e)}function H(t,e){return e.style.alignSelf?e.style.alignSelf:t.style.alignItems?t.style.alignItems:"stretch"}function R(t,e){if(e===n){if(t===r)return i;if(t===i)return r}return t}function Y(t,e){return function(t){return t===a||t===l}(t)?R(r,e):a}function M(t){return t.style.position?t.style.position:"relative"}function N(t){return M(t)===g&&t.style.flex>0}function D(t,e){return t.layout[k[e]]+L(t,e)}function I(t,e){return void 0!==t.style[k[e]]&&t.style[k[e]]>=0}function F(t,e){return void 0!==t.style[e]}function X(t,e){return void 0!==t.style[e]?t.style[e]:0}function A(t,e,o){var n={row:t.style.minWidth,"row-reverse":t.style.minWidth,column:t.style.minHeight,"column-reverse":t.style.minHeight}[e],r={row:t.style.maxWidth,"row-reverse":t.style.maxWidth,column:t.style.maxHeight,"column-reverse":t.style.maxHeight}[e],i=o;return void 0!==r&&r>=0&&i>r&&(i=r),void 0!==n&&n>=0&&i<n&&(i=n),i}function V(t,e){return t>e?t:e}function q(t,e){void 0===t.layout[k[e]]&&I(t,e)&&(t.layout[k[e]]=V(A(t,e,t.style[k[e]]),W(t,e)))}function z(t,e,o){e.layout[w[o]]=t.layout[k[o]]-e.layout[k[o]]-e.layout[x[o]]}function U(t,e){return void 0!==t.style[m[e]]?X(t,m[e]):-X(t,w[e])}function $(n,C,$){var J=function(t,n){var r;return(r=t.style.direction?t.style.direction:e)===e&&(r=void 0===n?o:n),r}(n,$),K=R(function(t){return t.style.flexDirection?t.style.flexDirection:a}(n),J),Q=Y(K,J),Z=R(r,J);q(n,K),q(n,Q),n.layout.direction=J,n.layout[m[K]]+=T(n,K)+U(n,K),n.layout[w[K]]+=B(n,K)+U(n,K),n.layout[m[Q]]+=T(n,Q)+U(n,Q),n.layout[w[Q]]+=B(n,Q)+U(n,Q);var tt=n.children.length,et=W(n,Z);if(function(t){return void 0!==t.style.measure}(n)){var ot=!S(n.layout[k[Z]]),nt=t;nt=I(n,Z)?n.style.width:ot?n.layout[k[Z]]:C-L(n,Z),nt-=et;var rt=!I(n,Z)&&!ot,it=!I(n,a)&&S(n.layout[k[a]]);if(rt||it){var at=n.style.measure(nt);rt&&(n.layout.width=at.width+et),it&&(n.layout.height=at.height+W(n,a))}if(0===tt)return}var lt,ut,st,ct,ht=function(t){return"wrap"===t.style.flexWrap}(n),ft=function(t){return t.style.justifyContent?t.style.justifyContent:"flex-start"}(n),dt=j(n,K),yt=j(n,Q),pt=W(n,K),vt=W(n,Q),gt=!S(n.layout[k[K]]),bt=!S(n.layout[k[Q]]),mt=O(K),wt=null,xt=null,kt=t;gt&&(kt=n.layout[k[K]]-pt);for(var St=0,Ot=0,Tt=0,Bt=0,_t=0,Ct=0;Ot<tt;){var jt,Et=0,Pt=0,Lt=0,Wt=0,Ht=gt&&ft===u||!gt&&ft!==s,Rt=Ht?tt:St,Yt=!0,Mt=tt,Nt=null,Dt=null,It=dt,Ft=0;for(lt=St;lt<tt;++lt){if((st=n.children[lt]).lineIndex=Ct,st.nextAbsoluteChild=null,st.nextFlexChild=null,(Jt=H(n,st))===v&&M(st)===g&&bt&&!I(st,Q))st.layout[k[Q]]=V(A(st,Q,n.layout[k[Q]]-vt-L(st,Q)),W(st,Q));else if(M(st)===b)for(null===wt&&(wt=st),null!==xt&&(xt.nextAbsoluteChild=st),xt=st,ut=0;ut<2;ut++)ct=0!==ut?r:a,!S(n.layout[k[ct]])&&!I(st,ct)&&F(st,m[ct])&&F(st,w[ct])&&(st.layout[k[ct]]=V(A(st,ct,n.layout[k[ct]]-W(n,ct)-L(st,ct)-X(st,m[ct])-X(st,w[ct])),W(st,ct)));var Xt=0;if(gt&&N(st)?(Pt++,Lt+=st.style.flex,null===Nt&&(Nt=st),null!==Dt&&(Dt.nextFlexChild=st),Dt=st,Xt=W(st,K)+L(st,K)):(jt=t,mt||(jt=I(n,Z)?n.layout[k[Z]]-et:C-L(n,Z)-et),0===Tt&&G(st,jt,J),M(st)===g&&(Wt++,Xt=D(st,K))),ht&&gt&&Et+Xt>kt&&lt!==St){Wt--,Tt=1;break}Ht&&(M(st)!==g||N(st))&&(Ht=!1,Rt=lt),Yt&&(M(st)!==g||Jt!==v&&Jt!==d||S(st.layout[k[Q]]))&&(Yt=!1,Mt=lt),Ht&&(st.layout[x[K]]+=It,gt&&z(n,st,K),It+=D(st,K),Ft=V(Ft,A(st,Q,D(st,Q)))),Yt&&(st.layout[x[Q]]+=Bt+yt,bt&&z(n,st,Q)),Tt=0,Et+=Xt,Ot=lt+1}var At=0,Vt=0,qt=0;if(qt=gt?kt-Et:V(Et,0)-Et,0!==Pt){var zt,Ut,$t=qt/Lt;for(Dt=Nt;null!==Dt;)(zt=$t*Dt.style.flex+W(Dt,K))!==(Ut=A(Dt,K,zt))&&(qt-=Ut,Lt-=Dt.style.flex),Dt=Dt.nextFlexChild;for(($t=qt/Lt)<0&&($t=0),Dt=Nt;null!==Dt;)Dt.layout[k[K]]=A(Dt,K,$t*Dt.style.flex+W(Dt,K)),jt=t,I(n,Z)?jt=n.layout[k[Z]]-et:mt||(jt=C-L(n,Z)-et),G(Dt,jt,J),st=Dt,Dt=Dt.nextFlexChild,st.nextFlexChild=null}else ft!==u&&(ft===s?At=qt/2:ft===c?At=qt:ft===h?(qt=V(qt,0),Vt=Pt+Wt-1!=0?qt/(Pt+Wt-1):0):ft===f&&(At=(Vt=qt/(Pt+Wt))/2));for(It+=At,lt=Rt;lt<Ot;++lt)M(st=n.children[lt])===b&&F(st,m[K])?st.layout[x[K]]=X(st,m[K])+_(n,K)+T(st,K):(st.layout[x[K]]+=It,gt&&z(n,st,K),M(st)===g&&(It+=Vt+D(st,K),Ft=V(Ft,A(st,Q,D(st,Q)))));var Gt=n.layout[k[Q]];for(bt||(Gt=V(A(n,Q,Ft+vt),vt)),lt=Mt;lt<Ot;++lt)if(M(st=n.children[lt])===b&&F(st,m[Q]))st.layout[x[Q]]=X(st,m[Q])+_(n,Q)+T(st,Q);else{var Jt,Kt=yt;if(M(st)===g)if((Jt=H(n,st))===v)S(st.layout[k[Q]])&&(st.layout[k[Q]]=V(A(st,Q,Gt-vt-L(st,Q)),W(st,Q)));else if(Jt!==d){var Qt=Gt-vt-D(st,Q);Kt+=Jt===y?Qt/2:Qt}st.layout[x[Q]]+=Bt+Kt,bt&&z(n,st,Q)}Bt+=Ft,_t=V(_t,It),Ct+=1,St=Ot}if(Ct>1&&bt){var Zt=n.layout[k[Q]]-vt,te=Zt-Bt,ee=0,oe=yt,ne=function(t){return t.style.alignContent?t.style.alignContent:"flex-start"}(n);ne===p?oe+=te:ne===y?oe+=te/2:ne===v&&Zt>Bt&&(ee=te/Ct);var re=0;for(lt=0;lt<Ct;++lt){var ie=re,ae=0;for(ut=ie;ut<tt;++ut)if(M(st=n.children[ut])===g){if(st.lineIndex!==lt)break;S(st.layout[k[Q]])||(ae=V(ae,st.layout[k[Q]]+L(st,Q)))}for(re=ut,ae+=ee,ut=ie;ut<re;++ut)if(M(st=n.children[ut])===g){var le=H(n,st);if(le===d)st.layout[x[Q]]=oe+T(st,Q);else if(le===p)st.layout[x[Q]]=oe+ae-B(st,Q)-st.layout[k[Q]];else if(le===y){var ue=st.layout[k[Q]];st.layout[x[Q]]=oe+(ae-ue)/2}else le===v&&(st.layout[x[Q]]=oe+T(st,Q))}oe+=ae}}var se=!1,ce=!1;if(gt||(n.layout[k[K]]=V(A(n,K,_t+E(n,K)),pt),K!==i&&K!==l||(se=!0)),bt||(n.layout[k[Q]]=V(A(n,Q,Bt+vt),vt),Q!==i&&Q!==l||(ce=!0)),se||ce)for(lt=0;lt<tt;++lt)st=n.children[lt],se&&z(n,st,K),ce&&z(n,st,Q);for(xt=wt;null!==xt;){for(ut=0;ut<2;ut++)ct=0!==ut?r:a,!S(n.layout[k[ct]])&&!I(xt,ct)&&F(xt,m[ct])&&F(xt,w[ct])&&(xt.layout[k[ct]]=V(A(xt,ct,n.layout[k[ct]]-P(n,ct)-L(xt,ct)-X(xt,m[ct])-X(xt,w[ct])),W(xt,ct))),F(xt,w[ct])&&!F(xt,m[ct])&&(xt.layout[m[ct]]=n.layout[k[ct]]-xt.layout[k[ct]]-X(xt,w[ct]));st=xt,xt=xt.nextAbsoluteChild,st.nextAbsoluteChild=null}}function G(t,e,n){t.shouldUpdate=!0;var r=t.style.direction||o;!t.isDirty&&t.lastLayout&&t.lastLayout.requestedHeight===t.layout.height&&t.lastLayout.requestedWidth===t.layout.width&&t.lastLayout.parentMaxWidth===e&&t.lastLayout.direction===r?(t.layout.width=t.lastLayout.width,t.layout.height=t.lastLayout.height,t.layout.top=t.lastLayout.top,t.layout.left=t.lastLayout.left):(t.lastLayout||(t.lastLayout={}),t.lastLayout.requestedWidth=t.layout.width,t.lastLayout.requestedHeight=t.layout.height,t.lastLayout.parentMaxWidth=e,t.lastLayout.direction=r,t.children.forEach((function(t){t.layout.width=void 0,t.layout.height=void 0,t.layout.top=0,t.layout.left=0})),$(t,e,n),t.lastLayout.width=t.layout.width,t.lastLayout.height=t.layout.height,t.lastLayout.top=t.layout.top,t.lastLayout.left=t.layout.left)}return{layoutNodeImpl:$,computeLayout:G,fillNodes:function t(e){return e.layout&&!e.isDirty||(e.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),e.style||(e.style={}),e.children||(e.children=[]),e.children.forEach(t),e}}}();function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){function e(t){var o,n=t.style,r=void 0===n?{}:n,i=t.props,a=void 0===i?{}:i,l=t.idName,u=void 0===l?"":l,s=t.className,c=void 0===s?"":s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=y(this,p(e).call(this,{props:a,idName:u,className:c,style:r}))).type="View",o.ctx=null,o}var o,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,t),o=e,(n=[{key:"insert",value:function(t,e){this.ctx=t;var o=this.style||{},n=e||this.layoutBox;t.save();var r=o.borderWidth||0,i=(o.borderColor,n.absoluteX),a=n.absoluteY,l=o.borderLeftWidth||r,u=o.borderRightWidth||r,s=o.borderTopWidth||r,c=o.borderBottomWidth||r;this.renderBorder(t,e),o.backgroundColor&&(t.fillStyle=o.backgroundColor,t.fillRect(i+l,a+u,n.width-(l+u),n.height-(s+c))),t.restore()}}])&&d(o.prototype,n),r&&d(o,r),e}(c);function b(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function x(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.pool={}}var e,o,n;return e=t,(o=[{key:"get",value:function(t){return this.pool[t]}},{key:"set",value:function(t,e){this.pool[t]=e}},{key:"clear",value:function(){this.pool={}}}])&&b(e.prototype,o),n&&b(e,n),t}())("imgPool"),T=function(t){function e(t){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.style,r=void 0===n?{}:n,i=t.props,a=void 0===i?{}:i,l=t.idName,u=void 0===l?"":l,s=t.className,c=void 0===s?"":s,h=t.src,f=void 0===h?"":h;(o=x(this,k(e).call(this,{props:a,idName:u,className:c,style:r}))).src=f,o.type="Image",o.ctx=null,o.renderBoxes=[];var d=O.get(o.src);return o.imgLoadDone=!1,d&&d.complete?(o.img=d,o.imgLoadDone=!0):d&&!d.complete?(o.img=d,o.img.onloadcbks.push((function(){o.imgLoadDone=!0,o.emit("img__load__done")}))):(o.img=wx.createImage(),o.img.onloadcbks=[],O.set(o.src,o.img),o.img.onload=function(){o.imgLoadDone=!0,o.emit("img__load__done"),o.img.onloadcbks.forEach((function(t){return t()}))},o.img.src=o.src),o}var o,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(e,t),o=e,(n=[{key:"renderImg",value:function(t,e){var o=this.style||{},n=e||this.layoutBox;t.save(),o.borderColor&&(t.strokeStyle=o.borderColor),t.lineWidth=o.borderWidth||0;var r=n.absoluteX,i=n.absoluteY;t.drawImage(this.img,r,i,n.width,n.height),t.restore(),this.EE.emit("image__render__done")}},{key:"insert",value:function(t,e){var o=this;this.ctx=t,this.imgLoadDone?this.renderImg(t,e):this.on("img__load__done",(function(){o.renderImg(t,e)}))}}])&&w(o.prototype,n),r&&w(o,r),e}(c);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function C(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P="PingFangSC-Regular,Helvetica Neue,Helvetica,Arial,Microsoft YaHei,SimSun,sans-serif",L=null,W=function(){if(L)return L;var t=wx.createCanvas();return t.width=1,t.height=1,L=t.getContext("2d")},H=function(t){function e(t){var o,n=t.style,r=void 0===n?{}:n,i=t.props,a=void 0===i?{}:i,l=t.idName,u=void 0===l?"":l,s=t.className,c=void 0===s?"":s,h=t.value,f=void 0===h?"":h;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===r.width){var d=W();d.font="".concat(r.fontSize||12,"px ").concat(P," ").concat(r.fontWeight||""),r.width=d.measureText(f).width||0}return(o=C(this,j(e).call(this,{props:a,idName:u,className:c,style:r}))).value=f,o.type="Text",o.ctx=null,o}var o,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,t),o=e,(n=[{key:"toCanvasData",value:function(){var t=this.style||{};this.fontSize=t.fontSize||12,this.textBaseline="top",this.font="".concat(t.fontWeight||""," ").concat(t.fontSize||12,"px ").concat(P),this.textAlign=t.textAlign||"left",this.fillStyle=t.color||"#000"}},{key:"insert",value:function(t,e){this.ctx=t,this.toCanvasData(),t.save();var o=e||this.layoutBox,n=this.style;t.textBaseline=this.textBaseline,t.font=this.font,t.textAlign=this.textAlign;var r=o.absoluteX,i=o.absoluteY;this.renderBorder(t),n.backgroundColor&&(t.fillStyle=n.backgroundColor,t.fillRect(r,i,o.width,o.height)),t.fillStyle=this.fillStyle,"center"===this.textAlign?r+=o.width/2:"right"===this.textAlign&&(r+=o.width),n.lineHeight&&(t.textBaseline="middle",i+=n.lineHeight/2),t.fillText(this.value,r,i),t.restore()}}])&&_(o.prototype,n),r&&_(o,r),e}(c);function R(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Y=wx.getSystemInfoSync().devicePixelRatio,M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.needProcess=!1,this.startFunc=this.touchStartHandler.bind(this),this.endFunc=this.touchEndHandler.bind(this),this.moveFunc=this.touchMoveHandler.bind(this)}var e,o,n;return e=t,(o=[{key:"reset",value:function(){this.touchTime=new Date,this.touchStartX=0,this.touchStartY=0,this.start=0,this.end=0,this.move=0,this.target=0,this.scroll=null,cancelAnimationFrame(this.animate)}},{key:"enable",value:function(){this.reset(),this.needProcess=!0}},{key:"disable",value:function(){this.needProcess=!1}},{key:"setTouchRange",value:function(t,e,o){this.enable(),this.start=t,this.end=e,0===t&&0===e||(this.scroll=o)}},{key:"limitTarget",value:function(t){var e=t;return t>this.end?e=this.end:t<this.start&&(e=this.start),e}},{key:"bindTouchEvent",value:function(){this.hasTouchBind||(this.hasTouchBind=!0,wx.onTouchStart(this.startFunc),wx.onTouchMove(this.moveFunc),wx.onTouchEnd(this.endFunc))}},{key:"offTouchEvent",value:function(){wx.offTouchStart(this.startFunc),wx.offTouchMove(this.moveFunc),wx.offTouchEnd(this.endFunc)}},{key:"touchStartHandler",value:function(t){this.touchStartX=t.touches[0].clientX*Y,this.touchStartY=t.touches[0].clientY*Y,this.touchTime=new Date,this.isMoving=!0,this.needProcess=!0,this.animate=requestAnimationFrame(this.loop.bind(this))}},{key:"touchMoveHandler",value:function(t){var e=t.touches[0].clientY*Y;(this.touchStartY-e>2||this.touchStartY-e<-2)&&(this.target-=this.touchStartY-e),this.target=this.limitTarget(this.target),this.touchStartY=e}},{key:"touchEndHandler",value:function(){this.isMoving=!1;var t=(Date.now()-this.touchTime)/1e3;t<.9&&(this.target+=.6*(this.target-this.move)/(5*t),this.target=this.limitTarget(this.target))}},{key:"loop",value:function(){this.needProcess?(this.isMoving?(Math.abs(this.target-this.move)>1?this.move+=.4*(this.target-this.move):this.move=this.target,this.scroll&&this.scroll(this.move)):this.move!==this.target?(Math.abs(this.target-this.move)>1?this.move+=.3*(this.target-this.move):this.move=this.target,this.scroll&&this.scroll(this.move)):this.needProcess=!1,this.animate=requestAnimationFrame(this.loop.bind(this))):cancelAnimationFrame(this.animate)}}])&&R(e.prototype,o),n&&R(e,n),t}();function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A=function(t){function e(t){var o,n,r,i,a,l,u,s,c=t.style,h=void 0===c?{}:c,f=t.props,d=void 0===f?{}:f,y=t.name,p=void 0===y?"":y;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(o=!(r=I(e).call(this,{props:d,name:p,style:h}))||"object"!==N(r)&&"function"!=typeof r?F(n):r).type="ScrollView",o.top=0,o.touch=new M,o.pageHeight=2048,o.pageCount=1,o.canvasMap={},o.throttleRepaint=(i=o.repaint,a=16,l=F(o),a||(a=250),function(){var t=l||this,e=+new Date,o=arguments;u&&e<u+a?(clearTimeout(s),s=setTimeout((function(){u=e,i.apply(t,o)}),a)):(u=e,i.apply(t,o))}),o}var o,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(e,t),o=e,(n=[{key:"updateRenderPort",value:function(t){this.renderport=t}},{key:"calPageData",value:function(){this.pageCount=Math.ceil((this.scrollHeight+this.layoutBox.top)/this.pageHeight);for(var t=0,e=0;e<this.pageCount;e++){var o=wx.createCanvas(),n=o.getContext("2d");o.width=this.renderport.width,o.height=this.pageHeight,n.id=++t,this.canvasMap[e]={canvas:o,context:n}}}},{key:"repaint",value:function(t){t=-t,this.top=t;var e=this.layoutBox,o=(this.style,e.absoluteY);this.ctx.clearRect(e.absoluteX,o,e.width,e.height),this.ctx.fillStyle=this.parent.style.backgroundColor||"#ffffff",this.ctx.fillRect(e.absoluteX,o,e.width,e.height);for(var n=0;n<this.pageCount;n++){var r=this.canvasMap[n].canvas,i=o+t,a=o+t+e.height;if(i<this.pageHeight*(n+1)&&a>this.pageHeight*n){var l=o+t-this.pageHeight*n,u=e.height,s=o;e.height,l>0&&this.pageHeight-l<e.height?u=this.pageHeight-l:l<0&&(u=l+e.height,s-=l,l=0),this.ctx.drawImage(r,e.absoluteX,l,e.width,u,e.absoluteX,s,e.width,u)}}}},{key:"renderChildren",value:function(t){var e=this,o=t.children,n=this.pageHeight;Object.keys(o).forEach((function(t){var r=o[t],i=r.layoutBox.absoluteY,a=Math.floor(r.layoutBox.absoluteY/n),l=e.canvasMap[a].context;r.layoutBox.absoluteY-=e.pageHeight*a,r.insert(l,r.layoutBox);var u=a+1;if(i+r.layoutBox.height>n*u){var s=Object.assign({},r.layoutBox);s.absoluteY=i-e.pageHeight*u,r.insert(e.canvasMap[u].context,s)}e.renderChildren(r)}))}},{key:"insertScrollView",value:function(t){var e=this;this.insert(t),this.calPageData(),this.renderChildren(this),this.EE.on("image__render__done",(function(t){e.throttleRepaint(e.top||0)})),this.scrollHeight>this.layoutBox.height&&(this.touch.setTouchRange(-(this.scrollHeight-this.layoutBox.height),0,this.repaint.bind(this)),this.on("touchstart",this.touch.startFunc),this.on("touchmove",this.touch.moveFunc),this.on("touchend",this.touch.endFunc))}},{key:"scrollHeight",get:function(){var t=Object.keys(this.children),e=this.children[t[t.length-1]];return e.layoutBox.top+e.layoutBox.height}}])&&D(o.prototype,n),r&&D(o,r),e}(g);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=o(1),J=(wx.getSystemInfoSync().pixelRatio,function t(e){return Object.keys(e.children).map((function(t){return e.children[t]})).map((function(e){return{id:e.id,name:e.name,style:e.style,children:t(e)}}))});function K(t,e){var o=this;t.forEach((function(t){var n=e[t.id];n.layoutBox=n.layoutBox||{},["left","top","width","height"].forEach((function(e){n.layoutBox[e]=t.layout[e]})),n.parent?(n.layoutBox.absoluteX=(n.parent.layoutBox.absoluteX||0)+n.layoutBox.left,n.layoutBox.absoluteY=(n.parent.layoutBox.absoluteY||0)+n.layoutBox.top):(n.layoutBox.absoluteX=n.layoutBox.left,n.layoutBox.absoluteY=n.layoutBox.top),n.layoutBox.originalAbsoluteY=n.layoutBox.absoluteY,"ScrollView"===n.type&&n.updateRenderPort(o.renderport),K.call(o,t.children,n.children)}))}var Q=new(function(t){function e(){var t,o,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.style,a=r.name;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(t=!(n=z(e).call(this,{style:i,id:0,name:a}))||"object"!==V(n)&&"function"!=typeof n?U(o):n).hasEventHandler=!1,t.elementTree=null,t.renderContext=null,t.debugInfo={},t.renderport={},t.viewport={},t.touchStart=t.eventHandler("touchstart").bind(U(t)),t.touchMove=t.eventHandler("touchmove").bind(U(t)),t.touchEnd=t.eventHandler("touchend").bind(U(t)),t.touchCancel=t.eventHandler("touchcancel").bind(U(t)),t}var o,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(e,t),o=e,(n=[{key:"updateRenderPort",value:function(t){this.renderport.width=t.width,this.renderport.height=t.height}},{key:"updateViewPort",value:function(t){this.viewport.width=t.width||0,this.viewport.height=t.height||0,this.viewport.x=t.x||0,this.viewport.y=t.y||0,this.realLayoutBox={realX:this.viewport.x,realY:this.viewport.y}}},{key:"init",value:function(t,e){var o=new Date,n=G(t).root;this.debugInfo.xmlTree=new Date-o,this.layoutTree=function t(e,o){var n=this,r={view:g,text:H,image:T,scrollview:A}[e.name],i=e.attributes.id||"",a=Object.keys(e.attributes).reduce((function(t,n){var r=e.attributes[n],a=n;return"id"===n?(t.style=Object.assign(t.style||{},o[i]||{}),t):"class"===n?(t.style=r.split(/\s+/).reduce((function(t,e){return Object.assign(t,o[e])}),t.style||{}),t):(/\{\{.+\}\}/.test(r)||(t[a]="true"===r||"false"!==r&&r),t)}),{});a.idName=i,a.className=e.attributes.class||"";var l=new r(a);return e.children.forEach((function(e){var r=t.call(n,e,o);l.add(r)})),l}(n,e),this.debugInfo.layoutTree=new Date-o,this.add(this.layoutTree);var r,i={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:J(this)};r=i,h.fillNodes(r),h.computeLayout(r),this.elementTree=i,this.debugInfo.renderTree=new Date-o;var a=this.children[Object.keys(this.children)[0]];void 0===a.style.width||void 0===a.style.height?console.error("Please set width and height property for root element"):this.updateRenderPort({width:a.style.width,height:a.style.height})}},{key:"layout",value:function(t){this.renderContext=t,K.call(this,this.elementTree.children,this.children),function t(e,o,n){e.forEach((function(e){var r=o[e.id];r.realLayoutBox=r.realLayoutBox||{},["left","top","width","height"].forEach((function(t){r.realLayoutBox[t]=e.layout[t]*n})),r.parent?(r.realLayoutBox.realX=(r.parent.realLayoutBox.realX||0)+r.realLayoutBox.left,Object.defineProperty(r.realLayoutBox,"realY",{configurable:!0,enumerable:!0,get:function(){var t=(r.parent.realLayoutBox.realY||0)+r.realLayoutBox.top;return r.parent&&"ScrollView"===r.parent.type&&(t-=r.parent.top*n),t}})):(r.realLayoutBox.realX=r.realLayoutBox.left,r.realLayoutBox.realY=r.realLayoutBox.top),t(e.children,r.children,n)}))}(this.elementTree.children,this.children,this.viewport.width/this.renderport.width),function t(e,o,n){e.map((function(e){var r=o[e.id];if("ScrollView"!==r.type)return r.insert(n),t(e.children,r.children,n);r.insertScrollView(n)}))}(this.elementTree.children,this.children,t),this.bindEvents()}},{key:"getChildByPos",value:function(t,e,o){for(var n=Object.keys(t.children),r=0;r<n.length;r++){var i=t.children[n[r]],a=i.realLayoutBox;if(a.realX<=e&&e<=a.realX+a.width&&a.realY<=o&&o<=a.realY+a.height)return Object.keys(i.children).length?this.getChildByPos(i,e,o):i}return t}},{key:"eventHandler",value:function(t){return function(e){if(this.elementTree){var o=e.touches[0]||e.changedTouches[0],n=o&&this.getChildByPos(this,o.pageX,o.pageY);n&&n.emit(t,e)}}}},{key:"bindEvents",value:function(){this.hasEventHandler||(this.hasEventHandler=!0,wx.onTouchStart(this.touchStart),wx.onTouchMove(this.touchMove),wx.onTouchEnd(this.touchEnd),wx.onTouchCancel(this.touchCancel))}},{key:"emit",value:function(t,e){i.emit(t,e)}},{key:"on",value:function(t,e){i.on(t,e)}},{key:"once",value:function(t,e){i.once(t,e)}},{key:"off",value:function(t,e){i.off(t,e)}},{key:"getElementsById",value:function(t){return function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return Object.keys(e.children).forEach((function(r){var i=e.children[r];i.idName===n&&o.push(i),Object.keys(i.children).length&&t(i,o,n)})),o}(this,[],t)}},{key:"getElementsByClassName",value:function(t){return function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return Object.keys(e.children).forEach((function(r){var i=e.children[r];i.className.split(/\s+/).indexOf(n)>-1&&o.push(i),Object.keys(i.children).length&&t(i,o,n)})),o}(this,[],t)}},{key:"clear",value:function(){this.elementTree=null,this.children={},this.renderContext.clearRect(0,0,this.renderport.width,this.renderport.height)}}])&&q(o.prototype,n),r&&q(o,r),e}(c))({style:{width:0,height:0},name:"layout"});e.default=Q}]);